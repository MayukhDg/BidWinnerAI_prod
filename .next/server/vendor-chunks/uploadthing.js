"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/uploadthing";
exports.ids = ["vendor-chunks/uploadthing"];
exports.modules = {

/***/ "(rsc)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js":
/*!****************************************************************!*\
  !*** ./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logDeprecationWarning: () => (/* binding */ logDeprecationWarning)\n/* harmony export */ });\n//#region src/_internal/deprecations.ts\nconst logDeprecationWarning = (message) => {\n\tconsole.warn(`⚠️ [uploadthing][deprecated] ${message}`);\n};\n\n//#endregion\n\n//# sourceMappingURL=deprecations-pLmw6Ytd.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9kZXByZWNhdGlvbnMtcExtdzZZdGQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQSw4Q0FBOEMsUUFBUTtBQUN0RDs7QUFFQTtBQUNpQztBQUNqQyIsInNvdXJjZXMiOlsid2VicGFjazovL2JpZHdpbm5lcmFpLy4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvZGVwcmVjYXRpb25zLXBMbXc2WXRkLmpzPzZhYjQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvZGVwcmVjYXRpb25zLnRzXG5jb25zdCBsb2dEZXByZWNhdGlvbldhcm5pbmcgPSAobWVzc2FnZSkgPT4ge1xuXHRjb25zb2xlLndhcm4oYOKaoO+4jyBbdXBsb2FkdGhpbmddW2RlcHJlY2F0ZWRdICR7bWVzc2FnZX1gKTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgbG9nRGVwcmVjYXRpb25XYXJuaW5nIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZXByZWNhdGlvbnMtcExtdzZZdGQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/package-DpScpvTA.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/package-DpScpvTA.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n//#region package.json\nvar version = \"7.7.4\";\n\n//#endregion\n\n//# sourceMappingURL=package-DpScpvTA.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9wYWNrYWdlLURwU2NwdlRBLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQ21CO0FBQ25CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmlkd2lubmVyYWkvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9wYWNrYWdlLURwU2NwdlRBLmpzP2I5NDUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHBhY2thZ2UuanNvblxudmFyIHZlcnNpb24gPSBcIjcuNy40XCI7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgdmVyc2lvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFja2FnZS1EcFNjcHZUQS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/package-DpScpvTA.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/shared-schemas-BmG5ARoX.js":
/*!******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/shared-schemas-BmG5ARoX.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionType: () => (/* binding */ ActionType),\n/* harmony export */   CallbackResultResponse: () => (/* binding */ CallbackResultResponse),\n/* harmony export */   MetadataFetchResponse: () => (/* binding */ MetadataFetchResponse),\n/* harmony export */   MetadataFetchStreamPart: () => (/* binding */ MetadataFetchStreamPart),\n/* harmony export */   UploadActionPayload: () => (/* binding */ UploadActionPayload),\n/* harmony export */   UploadThingHook: () => (/* binding */ UploadThingHook),\n/* harmony export */   UploadThingToken: () => (/* binding */ UploadThingToken),\n/* harmony export */   UploadedFileData: () => (/* binding */ UploadedFileData)\n/* harmony export */ });\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n\n\n\n//#region src/_internal/shared-schemas.ts\nconst ContentDispositionSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.ValidContentDispositions);\nconst ACLSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.ValidACLs);\n/**\n* Valid options for the `?actionType` query param\n*/\nconst ActionType = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(\"upload\");\n/**\n* Valid options for the `uploadthing-hook` header\n* for requests coming from UT server\n*/\nconst UploadThingHook = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(\"callback\", \"error\");\n/**\n* =============================================================================\n* =========================== Configuration ===================================\n* =============================================================================\n*/\nconst DecodeString = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.transform(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromSelf, effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String, {\n\tdecode: (data) => new TextDecoder().decode(data),\n\tencode: (data) => new TextEncoder().encode(data)\n});\nconst ParsedToken = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Struct({\n\tapiKey: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Redacted(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.startsWith(\"sk_\"))),\n\tappId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tregions: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonEmptyArray(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String),\n\tingestHost: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optionalWith({ default: () => \"ingest.uploadthing.com\" }))\n});\nconst UploadThingToken = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromBase64.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose(DecodeString), effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.parseJson(ParsedToken)));\n/**\n* =============================================================================\n* ======================== File Type Hierarchy ===============================\n* =============================================================================\n*/\n/**\n* Properties from the web File object, this is what the client sends when initiating an upload\n*/\nvar FileUploadData = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"FileUploadData\")({\n\tname: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tsize: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number,\n\ttype: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tlastModified: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optional)\n}) {};\n/**\n* `.middleware()` can add a customId to the incoming file data\n*/\nvar FileUploadDataWithCustomId = class extends FileUploadData.extend(\"FileUploadDataWithCustomId\")({ customId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String) }) {};\n/**\n* When files are uploaded, we get back\n* - a key\n* - URLs for the file\n* - the hash (md5-hex) of the uploaded file's contents\n*/\nvar UploadedFileData = class extends FileUploadDataWithCustomId.extend(\"UploadedFileData\")({\n\tkey: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\turl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tappUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tufsUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tfileHash: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String\n}) {};\nvar MetadataFetchStreamPart = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"MetadataFetchStreamPart\")({\n\tpayload: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tsignature: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\thook: UploadThingHook\n}) {};\nvar MetadataFetchResponse = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"MetadataFetchResponse\")({ ok: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean }) {};\nvar CallbackResultResponse = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"CallbackResultResponse\")({ ok: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean }) {};\n/**\n* =============================================================================\n* ======================== Client Action Payloads ============================\n* =============================================================================\n*/\nvar UploadActionPayload = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"UploadActionPayload\")({\n\tfiles: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Array(FileUploadData),\n\tinput: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Unknown\n}) {};\n\n//#endregion\n\n//# sourceMappingURL=shared-schemas-BmG5ARoX.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9zaGFyZWQtc2NoZW1hcy1CbUc1QVJvWC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTBFO0FBQ3ZDOztBQUVuQztBQUNBLGlDQUFpQyxrREFBUyxJQUFJLHlFQUF3QjtBQUN0RSxrQkFBa0Isa0RBQVMsSUFBSSwwREFBUztBQUN4QztBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0RBQVM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixvREFBVyxDQUFDLDZEQUFvQixFQUFFLGlEQUFRO0FBQy9EO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsb0JBQW9CLGlEQUFRO0FBQzVCLFNBQVMsbURBQVUsQ0FBQyxpREFBUSxNQUFNLHFEQUFZO0FBQzlDLFFBQVEsaURBQVE7QUFDaEIsVUFBVSx3REFBZSxDQUFDLGlEQUFRO0FBQ2xDLGFBQWEsaURBQVEsTUFBTSx1REFBYyxHQUFHLHlDQUF5QztBQUNyRixDQUFDO0FBQ0QseUJBQXlCLCtEQUFzQixNQUFNLGtEQUFTLGdCQUFnQixrREFBUyxDQUFDLG9EQUFXO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsZ0RBQU87QUFDMUMsT0FBTyxpREFBUTtBQUNmLE9BQU8saURBQVE7QUFDZixPQUFPLGlEQUFRO0FBQ2YsZUFBZSxpREFBUSxNQUFNLG1EQUFVO0FBQ3ZDLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxxR0FBcUcsVUFBVSxpREFBUSxDQUFDLGlEQUFRLEdBQUc7QUFDbkk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGlEQUFRO0FBQ2QsTUFBTSxpREFBUTtBQUNkLFNBQVMsaURBQVE7QUFDakIsU0FBUyxpREFBUTtBQUNqQixXQUFXLGlEQUFRO0FBQ25CLENBQUM7QUFDRCw0Q0FBNEMsZ0RBQU87QUFDbkQsVUFBVSxpREFBUTtBQUNsQixZQUFZLGlEQUFRO0FBQ3BCO0FBQ0EsQ0FBQztBQUNELDBDQUEwQyxnREFBTyw0QkFBNEIsSUFBSSxrREFBUyxFQUFFO0FBQzVGLDJDQUEyQyxnREFBTyw2QkFBNkIsSUFBSSxrREFBUyxFQUFFO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsZ0RBQU87QUFDL0MsUUFBUSxnREFBTztBQUNmLFFBQVEsa0RBQVM7QUFDakIsQ0FBQzs7QUFFRDtBQUN3SztBQUN4SyIsInNvdXJjZXMiOlsid2VicGFjazovL2JpZHdpbm5lcmFpLy4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3Qvc2hhcmVkLXNjaGVtYXMtQm1HNUFSb1guanM/MWQ2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWYWxpZEFDTHMsIFZhbGlkQ29udGVudERpc3Bvc2l0aW9ucyB9IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG5pbXBvcnQgKiBhcyBTIGZyb20gXCJlZmZlY3QvU2NoZW1hXCI7XG5cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL3NoYXJlZC1zY2hlbWFzLnRzXG5jb25zdCBDb250ZW50RGlzcG9zaXRpb25TY2hlbWEgPSBTLkxpdGVyYWwoLi4uVmFsaWRDb250ZW50RGlzcG9zaXRpb25zKTtcbmNvbnN0IEFDTFNjaGVtYSA9IFMuTGl0ZXJhbCguLi5WYWxpZEFDTHMpO1xuLyoqXG4qIFZhbGlkIG9wdGlvbnMgZm9yIHRoZSBgP2FjdGlvblR5cGVgIHF1ZXJ5IHBhcmFtXG4qL1xuY29uc3QgQWN0aW9uVHlwZSA9IFMuTGl0ZXJhbChcInVwbG9hZFwiKTtcbi8qKlxuKiBWYWxpZCBvcHRpb25zIGZvciB0aGUgYHVwbG9hZHRoaW5nLWhvb2tgIGhlYWRlclxuKiBmb3IgcmVxdWVzdHMgY29taW5nIGZyb20gVVQgc2VydmVyXG4qL1xuY29uc3QgVXBsb2FkVGhpbmdIb29rID0gUy5MaXRlcmFsKFwiY2FsbGJhY2tcIiwgXCJlcnJvclwiKTtcbi8qKlxuKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ29uZmlndXJhdGlvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKi9cbmNvbnN0IERlY29kZVN0cmluZyA9IFMudHJhbnNmb3JtKFMuVWludDhBcnJheUZyb21TZWxmLCBTLlN0cmluZywge1xuXHRkZWNvZGU6IChkYXRhKSA9PiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGF0YSksXG5cdGVuY29kZTogKGRhdGEpID0+IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShkYXRhKVxufSk7XG5jb25zdCBQYXJzZWRUb2tlbiA9IFMuU3RydWN0KHtcblx0YXBpS2V5OiBTLlJlZGFjdGVkKFMuU3RyaW5nLnBpcGUoUy5zdGFydHNXaXRoKFwic2tfXCIpKSksXG5cdGFwcElkOiBTLlN0cmluZyxcblx0cmVnaW9uczogUy5Ob25FbXB0eUFycmF5KFMuU3RyaW5nKSxcblx0aW5nZXN0SG9zdDogUy5TdHJpbmcucGlwZShTLm9wdGlvbmFsV2l0aCh7IGRlZmF1bHQ6ICgpID0+IFwiaW5nZXN0LnVwbG9hZHRoaW5nLmNvbVwiIH0pKVxufSk7XG5jb25zdCBVcGxvYWRUaGluZ1Rva2VuID0gUy5VaW50OEFycmF5RnJvbUJhc2U2NC5waXBlKFMuY29tcG9zZShEZWNvZGVTdHJpbmcpLCBTLmNvbXBvc2UoUy5wYXJzZUpzb24oUGFyc2VkVG9rZW4pKSk7XG4vKipcbiogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiogPT09PT09PT09PT09PT09PT09PT09PT09IEZpbGUgVHlwZSBIaWVyYXJjaHkgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKi9cbi8qKlxuKiBQcm9wZXJ0aWVzIGZyb20gdGhlIHdlYiBGaWxlIG9iamVjdCwgdGhpcyBpcyB3aGF0IHRoZSBjbGllbnQgc2VuZHMgd2hlbiBpbml0aWF0aW5nIGFuIHVwbG9hZFxuKi9cbnZhciBGaWxlVXBsb2FkRGF0YSA9IGNsYXNzIGV4dGVuZHMgUy5DbGFzcyhcIkZpbGVVcGxvYWREYXRhXCIpKHtcblx0bmFtZTogUy5TdHJpbmcsXG5cdHNpemU6IFMuTnVtYmVyLFxuXHR0eXBlOiBTLlN0cmluZyxcblx0bGFzdE1vZGlmaWVkOiBTLk51bWJlci5waXBlKFMub3B0aW9uYWwpXG59KSB7fTtcbi8qKlxuKiBgLm1pZGRsZXdhcmUoKWAgY2FuIGFkZCBhIGN1c3RvbUlkIHRvIHRoZSBpbmNvbWluZyBmaWxlIGRhdGFcbiovXG52YXIgRmlsZVVwbG9hZERhdGFXaXRoQ3VzdG9tSWQgPSBjbGFzcyBleHRlbmRzIEZpbGVVcGxvYWREYXRhLmV4dGVuZChcIkZpbGVVcGxvYWREYXRhV2l0aEN1c3RvbUlkXCIpKHsgY3VzdG9tSWQ6IFMuTnVsbE9yKFMuU3RyaW5nKSB9KSB7fTtcbi8qKlxuKiBXaGVuIGZpbGVzIGFyZSB1cGxvYWRlZCwgd2UgZ2V0IGJhY2tcbiogLSBhIGtleVxuKiAtIFVSTHMgZm9yIHRoZSBmaWxlXG4qIC0gdGhlIGhhc2ggKG1kNS1oZXgpIG9mIHRoZSB1cGxvYWRlZCBmaWxlJ3MgY29udGVudHNcbiovXG52YXIgVXBsb2FkZWRGaWxlRGF0YSA9IGNsYXNzIGV4dGVuZHMgRmlsZVVwbG9hZERhdGFXaXRoQ3VzdG9tSWQuZXh0ZW5kKFwiVXBsb2FkZWRGaWxlRGF0YVwiKSh7XG5cdGtleTogUy5TdHJpbmcsXG5cdHVybDogUy5TdHJpbmcsXG5cdGFwcFVybDogUy5TdHJpbmcsXG5cdHVmc1VybDogUy5TdHJpbmcsXG5cdGZpbGVIYXNoOiBTLlN0cmluZ1xufSkge307XG52YXIgTWV0YWRhdGFGZXRjaFN0cmVhbVBhcnQgPSBjbGFzcyBleHRlbmRzIFMuQ2xhc3MoXCJNZXRhZGF0YUZldGNoU3RyZWFtUGFydFwiKSh7XG5cdHBheWxvYWQ6IFMuU3RyaW5nLFxuXHRzaWduYXR1cmU6IFMuU3RyaW5nLFxuXHRob29rOiBVcGxvYWRUaGluZ0hvb2tcbn0pIHt9O1xudmFyIE1ldGFkYXRhRmV0Y2hSZXNwb25zZSA9IGNsYXNzIGV4dGVuZHMgUy5DbGFzcyhcIk1ldGFkYXRhRmV0Y2hSZXNwb25zZVwiKSh7IG9rOiBTLkJvb2xlYW4gfSkge307XG52YXIgQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSA9IGNsYXNzIGV4dGVuZHMgUy5DbGFzcyhcIkNhbGxiYWNrUmVzdWx0UmVzcG9uc2VcIikoeyBvazogUy5Cb29sZWFuIH0pIHt9O1xuLyoqXG4qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qID09PT09PT09PT09PT09PT09PT09PT09PSBDbGllbnQgQWN0aW9uIFBheWxvYWRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiovXG52YXIgVXBsb2FkQWN0aW9uUGF5bG9hZCA9IGNsYXNzIGV4dGVuZHMgUy5DbGFzcyhcIlVwbG9hZEFjdGlvblBheWxvYWRcIikoe1xuXHRmaWxlczogUy5BcnJheShGaWxlVXBsb2FkRGF0YSksXG5cdGlucHV0OiBTLlVua25vd25cbn0pIHt9O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFjdGlvblR5cGUsIENhbGxiYWNrUmVzdWx0UmVzcG9uc2UsIE1ldGFkYXRhRmV0Y2hSZXNwb25zZSwgTWV0YWRhdGFGZXRjaFN0cmVhbVBhcnQsIFVwbG9hZEFjdGlvblBheWxvYWQsIFVwbG9hZFRoaW5nSG9vaywgVXBsb2FkVGhpbmdUb2tlbiwgVXBsb2FkZWRGaWxlRGF0YSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhcmVkLXNjaGVtYXMtQm1HNUFSb1guanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/shared-schemas-BmG5ARoX.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/upload-builder-BlFOAnsv.js":
/*!******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/upload-builder-BlFOAnsv.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdapterArguments: () => (/* binding */ AdapterArguments),\n/* harmony export */   ApiUrl: () => (/* binding */ ApiUrl),\n/* harmony export */   IngestUrl: () => (/* binding */ IngestUrl),\n/* harmony export */   UTFiles: () => (/* binding */ UTFiles),\n/* harmony export */   UTRegion: () => (/* binding */ UTRegion),\n/* harmony export */   UTToken: () => (/* binding */ UTToken),\n/* harmony export */   UfsAppIdLocation: () => (/* binding */ UfsAppIdLocation),\n/* harmony export */   UfsHost: () => (/* binding */ UfsHost),\n/* harmony export */   configProvider: () => (/* binding */ configProvider),\n/* harmony export */   createBuilder: () => (/* binding */ createBuilder),\n/* harmony export */   createRequestHandler: () => (/* binding */ createRequestHandler),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig),\n/* harmony export */   logHttpClientError: () => (/* binding */ logHttpClientError),\n/* harmony export */   logHttpClientResponse: () => (/* binding */ logHttpClientResponse),\n/* harmony export */   makeAdapterHandler: () => (/* binding */ makeAdapterHandler),\n/* harmony export */   makeRuntime: () => (/* binding */ makeRuntime)\n/* harmony export */ });\n/* harmony import */ var _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./package-DpScpvTA.js */ \"(rsc)/./node_modules/uploadthing/dist/package-DpScpvTA.js\");\n/* harmony import */ var _deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./deprecations-pLmw6Ytd.js */ \"(rsc)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js\");\n/* harmony import */ var _shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shared-schemas-BmG5ARoX.js */ \"(rsc)/./node_modules/uploadthing/dist/shared-schemas-BmG5ARoX.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _effect_platform_HttpApp__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @effect/platform/HttpApp */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpApp.js\");\n/* harmony import */ var _effect_platform_HttpBody__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @effect/platform/HttpBody */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpBody.js\");\n/* harmony import */ var _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @effect/platform/HttpClient */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @effect/platform/HttpClientRequest */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var _effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @effect/platform/HttpClientResponse */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpIncomingMessage.js\");\n/* harmony import */ var _effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @effect/platform/HttpClientResponse */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientResponse.js\");\n/* harmony import */ var _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @effect/platform/HttpRouter */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpRouter.js\");\n/* harmony import */ var _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @effect/platform/HttpServerRequest */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpServerRequest.js\");\n/* harmony import */ var _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @effect/platform/HttpServerResponse */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpServerResponse.js\");\n/* harmony import */ var effect_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Config */ \"(rsc)/./node_modules/effect/dist/esm/Config.js\");\n/* harmony import */ var effect_Context__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! effect/Context */ \"(rsc)/./node_modules/effect/dist/esm/Context.js\");\n/* harmony import */ var effect_Match__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! effect/Match */ \"(rsc)/./node_modules/effect/dist/esm/Match.js\");\n/* harmony import */ var effect_Redacted__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! effect/Redacted */ \"(rsc)/./node_modules/effect/dist/esm/Redacted.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/ConfigProvider */ \"(rsc)/./node_modules/effect/dist/esm/ConfigProvider.js\");\n/* harmony import */ var effect_Stream__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! effect/Stream */ \"(rsc)/./node_modules/effect/dist/esm/Stream.js\");\n/* harmony import */ var effect_ConfigError__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! effect/ConfigError */ \"(rsc)/./node_modules/effect/dist/esm/ConfigError.js\");\n/* harmony import */ var effect_Either__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! effect/Either */ \"(rsc)/./node_modules/effect/dist/esm/Either.js\");\n/* harmony import */ var effect_Layer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! effect/Layer */ \"(rsc)/./node_modules/effect/dist/esm/Layer.js\");\n/* harmony import */ var effect_Logger__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! effect/Logger */ \"(rsc)/./node_modules/effect/dist/esm/Logger.js\");\n/* harmony import */ var effect_LogLevel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! effect/LogLevel */ \"(rsc)/./node_modules/effect/dist/esm/LogLevel.js\");\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! effect/Cause */ \"(rsc)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var effect_Data__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! effect/Data */ \"(rsc)/./node_modules/effect/dist/esm/Data.js\");\n/* harmony import */ var effect_Runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! effect/Runtime */ \"(rsc)/./node_modules/effect/dist/esm/Runtime.js\");\n/* harmony import */ var _effect_platform_FetchHttpClient__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @effect/platform/FetchHttpClient */ \"(rsc)/./node_modules/@effect/platform/dist/esm/FetchHttpClient.js\");\n/* harmony import */ var _effect_platform_Headers__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @effect/platform/Headers */ \"(rsc)/./node_modules/@effect/platform/dist/esm/Headers.js\");\n/* harmony import */ var effect_FiberRef__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! effect/FiberRef */ \"(rsc)/./node_modules/effect/dist/esm/FiberRef.js\");\n/* harmony import */ var effect_ManagedRuntime__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! effect/ManagedRuntime */ \"(rsc)/./node_modules/effect/dist/esm/ManagedRuntime.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/_internal/config.ts\n/**\n* Merge in `import.meta.env` to the built-in `process.env` provider\n* Prefix keys with `UPLOADTHING_` so we can reference just the name.\n* @example\n* process.env.UPLOADTHING_TOKEN = \"foo\"\n* Config.string(\"token\"); // Config<\"foo\">\n*/\nconst envProvider = effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromEnv().pipe(effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.orElse(() => effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromMap(new Map(Object.entries((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.filterDefinedObjectValues)( null ?? {}))), { pathDelim: \"_\" })), effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.nested(\"uploadthing\"), effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.constantCase);\n/**\n* Config provider that merges the options from the object\n* and environment variables prefixed with `UPLOADTHING_`.\n* @remarks Options take precedence over environment variables.\n*/\nconst configProvider = (options) => effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromJson(options ?? {}).pipe(effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.orElse(() => envProvider));\nconst IsDevelopment = effect_Config__WEBPACK_IMPORTED_MODULE_2__.boolean(\"isDev\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.orElse(() => effect_Config__WEBPACK_IMPORTED_MODULE_2__.succeed(typeof process !== \"undefined\" ? \"development\" : void 0).pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((_) => _ === \"development\"))), effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(false));\nconst UTToken = effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Config(\"token\", _shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.UploadThingToken).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTags({ ConfigError: (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\tcode: e._op === \"InvalidData\" ? \"INVALID_SERVER_CONFIG\" : \"MISSING_ENV\",\n\tmessage: e._op === \"InvalidData\" ? \"Invalid token. A token is a base64 encoded JSON object matching { apiKey: string, appId: string, regions: string[] }.\" : \"Missing token. Please set the `UPLOADTHING_TOKEN` environment variable or provide a token manually through config.\",\n\tcause: e\n}) }));\nconst ApiUrl = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"apiUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"https://api.uploadthing.com\"), effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapAttempt((_) => new URL(_)), effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((url) => url.href.replace(/\\/$/, \"\")));\nconst IngestUrl = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fn(function* (preferredRegion) {\n\tconst { regions, ingestHost } = yield* UTToken;\n\tconst region = preferredRegion ? regions.find((r) => r === preferredRegion) ?? regions[0] : regions[0];\n\treturn yield* effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"ingestUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(`https://${region}.${ingestHost}`), effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapAttempt((_) => new URL(_)), effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((url) => url.href.replace(/\\/$/, \"\")));\n});\nconst UtfsHost = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"utfsHost\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"utfs.io\"));\nconst UfsHost = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"ufsHost\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"ufs.sh\"));\nconst UfsAppIdLocation = effect_Config__WEBPACK_IMPORTED_MODULE_2__.literal(\"subdomain\", \"path\")(\"ufsAppIdLocation\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"subdomain\"));\n\n//#endregion\n//#region src/_internal/error-formatter.ts\nfunction defaultErrorFormatter(error) {\n\treturn { message: error.message };\n}\nfunction formatError(error, router) {\n\tconst firstSlug = Object.keys(router)[0];\n\tconst errorFormatter = firstSlug ? router[firstSlug]?.errorFormatter ?? defaultErrorFormatter : defaultErrorFormatter;\n\treturn errorFormatter(error);\n}\n\n//#endregion\n//#region src/_internal/jsonl.ts\nconst handleJsonLineStream = (schema, onChunk) => (stream) => {\n\tlet buf = \"\";\n\treturn stream.pipe(effect_Stream__WEBPACK_IMPORTED_MODULE_6__.decodeText(), effect_Stream__WEBPACK_IMPORTED_MODULE_6__.mapEffect((chunk) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tbuf += chunk;\n\t\tconst parts = buf.split(\"\\n\");\n\t\tconst validChunks = [];\n\t\tfor (const part of parts) try {\n\t\t\tvalidChunks.push(JSON.parse(part));\n\t\t\tbuf = buf.slice(part.length + 1);\n\t\t} catch {}\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Received chunks\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"chunk\", chunk), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"parsedChunks\", validChunks), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"buf\", buf));\n\t\treturn validChunks;\n\t})), effect_Stream__WEBPACK_IMPORTED_MODULE_6__.mapEffect(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Array(schema))), effect_Stream__WEBPACK_IMPORTED_MODULE_6__.mapEffect(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach((part) => onChunk(part))), effect_Stream__WEBPACK_IMPORTED_MODULE_6__.runDrain, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"handleJsonLineStream\"));\n};\n\n//#endregion\n//#region src/_internal/logger.ts\n/**\n* Config.logLevel counter-intuitively accepts LogLevel[\"label\"]\n* instead of a literal, ripping it and changing to accept literal\n* Effect 4.0 will change this to accept a literal and then we can\n* remove this and go back to the built-in validator.\n*/\nconst ConfigLogLevel = (name) => {\n\tconst config = effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapOrFail(effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(), (literal) => {\n\t\tconst level = effect_LogLevel__WEBPACK_IMPORTED_MODULE_7__.allLevels.find((level$1) => level$1._tag === literal);\n\t\treturn level === void 0 ? effect_Either__WEBPACK_IMPORTED_MODULE_8__.left(effect_ConfigError__WEBPACK_IMPORTED_MODULE_9__.InvalidData([], `Expected a log level but received ${literal}`)) : effect_Either__WEBPACK_IMPORTED_MODULE_8__.right(level);\n\t});\n\treturn name === void 0 ? config : effect_Config__WEBPACK_IMPORTED_MODULE_2__.nested(config, name);\n};\nconst withMinimalLogLevel = ConfigLogLevel(\"logLevel\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(effect_LogLevel__WEBPACK_IMPORTED_MODULE_7__.Info), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.andThen((level) => effect_Logger__WEBPACK_IMPORTED_MODULE_10__.minimumLogLevel(level)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapError((e) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Invalid log level\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"error\", e))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ConfigError\", (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\tcode: \"INVALID_SERVER_CONFIG\",\n\tmessage: \"Invalid server configuration\",\n\tcause: e\n})), effect_Layer__WEBPACK_IMPORTED_MODULE_11__.unwrapEffect);\nconst LogFormat = effect_Config__WEBPACK_IMPORTED_MODULE_2__.literal(\"json\", \"logFmt\", \"structured\", \"pretty\")(\"logFormat\");\nconst withLogFormat = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst isDev = yield* IsDevelopment;\n\tconst logFormat = yield* LogFormat.pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(isDev ? \"pretty\" : \"json\"));\n\treturn effect_Logger__WEBPACK_IMPORTED_MODULE_10__[logFormat];\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ConfigError\", (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\tcode: \"INVALID_SERVER_CONFIG\",\n\tmessage: \"Invalid server configuration\",\n\tcause: e\n})), effect_Layer__WEBPACK_IMPORTED_MODULE_11__.unwrapEffect);\nconst logHttpClientResponse = (message, opts) => {\n\tconst mixin = opts?.mixin ?? \"json\";\n\tconst level = effect_LogLevel__WEBPACK_IMPORTED_MODULE_7__.fromLiteral(opts?.level ?? \"Debug\");\n\treturn (response) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(mixin !== \"None\" ? response[mixin] : effect_Effect__WEBPACK_IMPORTED_MODULE_5__[\"void\"], () => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logWithLevel(level, `${message} (${response.status})`).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"response\", response)));\n};\nconst logHttpClientError = (message) => (err) => err._tag === \"ResponseError\" ? logHttpClientResponse(message, { level: \"Error\" })(err.response) : effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(message).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"error\", err));\n\n//#endregion\n//#region src/_internal/parser.ts\nvar ParserError = class extends effect_Data__WEBPACK_IMPORTED_MODULE_12__.TaggedError(\"ParserError\") {\n\tmessage = \"Input validation failed. The original error with it's validation issues is in the error cause.\";\n};\nfunction getParseFn(parser) {\n\tif (\"parseAsync\" in parser && typeof parser.parseAsync === \"function\")\n /**\n\t* Zod\n\t* TODO (next major): Consider wrapping ZodError in ParserError\n\t*/\n\treturn parser.parseAsync;\n\tif (effect_Schema__WEBPACK_IMPORTED_MODULE_3__.isSchema(parser))\n /**\n\t* Effect Schema\n\t*/\n\treturn (value) => effect_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknownPromise(parser)(value).catch((error) => {\n\t\tthrow new ParserError({ cause: effect_Cause__WEBPACK_IMPORTED_MODULE_13__.squash(error[effect_Runtime__WEBPACK_IMPORTED_MODULE_14__.FiberFailureCauseId]) });\n\t});\n\tif (\"~standard\" in parser)\n /**\n\t* Standard Schema\n\t* TODO (next major): Consider moving this to the top of the function\n\t*/\n\treturn async (value) => {\n\t\tconst result = await parser[\"~standard\"].validate(value);\n\t\tif (result.issues) throw new ParserError({ cause: result.issues });\n\t\treturn result.value;\n\t};\n\tthrow new Error(\"Invalid parser\");\n}\n\n//#endregion\n//#region src/_internal/route-config.ts\nvar FileSizeMismatch = class extends effect_Data__WEBPACK_IMPORTED_MODULE_12__.Error {\n\t_tag = \"FileSizeMismatch\";\n\tname = \"FileSizeMismatchError\";\n\tconstructor(type, max, actual) {\n\t\tconst reason = `You uploaded a ${type} file that was ${(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.bytesToFileSize)(actual)}, but the limit for that type is ${max}`;\n\t\tsuper({ reason });\n\t}\n};\nvar FileCountMismatch = class extends effect_Data__WEBPACK_IMPORTED_MODULE_12__.Error {\n\t_tag = \"FileCountMismatch\";\n\tname = \"FileCountMismatchError\";\n\tconstructor(type, boundtype, bound, actual) {\n\t\tconst reason = `You uploaded ${actual} file(s) of type '${type}', but the ${boundtype} for that type is ${bound}`;\n\t\tsuper({ reason });\n\t}\n};\nconst assertFilesMeetConfig = (files, routeConfig) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst counts = {};\n\tfor (const file of files) {\n\t\tconst type = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(routeConfig));\n\t\tcounts[type] = (counts[type] ?? 0) + 1;\n\t\tconst sizeLimit = routeConfig[type]?.maxFileSize;\n\t\tif (!sizeLimit) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.InvalidRouteConfigError(type, \"maxFileSize\");\n\t\tconst sizeLimitBytes = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fileSizeToBytes)(sizeLimit);\n\t\tif (file.size > sizeLimitBytes) return yield* new FileSizeMismatch(type, sizeLimit, file.size);\n\t}\n\tfor (const _key in counts) {\n\t\tconst key = _key;\n\t\tconst config = routeConfig[key];\n\t\tif (!config) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.InvalidRouteConfigError(key);\n\t\tconst count = counts[key];\n\t\tconst min = config.minFileCount;\n\t\tconst max = config.maxFileCount;\n\t\tif (min > max) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid config during file count - minFileCount > maxFileCount\",\n\t\t\tcause: `minFileCount must be less than maxFileCount for key ${key}. got: ${min} > ${max}`\n\t\t});\n\t\tif (count != null && count < min) return yield* new FileCountMismatch(key, \"minimum\", min, count);\n\t\tif (count != null && count > max) return yield* new FileCountMismatch(key, \"maximum\", max, count);\n\t}\n\treturn null;\n});\nconst extractRouterConfig = (router) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(router), (slug) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fillInputRouteConfig)(router[slug].routerConfig), (config) => ({\n\tslug,\n\tconfig\n})));\n\n//#endregion\n//#region src/_internal/runtime.ts\nconst makeRuntime = (fetch, config) => {\n\tconst fetchHttpClient = effect_Layer__WEBPACK_IMPORTED_MODULE_11__.provideMerge(_effect_platform_FetchHttpClient__WEBPACK_IMPORTED_MODULE_15__.layer, effect_Layer__WEBPACK_IMPORTED_MODULE_11__.succeed(_effect_platform_FetchHttpClient__WEBPACK_IMPORTED_MODULE_15__.Fetch, fetch));\n\tconst withRedactedHeaders = effect_Layer__WEBPACK_IMPORTED_MODULE_11__.effectDiscard(effect_FiberRef__WEBPACK_IMPORTED_MODULE_16__.update(_effect_platform_Headers__WEBPACK_IMPORTED_MODULE_17__.currentRedactedNames, (_) => _.concat([\"x-uploadthing-api-key\"])));\n\tconst layer = effect_Layer__WEBPACK_IMPORTED_MODULE_11__.provide(effect_Layer__WEBPACK_IMPORTED_MODULE_11__.mergeAll(withLogFormat, withMinimalLogLevel, fetchHttpClient, withRedactedHeaders), effect_Layer__WEBPACK_IMPORTED_MODULE_11__.setConfigProvider(configProvider(config)));\n\treturn effect_ManagedRuntime__WEBPACK_IMPORTED_MODULE_18__.make(layer);\n};\n\n//#endregion\n//#region src/_internal/types.ts\n/**\n* Marker used to select the region based on the incoming request\n*/\nconst UTRegion = Symbol(\"uploadthing-region-symbol\");\n/**\n* Marker used to append a `customId` to the incoming file data in `.middleware()`\n* @example\n* ```ts\n* .middleware((opts) => {\n*   return {\n*     [UTFiles]: opts.files.map((file) => ({\n*       ...file,\n*       customId: generateId(),\n*     }))\n*   };\n* })\n* ```\n*/\nconst UTFiles = Symbol(\"uploadthing-custom-id-symbol\");\n\n//#endregion\n//#region src/_internal/handler.ts\nvar AdapterArguments = class extends effect_Context__WEBPACK_IMPORTED_MODULE_19__.Tag(\"uploadthing/AdapterArguments\")() {};\n/**\n* Create a request handler adapter for any framework or server library.\n* Refer to the existing adapters for examples on how to use this function.\n* @public\n*\n* @param makeAdapterArgs - Function that takes the args from your framework and returns an Effect that resolves to the adapter args.\n* These args are passed to the `.middleware`, `.onUploadComplete`, and `.onUploadError` hooks.\n* @param toRequest - Function that takes the args from your framework and returns an Effect that resolves to a web Request object.\n* @param opts - The router config and other options that are normally passed to `createRequestHandler` of official adapters\n* @param beAdapter - [Optional] The adapter name of the adapter, used for telemetry purposes\n* @returns A function that takes the args from your framework and returns a promise that resolves to a Response object.\n*/\nconst makeAdapterHandler = (makeAdapterArgs, toRequest, opts, beAdapter) => {\n\tconst managed = makeRuntime(opts.config?.fetch, opts.config);\n\tconst handle = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.promise(() => managed.runtime().then(_effect_platform_HttpApp__WEBPACK_IMPORTED_MODULE_20__.toWebHandlerRuntime));\n\tconst app = (...args) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.promise(() => managed.runPromise(createRequestHandler(opts, beAdapter ?? \"custom\"))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.provideServiceEffect(AdapterArguments, makeAdapterArgs(...args)));\n\treturn async (...args) => {\n\t\tconst result = await handle.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ap(app(...args)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ap(toRequest(...args)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"requestHandler\"), managed.runPromise);\n\t\treturn result;\n\t};\n};\nconst createRequestHandler = (opts, beAdapter) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst isDevelopment = yield* IsDevelopment;\n\tconst routerConfig = yield* extractRouterConfig(opts.router);\n\tconst handleDaemon = (() => {\n\t\tif (opts.config?.handleDaemonPromise) return opts.config.handleDaemonPromise;\n\t\treturn isDevelopment ? \"void\" : \"await\";\n\t})();\n\tif (isDevelopment && handleDaemon === \"await\") return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\tcode: \"INVALID_SERVER_CONFIG\",\n\t\tmessage: \"handleDaemonPromise: \\\"await\\\" is forbidden in development.\"\n\t});\n\tconst GET = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\treturn yield* _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.json(routerConfig);\n\t});\n\tconst POST = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tconst { \"uploadthing-hook\": uploadthingHook, \"x-uploadthing-package\": fePackage, \"x-uploadthing-version\": clientVersion } = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.schemaHeaders(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n\t\t\t\"uploadthing-hook\": _shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.UploadThingHook.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.optional),\n\t\t\t\"x-uploadthing-package\": effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.optionalWith({ default: () => \"unknown\" })),\n\t\t\t\"x-uploadthing-version\": effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.optionalWith({ default: () => _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version }))\n\t\t}));\n\t\tif (clientVersion !== _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version) {\n\t\t\tconst serverVersion = _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version;\n\t\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logWarning(\"Client version mismatch. Things may not work as expected, please sync your versions to ensure compatibility.\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs({\n\t\t\t\tclientVersion,\n\t\t\t\tserverVersion\n\t\t\t}));\n\t\t}\n\t\tconst { slug, actionType } = yield* _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.schemaParams(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n\t\t\tactionType: _shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.ActionType.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.optional),\n\t\t\tslug: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String\n\t\t}));\n\t\tconst uploadable = opts.router[slug];\n\t\tif (!uploadable) {\n\t\t\tconst msg = `No file route found for slug ${slug}`;\n\t\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(msg);\n\t\t\treturn yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\t\tcode: \"NOT_FOUND\",\n\t\t\t\tmessage: msg\n\t\t\t});\n\t\t}\n\t\tconst { body, fiber } = yield* effect_Match__WEBPACK_IMPORTED_MODULE_25__.value({\n\t\t\tactionType,\n\t\t\tuploadthingHook\n\t\t}).pipe(effect_Match__WEBPACK_IMPORTED_MODULE_25__.when({\n\t\t\tactionType: \"upload\",\n\t\t\tuploadthingHook: void 0\n\t\t}, () => handleUploadAction({\n\t\t\tuploadable,\n\t\t\tfePackage,\n\t\t\tbeAdapter,\n\t\t\tslug\n\t\t})), effect_Match__WEBPACK_IMPORTED_MODULE_25__.when({\n\t\t\tactionType: void 0,\n\t\t\tuploadthingHook: \"callback\"\n\t\t}, () => handleCallbackRequest({\n\t\t\tuploadable,\n\t\t\tfePackage,\n\t\t\tbeAdapter\n\t\t})), effect_Match__WEBPACK_IMPORTED_MODULE_25__.when({\n\t\t\tactionType: void 0,\n\t\t\tuploadthingHook: \"error\"\n\t\t}, () => handleErrorRequest({ uploadable })), effect_Match__WEBPACK_IMPORTED_MODULE_25__.orElse(() => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.succeed({\n\t\t\tbody: null,\n\t\t\tfiber: null\n\t\t})));\n\t\tif (fiber) {\n\t\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Running fiber as daemon\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"handleDaemon\", handleDaemon));\n\t\t\tif (handleDaemon === \"void\") {} else if (handleDaemon === \"await\") yield* fiber.await;\n\t\t\telse if (typeof handleDaemon === \"function\") handleDaemon(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.runPromise(fiber.await));\n\t\t}\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Sending response\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"body\", body));\n\t\treturn yield* _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.json(body);\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTags({\n\t\tParseError: (e) => _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.json(formatError(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid input\",\n\t\t\tcause: e.message\n\t\t}), opts.router), { status: 400 }),\n\t\tUploadThingError: (e) => _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.json(formatError(e, opts.router), { status: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.getStatusCodeFromError)(e) })\n\t}));\n\tconst appendResponseHeaders = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map(_effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.setHeader(\"x-uploadthing-version\", _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version));\n\treturn _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.empty.pipe(_effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.get(\"*\", GET), _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.post(\"*\", POST), _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.use(appendResponseHeaders));\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"createRequestHandler\"));\nconst handleErrorRequest = (opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst { uploadable } = opts;\n\tconst request = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.HttpServerRequest;\n\tconst { apiKey } = yield* UTToken;\n\tconst verified = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.verifySignature)(yield* request.text, request.headers[\"x-uploadthing-signature\"] ?? null, apiKey);\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(`Signature verified: ${verified}`);\n\tif (!verified) {\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Invalid signature\");\n\t\treturn yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid signature\"\n\t\t});\n\t}\n\tconst requestInput = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.schemaBodyJson(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n\t\tfileKey: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n\t\terror: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String\n\t}));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Handling error callback request with input:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"json\", requestInput));\n\tconst adapterArgs = yield* AdapterArguments;\n\tconst fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tryPromise({\n\t\ttry: async () => uploadable.onUploadError({\n\t\t\t...adapterArgs,\n\t\t\terror: new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\t\tcode: \"UPLOAD_FAILED\",\n\t\t\t\tmessage: `Upload failed for ${requestInput.fileKey}: ${requestInput.error}`\n\t\t\t}),\n\t\t\tfileKey: requestInput.fileKey\n\t\t}),\n\t\tcatch: (error) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\t\tmessage: \"Failed to run onUploadError\",\n\t\t\tcause: error\n\t\t})\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapError((error) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Failed to run onUploadError. You probably shouldn't be throwing errors here.\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"error\", error)))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forkDaemon);\n\treturn {\n\t\tbody: null,\n\t\tfiber\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"handleErrorRequest\"));\nconst handleCallbackRequest = (opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst { uploadable, fePackage, beAdapter } = opts;\n\tconst request = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.HttpServerRequest;\n\tconst { apiKey } = yield* UTToken;\n\tconst verified = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.verifySignature)(yield* request.text, request.headers[\"x-uploadthing-signature\"] ?? null, apiKey);\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(`Signature verified: ${verified}`);\n\tif (!verified) {\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Invalid signature\");\n\t\treturn yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid signature\"\n\t\t});\n\t}\n\tconst requestInput = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.schemaBodyJson(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n\t\tstatus: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n\t\tfile: _shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.UploadedFileData,\n\t\torigin: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n\t\tmetadata: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Record({\n\t\t\tkey: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n\t\t\tvalue: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Unknown\n\t\t})\n\t}));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Handling callback request with input:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"json\", requestInput));\n\t/**\n\t* Run `.onUploadComplete` as a daemon to prevent the\n\t* request from UT to potentially timeout.\n\t*/\n\tconst fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tconst adapterArgs = yield* AdapterArguments;\n\t\tconst serverData = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tryPromise({\n\t\t\ttry: async () => uploadable.onUploadComplete({\n\t\t\t\t...adapterArgs,\n\t\t\t\tfile: {\n\t\t\t\t\t...requestInput.file,\n\t\t\t\t\tget url() {\n\t\t\t\t\t\t(0,_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_26__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\t\t\t\t\treturn requestInput.file.url;\n\t\t\t\t\t},\n\t\t\t\t\tget appUrl() {\n\t\t\t\t\t\t(0,_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_26__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\t\t\t\t\treturn requestInput.file.appUrl;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmetadata: requestInput.metadata\n\t\t\t}),\n\t\t\tcatch: (error) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\t\t\tmessage: \"Failed to run onUploadComplete. You probably shouldn't be throwing errors here.\",\n\t\t\t\tcause: error\n\t\t\t})\n\t\t});\n\t\tconst payload = {\n\t\t\tfileKey: requestInput.file.key,\n\t\t\tcallbackData: serverData ?? null\n\t\t};\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"'onUploadComplete' callback finished. Sending response to UploadThing:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"callbackData\", payload));\n\t\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__.filterStatusOk);\n\t\tyield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.post(`/callback-result`).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.prependUrl(requestInput.origin), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setHeaders({\n\t\t\t\"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_29__.value(apiKey),\n\t\t\t\"x-uploadthing-version\": _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version,\n\t\t\t\"x-uploadthing-be-adapter\": beAdapter,\n\t\t\t\"x-uploadthing-fe-package\": fePackage\n\t\t}), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.bodyJson(payload), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(httpClient.execute), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapError(logHttpClientError(\"Failed to register callback result\")), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(_effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_30__.schemaBodyJson(_shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.CallbackResultResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tap(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.log(\"Sent callback result to UploadThing\")), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped);\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forkDaemon);\n\treturn {\n\t\tbody: null,\n\t\tfiber\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"handleCallbackRequest\"));\nconst runRouteMiddleware = (opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst { json: { files, input }, uploadable } = opts;\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Running middleware\");\n\tconst adapterArgs = yield* AdapterArguments;\n\tconst metadata = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tryPromise({\n\t\ttry: async () => uploadable.middleware({\n\t\t\t...adapterArgs,\n\t\t\tinput,\n\t\t\tfiles\n\t\t}),\n\t\tcatch: (error) => error instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError ? error : new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\t\tmessage: \"Failed to run middleware\",\n\t\t\tcause: error\n\t\t})\n\t});\n\tif (metadata[UTFiles] && metadata[UTFiles].length !== files.length) {\n\t\tconst msg = `Expected files override to have the same length as original files, got ${metadata[UTFiles].length} but expected ${files.length}`;\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(msg);\n\t\treturn yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Files override must have the same length as files\",\n\t\t\tcause: msg\n\t\t});\n\t}\n\tconst filesWithCustomIds = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(files, (file, idx) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tconst theirs = metadata[UTFiles]?.[idx];\n\t\tif (theirs && theirs.size !== file.size) yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logWarning(\"File size mismatch. Reverting to original size\");\n\t\treturn {\n\t\t\tname: theirs?.name ?? file.name,\n\t\t\tsize: file.size,\n\t\t\ttype: file.type,\n\t\t\tcustomId: theirs?.customId,\n\t\t\tlastModified: theirs?.lastModified ?? Date.now()\n\t\t};\n\t}));\n\treturn {\n\t\tmetadata,\n\t\tfilesWithCustomIds,\n\t\tpreferredRegion: metadata[UTRegion]\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"runRouteMiddleware\"));\nconst handleUploadAction = (opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__.filterStatusOk);\n\tconst { uploadable, fePackage, beAdapter, slug } = opts;\n\tconst json = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.schemaBodyJson(_shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.UploadActionPayload);\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Handling upload request\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"json\", json));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Parsing user input\");\n\tconst parsedInput = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tryPromise({\n\t\ttry: () => getParseFn(uploadable.inputParser)(json.input),\n\t\tcatch: (error) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid input\",\n\t\t\tcause: error\n\t\t})\n\t});\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Input parsed successfully\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"input\", parsedInput));\n\tconst { metadata, filesWithCustomIds, preferredRegion } = yield* runRouteMiddleware({\n\t\tjson: {\n\t\t\tinput: parsedInput,\n\t\t\tfiles: json.files\n\t\t},\n\t\tuploadable\n\t});\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Parsing route config\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"routerConfig\", uploadable.routerConfig));\n\tconst parsedConfig = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fillInputRouteConfig)(uploadable.routerConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"InvalidRouteConfig\", (err) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\tcode: \"BAD_REQUEST\",\n\t\tmessage: \"Invalid route config\",\n\t\tcause: err\n\t})));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Route config parsed successfully\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"routeConfig\", parsedConfig));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Validating files meet the config requirements\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"files\", json.files));\n\tyield* assertFilesMeetConfig(json.files, parsedConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.mapError((e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\tcode: \"BAD_REQUEST\",\n\t\tmessage: `Invalid config: ${e._tag}`,\n\t\tcause: \"reason\" in e ? e.reason : e.message\n\t})));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Files validated.\");\n\tconst fileUploadRequests = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(filesWithCustomIds, (file) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(parsedConfig)), (type) => ({\n\t\tname: file.name,\n\t\tsize: file.size,\n\t\ttype: file.type || type,\n\t\tlastModified: file.lastModified,\n\t\tcustomId: file.customId,\n\t\tcontentDisposition: parsedConfig[type]?.contentDisposition ?? \"inline\",\n\t\tacl: parsedConfig[type]?.acl\n\t}))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTags({\n\t\tInvalidFileType: (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.die(e),\n\t\tUnknownFileType: (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.die(e)\n\t}));\n\tconst routeOptions = uploadable.routeOptions;\n\tconst { apiKey, appId } = yield* UTToken;\n\tconst ingestUrl = yield* IngestUrl(preferredRegion);\n\tconst isDev = yield* IsDevelopment;\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Generating presigned URLs\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"fileUploadRequests\", fileUploadRequests), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"ingestUrl\", ingestUrl));\n\tconst presignedUrls = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(fileUploadRequests, (file) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tconst key = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.generateKey)(file, appId, routeOptions.getFileHashParts);\n\t\tconst url = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.generateSignedURL)(`${ingestUrl}/${key}`, apiKey, {\n\t\t\tttlInSeconds: routeOptions.presignedURLTTL,\n\t\t\tdata: {\n\t\t\t\t\"x-ut-identifier\": appId,\n\t\t\t\t\"x-ut-file-name\": file.name,\n\t\t\t\t\"x-ut-file-size\": file.size,\n\t\t\t\t\"x-ut-file-type\": file.type,\n\t\t\t\t\"x-ut-slug\": slug,\n\t\t\t\t\"x-ut-custom-id\": file.customId,\n\t\t\t\t\"x-ut-content-disposition\": file.contentDisposition,\n\t\t\t\t\"x-ut-acl\": file.acl\n\t\t\t}\n\t\t});\n\t\treturn {\n\t\t\turl,\n\t\t\tkey\n\t\t};\n\t}), { concurrency: \"unbounded\" });\n\tconst serverReq = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.HttpServerRequest;\n\tconst requestUrl = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.toURL(serverReq);\n\tconst devHookRequest = yield* effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"callbackUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(requestUrl.origin + requestUrl.pathname), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((url) => _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.post(url).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.appendUrlParam(\"slug\", slug))));\n\tconst metadataRequest = _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.post(\"/route-metadata\").pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.prependUrl(ingestUrl), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setHeaders({\n\t\t\"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_29__.value(apiKey),\n\t\t\"x-uploadthing-version\": _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version,\n\t\t\"x-uploadthing-be-adapter\": beAdapter,\n\t\t\"x-uploadthing-fe-package\": fePackage\n\t}), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.bodyJson({\n\t\tfileKeys: presignedUrls.map(({ key }) => key),\n\t\tmetadata,\n\t\tisDev,\n\t\tcallbackUrl: devHookRequest.url,\n\t\tcallbackSlug: slug,\n\t\tawaitServerData: routeOptions.awaitServerData ?? true\n\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(httpClient.execute));\n\tconst handleDevStreamError = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fn(\"handleDevStreamError\")(function* (err, chunk) {\n\t\tconst schema = effect_Schema__WEBPACK_IMPORTED_MODULE_3__.parseJson(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({ file: _shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.UploadedFileData }));\n\t\tconst parsedChunk = yield* effect_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(schema)(chunk);\n\t\tconst key = parsedChunk.file.key;\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Failed to forward callback request from dev stream\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs({\n\t\t\tfileKey: key,\n\t\t\terror: err.message\n\t\t}));\n\t\tconst httpResponse = yield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.post(\"/callback-result\").pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.prependUrl(ingestUrl), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setHeaders({\n\t\t\t\"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_29__.value(apiKey),\n\t\t\t\"x-uploadthing-version\": _package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_23__.version,\n\t\t\t\"x-uploadthing-be-adapter\": beAdapter,\n\t\t\t\"x-uploadthing-fe-package\": fePackage\n\t\t}), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.bodyJson({\n\t\t\tfileKey: key,\n\t\t\terror: `Failed to forward callback request from dev stream: ${err.message}`\n\t\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(httpClient.execute));\n\t\tyield* logHttpClientResponse(\"Reported callback error to UploadThing\")(httpResponse);\n\t});\n\tconst fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__[\"if\"](isDev, {\n\t\tonTrue: () => metadataRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapBoth({\n\t\t\tonSuccess: logHttpClientResponse(\"Registered metadata\", { mixin: \"None\" }),\n\t\t\tonFailure: logHttpClientError(\"Failed to register metadata\")\n\t\t}), _effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_31__.stream, handleJsonLineStream(_shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.MetadataFetchStreamPart, (chunk) => devHookRequest.pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setHeaders({\n\t\t\t\"uploadthing-hook\": chunk.hook,\n\t\t\t\"x-uploadthing-signature\": chunk.signature\n\t\t}), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setBody(_effect_platform_HttpBody__WEBPACK_IMPORTED_MODULE_32__.text(chunk.payload, \"application/json\")), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tap(logHttpClientResponse(\"Successfully forwarded callback request from dev stream\")), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ResponseError\", (err) => handleDevStreamError(err, chunk.payload)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(chunk), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.asVoid, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped))),\n\t\tonFalse: () => metadataRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapBoth({\n\t\t\tonSuccess: logHttpClientResponse(\"Registered metadata\"),\n\t\t\tonFailure: logHttpClientError(\"Failed to register metadata\")\n\t\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(_effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_30__.schemaBodyJson(_shared_schemas_BmG5ARoX_js__WEBPACK_IMPORTED_MODULE_4__.MetadataFetchResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped)\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forkDaemon);\n\tconst presigneds = presignedUrls.map((p, i) => ({\n\t\turl: p.url,\n\t\tkey: p.key,\n\t\tname: fileUploadRequests[i].name,\n\t\tcustomId: fileUploadRequests[i].customId ?? null\n\t}));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logInfo(\"Sending presigned URLs to client\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"presignedUrls\", presigneds));\n\treturn {\n\t\tbody: presigneds,\n\t\tfiber\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"handleUploadAction\"));\n\n//#endregion\n//#region src/_internal/upload-builder.ts\nfunction internalCreateBuilder(initDef = {}) {\n\tconst _def = {\n\t\t$types: {},\n\t\trouterConfig: { image: { maxFileSize: \"4MB\" } },\n\t\trouteOptions: { awaitServerData: true },\n\t\tinputParser: {\n\t\t\tparseAsync: () => Promise.resolve(void 0),\n\t\t\t_input: void 0,\n\t\t\t_output: void 0\n\t\t},\n\t\tmiddleware: () => ({}),\n\t\tonUploadError: () => {},\n\t\tonUploadComplete: () => void 0,\n\t\terrorFormatter: initDef.errorFormatter ?? defaultErrorFormatter,\n\t\t...initDef\n\t};\n\treturn {\n\t\tinput(userParser) {\n\t\t\treturn internalCreateBuilder({\n\t\t\t\t..._def,\n\t\t\t\tinputParser: userParser\n\t\t\t});\n\t\t},\n\t\tmiddleware(userMiddleware) {\n\t\t\treturn internalCreateBuilder({\n\t\t\t\t..._def,\n\t\t\t\tmiddleware: userMiddleware\n\t\t\t});\n\t\t},\n\t\tonUploadComplete(userUploadComplete) {\n\t\t\treturn {\n\t\t\t\t..._def,\n\t\t\t\tonUploadComplete: userUploadComplete\n\t\t\t};\n\t\t},\n\t\tonUploadError(userOnUploadError) {\n\t\t\treturn internalCreateBuilder({\n\t\t\t\t..._def,\n\t\t\t\tonUploadError: userOnUploadError\n\t\t\t});\n\t\t}\n\t};\n}\n/**\n* Create a builder for your backend adapter.\n* Refer to the existing adapters for examples on how to use this function.\n* @public\n*\n* @param opts - Options for the builder\n* @returns A file route builder for making UploadThing file routes\n*/\nfunction createBuilder(opts) {\n\treturn (input, config) => {\n\t\treturn internalCreateBuilder({\n\t\t\trouterConfig: input,\n\t\t\trouteOptions: config ?? {},\n\t\t\t...opts\n\t\t});\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=upload-builder-BlFOAnsv.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC91cGxvYWQtYnVpbGRlci1CbEZPQW5zdi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWdEO0FBQ21CO0FBQ3lJO0FBQzJEO0FBQy9OO0FBQ1k7QUFDRTtBQUNJO0FBQ2M7QUFDRTtBQUNoQjtBQUNjO0FBQ0U7QUFDbEM7QUFDRTtBQUNKO0FBQ007QUFDVDtBQUNxQjtBQUNoQjtBQUNVO0FBQ1I7QUFDSjtBQUNFO0FBQ0k7QUFDTjtBQUNGO0FBQ007QUFDMEI7QUFDaEI7QUFDUjtBQUNZOztBQUV4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQSxvQkFBb0IsMERBQXNCLFFBQVEseURBQXFCLE9BQU8sMERBQXNCLHdCQUF3Qiw4RUFBeUIsQ0FBQyxLQUFnQixNQUFNLE9BQU8sZ0JBQWdCLElBQUkseURBQXFCLGlCQUFpQiwrREFBMkI7QUFDeFE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywyREFBdUIsY0FBYyxPQUFPLHlEQUFxQjtBQUNyRyxzQkFBc0Isa0RBQWMsZUFBZSxpREFBYSxPQUFPLGtEQUFjLGtDQUFrQyxhQUFvQixnQkFBZ0IsOENBQVUsZ0NBQWdDLHNEQUFrQjtBQUN2TixnQkFBZ0IsaURBQVEsVUFBVSx5RUFBZ0IsT0FBTyxvREFBZ0IsR0FBRyx3QkFBd0IsaUVBQWdCO0FBQ3BIO0FBQ0EsdUdBQXVHLGtEQUFrRDtBQUN6SjtBQUNBLENBQUMsR0FBRztBQUNKLGVBQWUsaURBQWEsZ0JBQWdCLHNEQUFrQixpQ0FBaUMscURBQWlCLHFCQUFxQiw4Q0FBVTtBQUMvSSxrQkFBa0IsNkNBQVM7QUFDM0IsU0FBUyxzQkFBc0I7QUFDL0I7QUFDQSxlQUFlLGlEQUFhLG1CQUFtQixzREFBa0IsWUFBWSxPQUFPLEdBQUcsV0FBVyxJQUFJLHFEQUFpQixxQkFB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDNFA7QUFDNVAiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iaWR3aW5uZXJhaS8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L3VwbG9hZC1idWlsZGVyLUJsRk9BbnN2LmpzPzJkNzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuL3BhY2thZ2UtRHBTY3B2VEEuanNcIjtcbmltcG9ydCB7IGxvZ0RlcHJlY2F0aW9uV2FybmluZyB9IGZyb20gXCIuL2RlcHJlY2F0aW9ucy1wTG13Nll0ZC5qc1wiO1xuaW1wb3J0IHsgQWN0aW9uVHlwZSwgQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSwgTWV0YWRhdGFGZXRjaFJlc3BvbnNlLCBNZXRhZGF0YUZldGNoU3RyZWFtUGFydCwgVXBsb2FkQWN0aW9uUGF5bG9hZCwgVXBsb2FkVGhpbmdIb29rLCBVcGxvYWRUaGluZ1Rva2VuLCBVcGxvYWRlZEZpbGVEYXRhIH0gZnJvbSBcIi4vc2hhcmVkLXNjaGVtYXMtQm1HNUFSb1guanNcIjtcbmltcG9ydCB7IEludmFsaWRSb3V0ZUNvbmZpZ0Vycm9yLCBVcGxvYWRUaGluZ0Vycm9yLCBieXRlc1RvRmlsZVNpemUsIGZpbGVTaXplVG9CeXRlcywgZmlsbElucHV0Um91dGVDb25maWcsIGZpbHRlckRlZmluZWRPYmplY3RWYWx1ZXMsIGdlbmVyYXRlS2V5LCBnZW5lcmF0ZVNpZ25lZFVSTCwgZ2V0U3RhdHVzQ29kZUZyb21FcnJvciwgbWF0Y2hGaWxlVHlwZSwgb2JqZWN0S2V5cywgdmVyaWZ5U2lnbmF0dXJlIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcbmltcG9ydCAqIGFzIEVmZmVjdCBmcm9tIFwiZWZmZWN0L0VmZmVjdFwiO1xuaW1wb3J0ICogYXMgSHR0cEFwcCBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwQXBwXCI7XG5pbXBvcnQgKiBhcyBIdHRwQm9keSBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwQm9keVwiO1xuaW1wb3J0ICogYXMgSHR0cENsaWVudCBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwQ2xpZW50XCI7XG5pbXBvcnQgKiBhcyBIdHRwQ2xpZW50UmVxdWVzdCBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwQ2xpZW50UmVxdWVzdFwiO1xuaW1wb3J0ICogYXMgSHR0cENsaWVudFJlc3BvbnNlIGZyb20gXCJAZWZmZWN0L3BsYXRmb3JtL0h0dHBDbGllbnRSZXNwb25zZVwiO1xuaW1wb3J0ICogYXMgSHR0cFJvdXRlciBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwUm91dGVyXCI7XG5pbXBvcnQgKiBhcyBIdHRwU2VydmVyUmVxdWVzdCBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwU2VydmVyUmVxdWVzdFwiO1xuaW1wb3J0ICogYXMgSHR0cFNlcnZlclJlc3BvbnNlIGZyb20gXCJAZWZmZWN0L3BsYXRmb3JtL0h0dHBTZXJ2ZXJSZXNwb25zZVwiO1xuaW1wb3J0ICogYXMgQ29uZmlnIGZyb20gXCJlZmZlY3QvQ29uZmlnXCI7XG5pbXBvcnQgKiBhcyBDb250ZXh0IGZyb20gXCJlZmZlY3QvQ29udGV4dFwiO1xuaW1wb3J0ICogYXMgTWF0Y2ggZnJvbSBcImVmZmVjdC9NYXRjaFwiO1xuaW1wb3J0ICogYXMgUmVkYWN0ZWQgZnJvbSBcImVmZmVjdC9SZWRhY3RlZFwiO1xuaW1wb3J0ICogYXMgUyBmcm9tIFwiZWZmZWN0L1NjaGVtYVwiO1xuaW1wb3J0ICogYXMgQ29uZmlnUHJvdmlkZXIgZnJvbSBcImVmZmVjdC9Db25maWdQcm92aWRlclwiO1xuaW1wb3J0ICogYXMgU3RyZWFtIGZyb20gXCJlZmZlY3QvU3RyZWFtXCI7XG5pbXBvcnQgKiBhcyBDb25maWdFcnJvciBmcm9tIFwiZWZmZWN0L0NvbmZpZ0Vycm9yXCI7XG5pbXBvcnQgKiBhcyBFaXRoZXIkMSBmcm9tIFwiZWZmZWN0L0VpdGhlclwiO1xuaW1wb3J0ICogYXMgTGF5ZXIgZnJvbSBcImVmZmVjdC9MYXllclwiO1xuaW1wb3J0ICogYXMgTG9nZ2VyIGZyb20gXCJlZmZlY3QvTG9nZ2VyXCI7XG5pbXBvcnQgKiBhcyBMb2dMZXZlbCBmcm9tIFwiZWZmZWN0L0xvZ0xldmVsXCI7XG5pbXBvcnQgKiBhcyBDYXVzZSBmcm9tIFwiZWZmZWN0L0NhdXNlXCI7XG5pbXBvcnQgKiBhcyBEYXRhIGZyb20gXCJlZmZlY3QvRGF0YVwiO1xuaW1wb3J0ICogYXMgUnVudGltZSBmcm9tIFwiZWZmZWN0L1J1bnRpbWVcIjtcbmltcG9ydCAqIGFzIEZldGNoSHR0cENsaWVudCBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9GZXRjaEh0dHBDbGllbnRcIjtcbmltcG9ydCAqIGFzIEhlYWRlcnMgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSGVhZGVyc1wiO1xuaW1wb3J0ICogYXMgRmliZXJSZWYgZnJvbSBcImVmZmVjdC9GaWJlclJlZlwiO1xuaW1wb3J0ICogYXMgTWFuYWdlZFJ1bnRpbWUgZnJvbSBcImVmZmVjdC9NYW5hZ2VkUnVudGltZVwiO1xuXG4vLyNyZWdpb24gc3JjL19pbnRlcm5hbC9jb25maWcudHNcbi8qKlxuKiBNZXJnZSBpbiBgaW1wb3J0Lm1ldGEuZW52YCB0byB0aGUgYnVpbHQtaW4gYHByb2Nlc3MuZW52YCBwcm92aWRlclxuKiBQcmVmaXgga2V5cyB3aXRoIGBVUExPQURUSElOR19gIHNvIHdlIGNhbiByZWZlcmVuY2UganVzdCB0aGUgbmFtZS5cbiogQGV4YW1wbGVcbiogcHJvY2Vzcy5lbnYuVVBMT0FEVEhJTkdfVE9LRU4gPSBcImZvb1wiXG4qIENvbmZpZy5zdHJpbmcoXCJ0b2tlblwiKTsgLy8gQ29uZmlnPFwiZm9vXCI+XG4qL1xuY29uc3QgZW52UHJvdmlkZXIgPSBDb25maWdQcm92aWRlci5mcm9tRW52KCkucGlwZShDb25maWdQcm92aWRlci5vckVsc2UoKCkgPT4gQ29uZmlnUHJvdmlkZXIuZnJvbU1hcChuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGZpbHRlckRlZmluZWRPYmplY3RWYWx1ZXMoaW1wb3J0Lm1ldGE/LmVudiA/PyB7fSkpKSwgeyBwYXRoRGVsaW06IFwiX1wiIH0pKSwgQ29uZmlnUHJvdmlkZXIubmVzdGVkKFwidXBsb2FkdGhpbmdcIiksIENvbmZpZ1Byb3ZpZGVyLmNvbnN0YW50Q2FzZSk7XG4vKipcbiogQ29uZmlnIHByb3ZpZGVyIHRoYXQgbWVyZ2VzIHRoZSBvcHRpb25zIGZyb20gdGhlIG9iamVjdFxuKiBhbmQgZW52aXJvbm1lbnQgdmFyaWFibGVzIHByZWZpeGVkIHdpdGggYFVQTE9BRFRISU5HX2AuXG4qIEByZW1hcmtzIE9wdGlvbnMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuKi9cbmNvbnN0IGNvbmZpZ1Byb3ZpZGVyID0gKG9wdGlvbnMpID0+IENvbmZpZ1Byb3ZpZGVyLmZyb21Kc29uKG9wdGlvbnMgPz8ge30pLnBpcGUoQ29uZmlnUHJvdmlkZXIub3JFbHNlKCgpID0+IGVudlByb3ZpZGVyKSk7XG5jb25zdCBJc0RldmVsb3BtZW50ID0gQ29uZmlnLmJvb2xlYW4oXCJpc0RldlwiKS5waXBlKENvbmZpZy5vckVsc2UoKCkgPT4gQ29uZmlnLnN1Y2NlZWQodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgPyBwcm9jZXNzLmVudi5OT0RFX0VOViA6IHZvaWQgMCkucGlwZShDb25maWcubWFwKChfKSA9PiBfID09PSBcImRldmVsb3BtZW50XCIpKSksIENvbmZpZy53aXRoRGVmYXVsdChmYWxzZSkpO1xuY29uc3QgVVRUb2tlbiA9IFMuQ29uZmlnKFwidG9rZW5cIiwgVXBsb2FkVGhpbmdUb2tlbikucGlwZShFZmZlY3QuY2F0Y2hUYWdzKHsgQ29uZmlnRXJyb3I6IChlKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdGNvZGU6IGUuX29wID09PSBcIkludmFsaWREYXRhXCIgPyBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiIDogXCJNSVNTSU5HX0VOVlwiLFxuXHRtZXNzYWdlOiBlLl9vcCA9PT0gXCJJbnZhbGlkRGF0YVwiID8gXCJJbnZhbGlkIHRva2VuLiBBIHRva2VuIGlzIGEgYmFzZTY0IGVuY29kZWQgSlNPTiBvYmplY3QgbWF0Y2hpbmcgeyBhcGlLZXk6IHN0cmluZywgYXBwSWQ6IHN0cmluZywgcmVnaW9uczogc3RyaW5nW10gfS5cIiA6IFwiTWlzc2luZyB0b2tlbi4gUGxlYXNlIHNldCB0aGUgYFVQTE9BRFRISU5HX1RPS0VOYCBlbnZpcm9ubWVudCB2YXJpYWJsZSBvciBwcm92aWRlIGEgdG9rZW4gbWFudWFsbHkgdGhyb3VnaCBjb25maWcuXCIsXG5cdGNhdXNlOiBlXG59KSB9KSk7XG5jb25zdCBBcGlVcmwgPSBDb25maWcuc3RyaW5nKFwiYXBpVXJsXCIpLnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KFwiaHR0cHM6Ly9hcGkudXBsb2FkdGhpbmcuY29tXCIpLCBDb25maWcubWFwQXR0ZW1wdCgoXykgPT4gbmV3IFVSTChfKSksIENvbmZpZy5tYXAoKHVybCkgPT4gdXJsLmhyZWYucmVwbGFjZSgvXFwvJC8sIFwiXCIpKSk7XG5jb25zdCBJbmdlc3RVcmwgPSBFZmZlY3QuZm4oZnVuY3Rpb24qIChwcmVmZXJyZWRSZWdpb24pIHtcblx0Y29uc3QgeyByZWdpb25zLCBpbmdlc3RIb3N0IH0gPSB5aWVsZCogVVRUb2tlbjtcblx0Y29uc3QgcmVnaW9uID0gcHJlZmVycmVkUmVnaW9uID8gcmVnaW9ucy5maW5kKChyKSA9PiByID09PSBwcmVmZXJyZWRSZWdpb24pID8/IHJlZ2lvbnNbMF0gOiByZWdpb25zWzBdO1xuXHRyZXR1cm4geWllbGQqIENvbmZpZy5zdHJpbmcoXCJpbmdlc3RVcmxcIikucGlwZShDb25maWcud2l0aERlZmF1bHQoYGh0dHBzOi8vJHtyZWdpb259LiR7aW5nZXN0SG9zdH1gKSwgQ29uZmlnLm1hcEF0dGVtcHQoKF8pID0+IG5ldyBVUkwoXykpLCBDb25maWcubWFwKCh1cmwpID0+IHVybC5ocmVmLnJlcGxhY2UoL1xcLyQvLCBcIlwiKSkpO1xufSk7XG5jb25zdCBVdGZzSG9zdCA9IENvbmZpZy5zdHJpbmcoXCJ1dGZzSG9zdFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChcInV0ZnMuaW9cIikpO1xuY29uc3QgVWZzSG9zdCA9IENvbmZpZy5zdHJpbmcoXCJ1ZnNIb3N0XCIpLnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KFwidWZzLnNoXCIpKTtcbmNvbnN0IFVmc0FwcElkTG9jYXRpb24gPSBDb25maWcubGl0ZXJhbChcInN1YmRvbWFpblwiLCBcInBhdGhcIikoXCJ1ZnNBcHBJZExvY2F0aW9uXCIpLnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KFwic3ViZG9tYWluXCIpKTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL19pbnRlcm5hbC9lcnJvci1mb3JtYXR0ZXIudHNcbmZ1bmN0aW9uIGRlZmF1bHRFcnJvckZvcm1hdHRlcihlcnJvcikge1xuXHRyZXR1cm4geyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH07XG59XG5mdW5jdGlvbiBmb3JtYXRFcnJvcihlcnJvciwgcm91dGVyKSB7XG5cdGNvbnN0IGZpcnN0U2x1ZyA9IE9iamVjdC5rZXlzKHJvdXRlcilbMF07XG5cdGNvbnN0IGVycm9yRm9ybWF0dGVyID0gZmlyc3RTbHVnID8gcm91dGVyW2ZpcnN0U2x1Z10/LmVycm9yRm9ybWF0dGVyID8/IGRlZmF1bHRFcnJvckZvcm1hdHRlciA6IGRlZmF1bHRFcnJvckZvcm1hdHRlcjtcblx0cmV0dXJuIGVycm9yRm9ybWF0dGVyKGVycm9yKTtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL19pbnRlcm5hbC9qc29ubC50c1xuY29uc3QgaGFuZGxlSnNvbkxpbmVTdHJlYW0gPSAoc2NoZW1hLCBvbkNodW5rKSA9PiAoc3RyZWFtKSA9PiB7XG5cdGxldCBidWYgPSBcIlwiO1xuXHRyZXR1cm4gc3RyZWFtLnBpcGUoU3RyZWFtLmRlY29kZVRleHQoKSwgU3RyZWFtLm1hcEVmZmVjdCgoY2h1bmspID0+IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcblx0XHRidWYgKz0gY2h1bms7XG5cdFx0Y29uc3QgcGFydHMgPSBidWYuc3BsaXQoXCJcXG5cIik7XG5cdFx0Y29uc3QgdmFsaWRDaHVua3MgPSBbXTtcblx0XHRmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpIHRyeSB7XG5cdFx0XHR2YWxpZENodW5rcy5wdXNoKEpTT04ucGFyc2UocGFydCkpO1xuXHRcdFx0YnVmID0gYnVmLnNsaWNlKHBhcnQubGVuZ3RoICsgMSk7XG5cdFx0fSBjYXRjaCB7fVxuXHRcdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJSZWNlaXZlZCBjaHVua3NcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiY2h1bmtcIiwgY2h1bmspLCBFZmZlY3QuYW5ub3RhdGVMb2dzKFwicGFyc2VkQ2h1bmtzXCIsIHZhbGlkQ2h1bmtzKSwgRWZmZWN0LmFubm90YXRlTG9ncyhcImJ1ZlwiLCBidWYpKTtcblx0XHRyZXR1cm4gdmFsaWRDaHVua3M7XG5cdH0pKSwgU3RyZWFtLm1hcEVmZmVjdChTLmRlY29kZVVua25vd24oUy5BcnJheShzY2hlbWEpKSksIFN0cmVhbS5tYXBFZmZlY3QoRWZmZWN0LmZvckVhY2goKHBhcnQpID0+IG9uQ2h1bmsocGFydCkpKSwgU3RyZWFtLnJ1bkRyYWluLCBFZmZlY3Qud2l0aExvZ1NwYW4oXCJoYW5kbGVKc29uTGluZVN0cmVhbVwiKSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL2xvZ2dlci50c1xuLyoqXG4qIENvbmZpZy5sb2dMZXZlbCBjb3VudGVyLWludHVpdGl2ZWx5IGFjY2VwdHMgTG9nTGV2ZWxbXCJsYWJlbFwiXVxuKiBpbnN0ZWFkIG9mIGEgbGl0ZXJhbCwgcmlwcGluZyBpdCBhbmQgY2hhbmdpbmcgdG8gYWNjZXB0IGxpdGVyYWxcbiogRWZmZWN0IDQuMCB3aWxsIGNoYW5nZSB0aGlzIHRvIGFjY2VwdCBhIGxpdGVyYWwgYW5kIHRoZW4gd2UgY2FuXG4qIHJlbW92ZSB0aGlzIGFuZCBnbyBiYWNrIHRvIHRoZSBidWlsdC1pbiB2YWxpZGF0b3IuXG4qL1xuY29uc3QgQ29uZmlnTG9nTGV2ZWwgPSAobmFtZSkgPT4ge1xuXHRjb25zdCBjb25maWcgPSBDb25maWcubWFwT3JGYWlsKENvbmZpZy5zdHJpbmcoKSwgKGxpdGVyYWwpID0+IHtcblx0XHRjb25zdCBsZXZlbCA9IExvZ0xldmVsLmFsbExldmVscy5maW5kKChsZXZlbCQxKSA9PiBsZXZlbCQxLl90YWcgPT09IGxpdGVyYWwpO1xuXHRcdHJldHVybiBsZXZlbCA9PT0gdm9pZCAwID8gRWl0aGVyJDEubGVmdChDb25maWdFcnJvci5JbnZhbGlkRGF0YShbXSwgYEV4cGVjdGVkIGEgbG9nIGxldmVsIGJ1dCByZWNlaXZlZCAke2xpdGVyYWx9YCkpIDogRWl0aGVyJDEucmlnaHQobGV2ZWwpO1xuXHR9KTtcblx0cmV0dXJuIG5hbWUgPT09IHZvaWQgMCA/IGNvbmZpZyA6IENvbmZpZy5uZXN0ZWQoY29uZmlnLCBuYW1lKTtcbn07XG5jb25zdCB3aXRoTWluaW1hbExvZ0xldmVsID0gQ29uZmlnTG9nTGV2ZWwoXCJsb2dMZXZlbFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChMb2dMZXZlbC5JbmZvKSwgRWZmZWN0LmFuZFRoZW4oKGxldmVsKSA9PiBMb2dnZXIubWluaW11bUxvZ0xldmVsKGxldmVsKSksIEVmZmVjdC50YXBFcnJvcigoZSkgPT4gRWZmZWN0LmxvZ0Vycm9yKFwiSW52YWxpZCBsb2cgbGV2ZWxcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiZXJyb3JcIiwgZSkpKSwgRWZmZWN0LmNhdGNoVGFnKFwiQ29uZmlnRXJyb3JcIiwgKGUpID0+IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0Y29kZTogXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIixcblx0bWVzc2FnZTogXCJJbnZhbGlkIHNlcnZlciBjb25maWd1cmF0aW9uXCIsXG5cdGNhdXNlOiBlXG59KSksIExheWVyLnVud3JhcEVmZmVjdCk7XG5jb25zdCBMb2dGb3JtYXQgPSBDb25maWcubGl0ZXJhbChcImpzb25cIiwgXCJsb2dGbXRcIiwgXCJzdHJ1Y3R1cmVkXCIsIFwicHJldHR5XCIpKFwibG9nRm9ybWF0XCIpO1xuY29uc3Qgd2l0aExvZ0Zvcm1hdCA9IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcblx0Y29uc3QgaXNEZXYgPSB5aWVsZCogSXNEZXZlbG9wbWVudDtcblx0Y29uc3QgbG9nRm9ybWF0ID0geWllbGQqIExvZ0Zvcm1hdC5waXBlKENvbmZpZy53aXRoRGVmYXVsdChpc0RldiA/IFwicHJldHR5XCIgOiBcImpzb25cIikpO1xuXHRyZXR1cm4gTG9nZ2VyW2xvZ0Zvcm1hdF07XG59KS5waXBlKEVmZmVjdC5jYXRjaFRhZyhcIkNvbmZpZ0Vycm9yXCIsIChlKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdGNvZGU6IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIsXG5cdG1lc3NhZ2U6IFwiSW52YWxpZCBzZXJ2ZXIgY29uZmlndXJhdGlvblwiLFxuXHRjYXVzZTogZVxufSkpLCBMYXllci51bndyYXBFZmZlY3QpO1xuY29uc3QgbG9nSHR0cENsaWVudFJlc3BvbnNlID0gKG1lc3NhZ2UsIG9wdHMpID0+IHtcblx0Y29uc3QgbWl4aW4gPSBvcHRzPy5taXhpbiA/PyBcImpzb25cIjtcblx0Y29uc3QgbGV2ZWwgPSBMb2dMZXZlbC5mcm9tTGl0ZXJhbChvcHRzPy5sZXZlbCA/PyBcIkRlYnVnXCIpO1xuXHRyZXR1cm4gKHJlc3BvbnNlKSA9PiBFZmZlY3QuZmxhdE1hcChtaXhpbiAhPT0gXCJOb25lXCIgPyByZXNwb25zZVttaXhpbl0gOiBFZmZlY3Qudm9pZCwgKCkgPT4gRWZmZWN0LmxvZ1dpdGhMZXZlbChsZXZlbCwgYCR7bWVzc2FnZX0gKCR7cmVzcG9uc2Uuc3RhdHVzfSlgKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJyZXNwb25zZVwiLCByZXNwb25zZSkpKTtcbn07XG5jb25zdCBsb2dIdHRwQ2xpZW50RXJyb3IgPSAobWVzc2FnZSkgPT4gKGVycikgPT4gZXJyLl90YWcgPT09IFwiUmVzcG9uc2VFcnJvclwiID8gbG9nSHR0cENsaWVudFJlc3BvbnNlKG1lc3NhZ2UsIHsgbGV2ZWw6IFwiRXJyb3JcIiB9KShlcnIucmVzcG9uc2UpIDogRWZmZWN0LmxvZ0Vycm9yKG1lc3NhZ2UpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImVycm9yXCIsIGVycikpO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL3BhcnNlci50c1xudmFyIFBhcnNlckVycm9yID0gY2xhc3MgZXh0ZW5kcyBEYXRhLlRhZ2dlZEVycm9yKFwiUGFyc2VyRXJyb3JcIikge1xuXHRtZXNzYWdlID0gXCJJbnB1dCB2YWxpZGF0aW9uIGZhaWxlZC4gVGhlIG9yaWdpbmFsIGVycm9yIHdpdGggaXQncyB2YWxpZGF0aW9uIGlzc3VlcyBpcyBpbiB0aGUgZXJyb3IgY2F1c2UuXCI7XG59O1xuZnVuY3Rpb24gZ2V0UGFyc2VGbihwYXJzZXIpIHtcblx0aWYgKFwicGFyc2VBc3luY1wiIGluIHBhcnNlciAmJiB0eXBlb2YgcGFyc2VyLnBhcnNlQXN5bmMgPT09IFwiZnVuY3Rpb25cIilcbiAvKipcblx0KiBab2Rcblx0KiBUT0RPIChuZXh0IG1ham9yKTogQ29uc2lkZXIgd3JhcHBpbmcgWm9kRXJyb3IgaW4gUGFyc2VyRXJyb3Jcblx0Ki9cblx0cmV0dXJuIHBhcnNlci5wYXJzZUFzeW5jO1xuXHRpZiAoUy5pc1NjaGVtYShwYXJzZXIpKVxuIC8qKlxuXHQqIEVmZmVjdCBTY2hlbWFcblx0Ki9cblx0cmV0dXJuICh2YWx1ZSkgPT4gUy5kZWNvZGVVbmtub3duUHJvbWlzZShwYXJzZXIpKHZhbHVlKS5jYXRjaCgoZXJyb3IpID0+IHtcblx0XHR0aHJvdyBuZXcgUGFyc2VyRXJyb3IoeyBjYXVzZTogQ2F1c2Uuc3F1YXNoKGVycm9yW1J1bnRpbWUuRmliZXJGYWlsdXJlQ2F1c2VJZF0pIH0pO1xuXHR9KTtcblx0aWYgKFwifnN0YW5kYXJkXCIgaW4gcGFyc2VyKVxuIC8qKlxuXHQqIFN0YW5kYXJkIFNjaGVtYVxuXHQqIFRPRE8gKG5leHQgbWFqb3IpOiBDb25zaWRlciBtb3ZpbmcgdGhpcyB0byB0aGUgdG9wIG9mIHRoZSBmdW5jdGlvblxuXHQqL1xuXHRyZXR1cm4gYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgcGFyc2VyW1wifnN0YW5kYXJkXCJdLnZhbGlkYXRlKHZhbHVlKTtcblx0XHRpZiAocmVzdWx0Lmlzc3VlcykgdGhyb3cgbmV3IFBhcnNlckVycm9yKHsgY2F1c2U6IHJlc3VsdC5pc3N1ZXMgfSk7XG5cdFx0cmV0dXJuIHJlc3VsdC52YWx1ZTtcblx0fTtcblx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJzZXJcIik7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvcm91dGUtY29uZmlnLnRzXG52YXIgRmlsZVNpemVNaXNtYXRjaCA9IGNsYXNzIGV4dGVuZHMgRGF0YS5FcnJvciB7XG5cdF90YWcgPSBcIkZpbGVTaXplTWlzbWF0Y2hcIjtcblx0bmFtZSA9IFwiRmlsZVNpemVNaXNtYXRjaEVycm9yXCI7XG5cdGNvbnN0cnVjdG9yKHR5cGUsIG1heCwgYWN0dWFsKSB7XG5cdFx0Y29uc3QgcmVhc29uID0gYFlvdSB1cGxvYWRlZCBhICR7dHlwZX0gZmlsZSB0aGF0IHdhcyAke2J5dGVzVG9GaWxlU2l6ZShhY3R1YWwpfSwgYnV0IHRoZSBsaW1pdCBmb3IgdGhhdCB0eXBlIGlzICR7bWF4fWA7XG5cdFx0c3VwZXIoeyByZWFzb24gfSk7XG5cdH1cbn07XG52YXIgRmlsZUNvdW50TWlzbWF0Y2ggPSBjbGFzcyBleHRlbmRzIERhdGEuRXJyb3Ige1xuXHRfdGFnID0gXCJGaWxlQ291bnRNaXNtYXRjaFwiO1xuXHRuYW1lID0gXCJGaWxlQ291bnRNaXNtYXRjaEVycm9yXCI7XG5cdGNvbnN0cnVjdG9yKHR5cGUsIGJvdW5kdHlwZSwgYm91bmQsIGFjdHVhbCkge1xuXHRcdGNvbnN0IHJlYXNvbiA9IGBZb3UgdXBsb2FkZWQgJHthY3R1YWx9IGZpbGUocykgb2YgdHlwZSAnJHt0eXBlfScsIGJ1dCB0aGUgJHtib3VuZHR5cGV9IGZvciB0aGF0IHR5cGUgaXMgJHtib3VuZH1gO1xuXHRcdHN1cGVyKHsgcmVhc29uIH0pO1xuXHR9XG59O1xuY29uc3QgYXNzZXJ0RmlsZXNNZWV0Q29uZmlnID0gKGZpbGVzLCByb3V0ZUNvbmZpZykgPT4gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRjb25zdCBjb3VudHMgPSB7fTtcblx0Zm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG5cdFx0Y29uc3QgdHlwZSA9IHlpZWxkKiBtYXRjaEZpbGVUeXBlKGZpbGUsIG9iamVjdEtleXMocm91dGVDb25maWcpKTtcblx0XHRjb3VudHNbdHlwZV0gPSAoY291bnRzW3R5cGVdID8/IDApICsgMTtcblx0XHRjb25zdCBzaXplTGltaXQgPSByb3V0ZUNvbmZpZ1t0eXBlXT8ubWF4RmlsZVNpemU7XG5cdFx0aWYgKCFzaXplTGltaXQpIHJldHVybiB5aWVsZCogbmV3IEludmFsaWRSb3V0ZUNvbmZpZ0Vycm9yKHR5cGUsIFwibWF4RmlsZVNpemVcIik7XG5cdFx0Y29uc3Qgc2l6ZUxpbWl0Qnl0ZXMgPSB5aWVsZCogZmlsZVNpemVUb0J5dGVzKHNpemVMaW1pdCk7XG5cdFx0aWYgKGZpbGUuc2l6ZSA+IHNpemVMaW1pdEJ5dGVzKSByZXR1cm4geWllbGQqIG5ldyBGaWxlU2l6ZU1pc21hdGNoKHR5cGUsIHNpemVMaW1pdCwgZmlsZS5zaXplKTtcblx0fVxuXHRmb3IgKGNvbnN0IF9rZXkgaW4gY291bnRzKSB7XG5cdFx0Y29uc3Qga2V5ID0gX2tleTtcblx0XHRjb25zdCBjb25maWcgPSByb3V0ZUNvbmZpZ1trZXldO1xuXHRcdGlmICghY29uZmlnKSByZXR1cm4geWllbGQqIG5ldyBJbnZhbGlkUm91dGVDb25maWdFcnJvcihrZXkpO1xuXHRcdGNvbnN0IGNvdW50ID0gY291bnRzW2tleV07XG5cdFx0Y29uc3QgbWluID0gY29uZmlnLm1pbkZpbGVDb3VudDtcblx0XHRjb25zdCBtYXggPSBjb25maWcubWF4RmlsZUNvdW50O1xuXHRcdGlmIChtaW4gPiBtYXgpIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdFx0bWVzc2FnZTogXCJJbnZhbGlkIGNvbmZpZyBkdXJpbmcgZmlsZSBjb3VudCAtIG1pbkZpbGVDb3VudCA+IG1heEZpbGVDb3VudFwiLFxuXHRcdFx0Y2F1c2U6IGBtaW5GaWxlQ291bnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4RmlsZUNvdW50IGZvciBrZXkgJHtrZXl9LiBnb3Q6ICR7bWlufSA+ICR7bWF4fWBcblx0XHR9KTtcblx0XHRpZiAoY291bnQgIT0gbnVsbCAmJiBjb3VudCA8IG1pbikgcmV0dXJuIHlpZWxkKiBuZXcgRmlsZUNvdW50TWlzbWF0Y2goa2V5LCBcIm1pbmltdW1cIiwgbWluLCBjb3VudCk7XG5cdFx0aWYgKGNvdW50ICE9IG51bGwgJiYgY291bnQgPiBtYXgpIHJldHVybiB5aWVsZCogbmV3IEZpbGVDb3VudE1pc21hdGNoKGtleSwgXCJtYXhpbXVtXCIsIG1heCwgY291bnQpO1xuXHR9XG5cdHJldHVybiBudWxsO1xufSk7XG5jb25zdCBleHRyYWN0Um91dGVyQ29uZmlnID0gKHJvdXRlcikgPT4gRWZmZWN0LmZvckVhY2gob2JqZWN0S2V5cyhyb3V0ZXIpLCAoc2x1ZykgPT4gRWZmZWN0Lm1hcChmaWxsSW5wdXRSb3V0ZUNvbmZpZyhyb3V0ZXJbc2x1Z10ucm91dGVyQ29uZmlnKSwgKGNvbmZpZykgPT4gKHtcblx0c2x1Zyxcblx0Y29uZmlnXG59KSkpO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL3J1bnRpbWUudHNcbmNvbnN0IG1ha2VSdW50aW1lID0gKGZldGNoLCBjb25maWcpID0+IHtcblx0Y29uc3QgZmV0Y2hIdHRwQ2xpZW50ID0gTGF5ZXIucHJvdmlkZU1lcmdlKEZldGNoSHR0cENsaWVudC5sYXllciwgTGF5ZXIuc3VjY2VlZChGZXRjaEh0dHBDbGllbnQuRmV0Y2gsIGZldGNoKSk7XG5cdGNvbnN0IHdpdGhSZWRhY3RlZEhlYWRlcnMgPSBMYXllci5lZmZlY3REaXNjYXJkKEZpYmVyUmVmLnVwZGF0ZShIZWFkZXJzLmN1cnJlbnRSZWRhY3RlZE5hbWVzLCAoXykgPT4gXy5jb25jYXQoW1wieC11cGxvYWR0aGluZy1hcGkta2V5XCJdKSkpO1xuXHRjb25zdCBsYXllciA9IExheWVyLnByb3ZpZGUoTGF5ZXIubWVyZ2VBbGwod2l0aExvZ0Zvcm1hdCwgd2l0aE1pbmltYWxMb2dMZXZlbCwgZmV0Y2hIdHRwQ2xpZW50LCB3aXRoUmVkYWN0ZWRIZWFkZXJzKSwgTGF5ZXIuc2V0Q29uZmlnUHJvdmlkZXIoY29uZmlnUHJvdmlkZXIoY29uZmlnKSkpO1xuXHRyZXR1cm4gTWFuYWdlZFJ1bnRpbWUubWFrZShsYXllcik7XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL3R5cGVzLnRzXG4vKipcbiogTWFya2VyIHVzZWQgdG8gc2VsZWN0IHRoZSByZWdpb24gYmFzZWQgb24gdGhlIGluY29taW5nIHJlcXVlc3RcbiovXG5jb25zdCBVVFJlZ2lvbiA9IFN5bWJvbChcInVwbG9hZHRoaW5nLXJlZ2lvbi1zeW1ib2xcIik7XG4vKipcbiogTWFya2VyIHVzZWQgdG8gYXBwZW5kIGEgYGN1c3RvbUlkYCB0byB0aGUgaW5jb21pbmcgZmlsZSBkYXRhIGluIGAubWlkZGxld2FyZSgpYFxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiAubWlkZGxld2FyZSgob3B0cykgPT4ge1xuKiAgIHJldHVybiB7XG4qICAgICBbVVRGaWxlc106IG9wdHMuZmlsZXMubWFwKChmaWxlKSA9PiAoe1xuKiAgICAgICAuLi5maWxlLFxuKiAgICAgICBjdXN0b21JZDogZ2VuZXJhdGVJZCgpLFxuKiAgICAgfSkpXG4qICAgfTtcbiogfSlcbiogYGBgXG4qL1xuY29uc3QgVVRGaWxlcyA9IFN5bWJvbChcInVwbG9hZHRoaW5nLWN1c3RvbS1pZC1zeW1ib2xcIik7XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvaGFuZGxlci50c1xudmFyIEFkYXB0ZXJBcmd1bWVudHMgPSBjbGFzcyBleHRlbmRzIENvbnRleHQuVGFnKFwidXBsb2FkdGhpbmcvQWRhcHRlckFyZ3VtZW50c1wiKSgpIHt9O1xuLyoqXG4qIENyZWF0ZSBhIHJlcXVlc3QgaGFuZGxlciBhZGFwdGVyIGZvciBhbnkgZnJhbWV3b3JrIG9yIHNlcnZlciBsaWJyYXJ5LlxuKiBSZWZlciB0byB0aGUgZXhpc3RpbmcgYWRhcHRlcnMgZm9yIGV4YW1wbGVzIG9uIGhvdyB0byB1c2UgdGhpcyBmdW5jdGlvbi5cbiogQHB1YmxpY1xuKlxuKiBAcGFyYW0gbWFrZUFkYXB0ZXJBcmdzIC0gRnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgYXJncyBmcm9tIHlvdXIgZnJhbWV3b3JrIGFuZCByZXR1cm5zIGFuIEVmZmVjdCB0aGF0IHJlc29sdmVzIHRvIHRoZSBhZGFwdGVyIGFyZ3MuXG4qIFRoZXNlIGFyZ3MgYXJlIHBhc3NlZCB0byB0aGUgYC5taWRkbGV3YXJlYCwgYC5vblVwbG9hZENvbXBsZXRlYCwgYW5kIGAub25VcGxvYWRFcnJvcmAgaG9va3MuXG4qIEBwYXJhbSB0b1JlcXVlc3QgLSBGdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBhcmdzIGZyb20geW91ciBmcmFtZXdvcmsgYW5kIHJldHVybnMgYW4gRWZmZWN0IHRoYXQgcmVzb2x2ZXMgdG8gYSB3ZWIgUmVxdWVzdCBvYmplY3QuXG4qIEBwYXJhbSBvcHRzIC0gVGhlIHJvdXRlciBjb25maWcgYW5kIG90aGVyIG9wdGlvbnMgdGhhdCBhcmUgbm9ybWFsbHkgcGFzc2VkIHRvIGBjcmVhdGVSZXF1ZXN0SGFuZGxlcmAgb2Ygb2ZmaWNpYWwgYWRhcHRlcnNcbiogQHBhcmFtIGJlQWRhcHRlciAtIFtPcHRpb25hbF0gVGhlIGFkYXB0ZXIgbmFtZSBvZiB0aGUgYWRhcHRlciwgdXNlZCBmb3IgdGVsZW1ldHJ5IHB1cnBvc2VzXG4qIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgYXJncyBmcm9tIHlvdXIgZnJhbWV3b3JrIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgUmVzcG9uc2Ugb2JqZWN0LlxuKi9cbmNvbnN0IG1ha2VBZGFwdGVySGFuZGxlciA9IChtYWtlQWRhcHRlckFyZ3MsIHRvUmVxdWVzdCwgb3B0cywgYmVBZGFwdGVyKSA9PiB7XG5cdGNvbnN0IG1hbmFnZWQgPSBtYWtlUnVudGltZShvcHRzLmNvbmZpZz8uZmV0Y2gsIG9wdHMuY29uZmlnKTtcblx0Y29uc3QgaGFuZGxlID0gRWZmZWN0LnByb21pc2UoKCkgPT4gbWFuYWdlZC5ydW50aW1lKCkudGhlbihIdHRwQXBwLnRvV2ViSGFuZGxlclJ1bnRpbWUpKTtcblx0Y29uc3QgYXBwID0gKC4uLmFyZ3MpID0+IEVmZmVjdC5tYXAoRWZmZWN0LnByb21pc2UoKCkgPT4gbWFuYWdlZC5ydW5Qcm9taXNlKGNyZWF0ZVJlcXVlc3RIYW5kbGVyKG9wdHMsIGJlQWRhcHRlciA/PyBcImN1c3RvbVwiKSkpLCBFZmZlY3QucHJvdmlkZVNlcnZpY2VFZmZlY3QoQWRhcHRlckFyZ3VtZW50cywgbWFrZUFkYXB0ZXJBcmdzKC4uLmFyZ3MpKSk7XG5cdHJldHVybiBhc3luYyAoLi4uYXJncykgPT4ge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZS5waXBlKEVmZmVjdC5hcChhcHAoLi4uYXJncykpLCBFZmZlY3QuYXAodG9SZXF1ZXN0KC4uLmFyZ3MpKSwgRWZmZWN0LndpdGhMb2dTcGFuKFwicmVxdWVzdEhhbmRsZXJcIiksIG1hbmFnZWQucnVuUHJvbWlzZSk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcbn07XG5jb25zdCBjcmVhdGVSZXF1ZXN0SGFuZGxlciA9IChvcHRzLCBiZUFkYXB0ZXIpID0+IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcblx0Y29uc3QgaXNEZXZlbG9wbWVudCA9IHlpZWxkKiBJc0RldmVsb3BtZW50O1xuXHRjb25zdCByb3V0ZXJDb25maWcgPSB5aWVsZCogZXh0cmFjdFJvdXRlckNvbmZpZyhvcHRzLnJvdXRlcik7XG5cdGNvbnN0IGhhbmRsZURhZW1vbiA9ICgoKSA9PiB7XG5cdFx0aWYgKG9wdHMuY29uZmlnPy5oYW5kbGVEYWVtb25Qcm9taXNlKSByZXR1cm4gb3B0cy5jb25maWcuaGFuZGxlRGFlbW9uUHJvbWlzZTtcblx0XHRyZXR1cm4gaXNEZXZlbG9wbWVudCA/IFwidm9pZFwiIDogXCJhd2FpdFwiO1xuXHR9KSgpO1xuXHRpZiAoaXNEZXZlbG9wbWVudCAmJiBoYW5kbGVEYWVtb24gPT09IFwiYXdhaXRcIikgcmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0Y29kZTogXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIixcblx0XHRtZXNzYWdlOiBcImhhbmRsZURhZW1vblByb21pc2U6IFxcXCJhd2FpdFxcXCIgaXMgZm9yYmlkZGVuIGluIGRldmVsb3BtZW50LlwiXG5cdH0pO1xuXHRjb25zdCBHRVQgPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdFx0cmV0dXJuIHlpZWxkKiBIdHRwU2VydmVyUmVzcG9uc2UuanNvbihyb3V0ZXJDb25maWcpO1xuXHR9KTtcblx0Y29uc3QgUE9TVCA9IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcblx0XHRjb25zdCB7IFwidXBsb2FkdGhpbmctaG9va1wiOiB1cGxvYWR0aGluZ0hvb2ssIFwieC11cGxvYWR0aGluZy1wYWNrYWdlXCI6IGZlUGFja2FnZSwgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogY2xpZW50VmVyc2lvbiB9ID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0LnNjaGVtYUhlYWRlcnMoUy5TdHJ1Y3Qoe1xuXHRcdFx0XCJ1cGxvYWR0aGluZy1ob29rXCI6IFVwbG9hZFRoaW5nSG9vay5waXBlKFMub3B0aW9uYWwpLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLXBhY2thZ2VcIjogUy5TdHJpbmcucGlwZShTLm9wdGlvbmFsV2l0aCh7IGRlZmF1bHQ6ICgpID0+IFwidW5rbm93blwiIH0pKSxcblx0XHRcdFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IFMuU3RyaW5nLnBpcGUoUy5vcHRpb25hbFdpdGgoeyBkZWZhdWx0OiAoKSA9PiB2ZXJzaW9uIH0pKVxuXHRcdH0pKTtcblx0XHRpZiAoY2xpZW50VmVyc2lvbiAhPT0gdmVyc2lvbikge1xuXHRcdFx0Y29uc3Qgc2VydmVyVmVyc2lvbiA9IHZlcnNpb247XG5cdFx0XHR5aWVsZCogRWZmZWN0LmxvZ1dhcm5pbmcoXCJDbGllbnQgdmVyc2lvbiBtaXNtYXRjaC4gVGhpbmdzIG1heSBub3Qgd29yayBhcyBleHBlY3RlZCwgcGxlYXNlIHN5bmMgeW91ciB2ZXJzaW9ucyB0byBlbnN1cmUgY29tcGF0aWJpbGl0eS5cIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKHtcblx0XHRcdFx0Y2xpZW50VmVyc2lvbixcblx0XHRcdFx0c2VydmVyVmVyc2lvblxuXHRcdFx0fSkpO1xuXHRcdH1cblx0XHRjb25zdCB7IHNsdWcsIGFjdGlvblR5cGUgfSA9IHlpZWxkKiBIdHRwUm91dGVyLnNjaGVtYVBhcmFtcyhTLlN0cnVjdCh7XG5cdFx0XHRhY3Rpb25UeXBlOiBBY3Rpb25UeXBlLnBpcGUoUy5vcHRpb25hbCksXG5cdFx0XHRzbHVnOiBTLlN0cmluZ1xuXHRcdH0pKTtcblx0XHRjb25zdCB1cGxvYWRhYmxlID0gb3B0cy5yb3V0ZXJbc2x1Z107XG5cdFx0aWYgKCF1cGxvYWRhYmxlKSB7XG5cdFx0XHRjb25zdCBtc2cgPSBgTm8gZmlsZSByb3V0ZSBmb3VuZCBmb3Igc2x1ZyAke3NsdWd9YDtcblx0XHRcdHlpZWxkKiBFZmZlY3QubG9nRXJyb3IobXNnKTtcblx0XHRcdHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdFx0XHRjb2RlOiBcIk5PVF9GT1VORFwiLFxuXHRcdFx0XHRtZXNzYWdlOiBtc2dcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRjb25zdCB7IGJvZHksIGZpYmVyIH0gPSB5aWVsZCogTWF0Y2gudmFsdWUoe1xuXHRcdFx0YWN0aW9uVHlwZSxcblx0XHRcdHVwbG9hZHRoaW5nSG9va1xuXHRcdH0pLnBpcGUoTWF0Y2gud2hlbih7XG5cdFx0XHRhY3Rpb25UeXBlOiBcInVwbG9hZFwiLFxuXHRcdFx0dXBsb2FkdGhpbmdIb29rOiB2b2lkIDBcblx0XHR9LCAoKSA9PiBoYW5kbGVVcGxvYWRBY3Rpb24oe1xuXHRcdFx0dXBsb2FkYWJsZSxcblx0XHRcdGZlUGFja2FnZSxcblx0XHRcdGJlQWRhcHRlcixcblx0XHRcdHNsdWdcblx0XHR9KSksIE1hdGNoLndoZW4oe1xuXHRcdFx0YWN0aW9uVHlwZTogdm9pZCAwLFxuXHRcdFx0dXBsb2FkdGhpbmdIb29rOiBcImNhbGxiYWNrXCJcblx0XHR9LCAoKSA9PiBoYW5kbGVDYWxsYmFja1JlcXVlc3Qoe1xuXHRcdFx0dXBsb2FkYWJsZSxcblx0XHRcdGZlUGFja2FnZSxcblx0XHRcdGJlQWRhcHRlclxuXHRcdH0pKSwgTWF0Y2gud2hlbih7XG5cdFx0XHRhY3Rpb25UeXBlOiB2b2lkIDAsXG5cdFx0XHR1cGxvYWR0aGluZ0hvb2s6IFwiZXJyb3JcIlxuXHRcdH0sICgpID0+IGhhbmRsZUVycm9yUmVxdWVzdCh7IHVwbG9hZGFibGUgfSkpLCBNYXRjaC5vckVsc2UoKCkgPT4gRWZmZWN0LnN1Y2NlZWQoe1xuXHRcdFx0Ym9keTogbnVsbCxcblx0XHRcdGZpYmVyOiBudWxsXG5cdFx0fSkpKTtcblx0XHRpZiAoZmliZXIpIHtcblx0XHRcdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJSdW5uaW5nIGZpYmVyIGFzIGRhZW1vblwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJoYW5kbGVEYWVtb25cIiwgaGFuZGxlRGFlbW9uKSk7XG5cdFx0XHRpZiAoaGFuZGxlRGFlbW9uID09PSBcInZvaWRcIikge30gZWxzZSBpZiAoaGFuZGxlRGFlbW9uID09PSBcImF3YWl0XCIpIHlpZWxkKiBmaWJlci5hd2FpdDtcblx0XHRcdGVsc2UgaWYgKHR5cGVvZiBoYW5kbGVEYWVtb24gPT09IFwiZnVuY3Rpb25cIikgaGFuZGxlRGFlbW9uKEVmZmVjdC5ydW5Qcm9taXNlKGZpYmVyLmF3YWl0KSk7XG5cdFx0fVxuXHRcdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJTZW5kaW5nIHJlc3BvbnNlXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImJvZHlcIiwgYm9keSkpO1xuXHRcdHJldHVybiB5aWVsZCogSHR0cFNlcnZlclJlc3BvbnNlLmpzb24oYm9keSk7XG5cdH0pLnBpcGUoRWZmZWN0LmNhdGNoVGFncyh7XG5cdFx0UGFyc2VFcnJvcjogKGUpID0+IEh0dHBTZXJ2ZXJSZXNwb25zZS5qc29uKGZvcm1hdEVycm9yKG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiSW52YWxpZCBpbnB1dFwiLFxuXHRcdFx0Y2F1c2U6IGUubWVzc2FnZVxuXHRcdH0pLCBvcHRzLnJvdXRlciksIHsgc3RhdHVzOiA0MDAgfSksXG5cdFx0VXBsb2FkVGhpbmdFcnJvcjogKGUpID0+IEh0dHBTZXJ2ZXJSZXNwb25zZS5qc29uKGZvcm1hdEVycm9yKGUsIG9wdHMucm91dGVyKSwgeyBzdGF0dXM6IGdldFN0YXR1c0NvZGVGcm9tRXJyb3IoZSkgfSlcblx0fSkpO1xuXHRjb25zdCBhcHBlbmRSZXNwb25zZUhlYWRlcnMgPSBFZmZlY3QubWFwKEh0dHBTZXJ2ZXJSZXNwb25zZS5zZXRIZWFkZXIoXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIiwgdmVyc2lvbikpO1xuXHRyZXR1cm4gSHR0cFJvdXRlci5lbXB0eS5waXBlKEh0dHBSb3V0ZXIuZ2V0KFwiKlwiLCBHRVQpLCBIdHRwUm91dGVyLnBvc3QoXCIqXCIsIFBPU1QpLCBIdHRwUm91dGVyLnVzZShhcHBlbmRSZXNwb25zZUhlYWRlcnMpKTtcbn0pLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiY3JlYXRlUmVxdWVzdEhhbmRsZXJcIikpO1xuY29uc3QgaGFuZGxlRXJyb3JSZXF1ZXN0ID0gKG9wdHMpID0+IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcblx0Y29uc3QgeyB1cGxvYWRhYmxlIH0gPSBvcHRzO1xuXHRjb25zdCByZXF1ZXN0ID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0Lkh0dHBTZXJ2ZXJSZXF1ZXN0O1xuXHRjb25zdCB7IGFwaUtleSB9ID0geWllbGQqIFVUVG9rZW47XG5cdGNvbnN0IHZlcmlmaWVkID0geWllbGQqIHZlcmlmeVNpZ25hdHVyZSh5aWVsZCogcmVxdWVzdC50ZXh0LCByZXF1ZXN0LmhlYWRlcnNbXCJ4LXVwbG9hZHRoaW5nLXNpZ25hdHVyZVwiXSA/PyBudWxsLCBhcGlLZXkpO1xuXHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKGBTaWduYXR1cmUgdmVyaWZpZWQ6ICR7dmVyaWZpZWR9YCk7XG5cdGlmICghdmVyaWZpZWQpIHtcblx0XHR5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKFwiSW52YWxpZCBzaWduYXR1cmVcIik7XG5cdFx0cmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcIkludmFsaWQgc2lnbmF0dXJlXCJcblx0XHR9KTtcblx0fVxuXHRjb25zdCByZXF1ZXN0SW5wdXQgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3Quc2NoZW1hQm9keUpzb24oUy5TdHJ1Y3Qoe1xuXHRcdGZpbGVLZXk6IFMuU3RyaW5nLFxuXHRcdGVycm9yOiBTLlN0cmluZ1xuXHR9KSk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJIYW5kbGluZyBlcnJvciBjYWxsYmFjayByZXF1ZXN0IHdpdGggaW5wdXQ6XCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImpzb25cIiwgcmVxdWVzdElucHV0KSk7XG5cdGNvbnN0IGFkYXB0ZXJBcmdzID0geWllbGQqIEFkYXB0ZXJBcmd1bWVudHM7XG5cdGNvbnN0IGZpYmVyID0geWllbGQqIEVmZmVjdC50cnlQcm9taXNlKHtcblx0XHR0cnk6IGFzeW5jICgpID0+IHVwbG9hZGFibGUub25VcGxvYWRFcnJvcih7XG5cdFx0XHQuLi5hZGFwdGVyQXJncyxcblx0XHRcdGVycm9yOiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRcdGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuXHRcdFx0XHRtZXNzYWdlOiBgVXBsb2FkIGZhaWxlZCBmb3IgJHtyZXF1ZXN0SW5wdXQuZmlsZUtleX06ICR7cmVxdWVzdElucHV0LmVycm9yfWBcblx0XHRcdH0pLFxuXHRcdFx0ZmlsZUtleTogcmVxdWVzdElucHV0LmZpbGVLZXlcblx0XHR9KSxcblx0XHRjYXRjaDogKGVycm9yKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuXHRcdFx0bWVzc2FnZTogXCJGYWlsZWQgdG8gcnVuIG9uVXBsb2FkRXJyb3JcIixcblx0XHRcdGNhdXNlOiBlcnJvclxuXHRcdH0pXG5cdH0pLnBpcGUoRWZmZWN0LnRhcEVycm9yKChlcnJvcikgPT4gRWZmZWN0LmxvZ0Vycm9yKFwiRmFpbGVkIHRvIHJ1biBvblVwbG9hZEVycm9yLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGJlIHRocm93aW5nIGVycm9ycyBoZXJlLlwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJlcnJvclwiLCBlcnJvcikpKSkucGlwZShFZmZlY3QuaWdub3JlTG9nZ2VkLCBFZmZlY3QuZm9ya0RhZW1vbik7XG5cdHJldHVybiB7XG5cdFx0Ym9keTogbnVsbCxcblx0XHRmaWJlclxuXHR9O1xufSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJoYW5kbGVFcnJvclJlcXVlc3RcIikpO1xuY29uc3QgaGFuZGxlQ2FsbGJhY2tSZXF1ZXN0ID0gKG9wdHMpID0+IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcblx0Y29uc3QgeyB1cGxvYWRhYmxlLCBmZVBhY2thZ2UsIGJlQWRhcHRlciB9ID0gb3B0cztcblx0Y29uc3QgcmVxdWVzdCA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5IdHRwU2VydmVyUmVxdWVzdDtcblx0Y29uc3QgeyBhcGlLZXkgfSA9IHlpZWxkKiBVVFRva2VuO1xuXHRjb25zdCB2ZXJpZmllZCA9IHlpZWxkKiB2ZXJpZnlTaWduYXR1cmUoeWllbGQqIHJlcXVlc3QudGV4dCwgcmVxdWVzdC5oZWFkZXJzW1wieC11cGxvYWR0aGluZy1zaWduYXR1cmVcIl0gPz8gbnVsbCwgYXBpS2V5KTtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhgU2lnbmF0dXJlIHZlcmlmaWVkOiAke3ZlcmlmaWVkfWApO1xuXHRpZiAoIXZlcmlmaWVkKSB7XG5cdFx0eWllbGQqIEVmZmVjdC5sb2dFcnJvcihcIkludmFsaWQgc2lnbmF0dXJlXCIpO1xuXHRcdHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdFx0bWVzc2FnZTogXCJJbnZhbGlkIHNpZ25hdHVyZVwiXG5cdFx0fSk7XG5cdH1cblx0Y29uc3QgcmVxdWVzdElucHV0ID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0LnNjaGVtYUJvZHlKc29uKFMuU3RydWN0KHtcblx0XHRzdGF0dXM6IFMuU3RyaW5nLFxuXHRcdGZpbGU6IFVwbG9hZGVkRmlsZURhdGEsXG5cdFx0b3JpZ2luOiBTLlN0cmluZyxcblx0XHRtZXRhZGF0YTogUy5SZWNvcmQoe1xuXHRcdFx0a2V5OiBTLlN0cmluZyxcblx0XHRcdHZhbHVlOiBTLlVua25vd25cblx0XHR9KVxuXHR9KSk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJIYW5kbGluZyBjYWxsYmFjayByZXF1ZXN0IHdpdGggaW5wdXQ6XCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImpzb25cIiwgcmVxdWVzdElucHV0KSk7XG5cdC8qKlxuXHQqIFJ1biBgLm9uVXBsb2FkQ29tcGxldGVgIGFzIGEgZGFlbW9uIHRvIHByZXZlbnQgdGhlXG5cdCogcmVxdWVzdCBmcm9tIFVUIHRvIHBvdGVudGlhbGx5IHRpbWVvdXQuXG5cdCovXG5cdGNvbnN0IGZpYmVyID0geWllbGQqIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcblx0XHRjb25zdCBhZGFwdGVyQXJncyA9IHlpZWxkKiBBZGFwdGVyQXJndW1lbnRzO1xuXHRcdGNvbnN0IHNlcnZlckRhdGEgPSB5aWVsZCogRWZmZWN0LnRyeVByb21pc2Uoe1xuXHRcdFx0dHJ5OiBhc3luYyAoKSA9PiB1cGxvYWRhYmxlLm9uVXBsb2FkQ29tcGxldGUoe1xuXHRcdFx0XHQuLi5hZGFwdGVyQXJncyxcblx0XHRcdFx0ZmlsZToge1xuXHRcdFx0XHRcdC4uLnJlcXVlc3RJbnB1dC5maWxlLFxuXHRcdFx0XHRcdGdldCB1cmwoKSB7XG5cdFx0XHRcdFx0XHRsb2dEZXByZWNhdGlvbldhcm5pbmcoXCJgZmlsZS51cmxgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGxvYWR0aGluZyB2OS4gVXNlIGBmaWxlLnVmc1VybGAgaW5zdGVhZC5cIik7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVxdWVzdElucHV0LmZpbGUudXJsO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Z2V0IGFwcFVybCgpIHtcblx0XHRcdFx0XHRcdGxvZ0RlcHJlY2F0aW9uV2FybmluZyhcImBmaWxlLmFwcFVybGAgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHVwbG9hZHRoaW5nIHY5LiBVc2UgYGZpbGUudWZzVXJsYCBpbnN0ZWFkLlwiKTtcblx0XHRcdFx0XHRcdHJldHVybiByZXF1ZXN0SW5wdXQuZmlsZS5hcHBVcmw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtZXRhZGF0YTogcmVxdWVzdElucHV0Lm1ldGFkYXRhXG5cdFx0XHR9KSxcblx0XHRcdGNhdGNoOiAoZXJyb3IpID0+IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdFx0Y29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcblx0XHRcdFx0bWVzc2FnZTogXCJGYWlsZWQgdG8gcnVuIG9uVXBsb2FkQ29tcGxldGUuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgYmUgdGhyb3dpbmcgZXJyb3JzIGhlcmUuXCIsXG5cdFx0XHRcdGNhdXNlOiBlcnJvclxuXHRcdFx0fSlcblx0XHR9KTtcblx0XHRjb25zdCBwYXlsb2FkID0ge1xuXHRcdFx0ZmlsZUtleTogcmVxdWVzdElucHV0LmZpbGUua2V5LFxuXHRcdFx0Y2FsbGJhY2tEYXRhOiBzZXJ2ZXJEYXRhID8/IG51bGxcblx0XHR9O1xuXHRcdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCInb25VcGxvYWRDb21wbGV0ZScgY2FsbGJhY2sgZmluaXNoZWQuIFNlbmRpbmcgcmVzcG9uc2UgdG8gVXBsb2FkVGhpbmc6XCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImNhbGxiYWNrRGF0YVwiLCBwYXlsb2FkKSk7XG5cdFx0Y29uc3QgaHR0cENsaWVudCA9ICh5aWVsZCogSHR0cENsaWVudC5IdHRwQ2xpZW50KS5waXBlKEh0dHBDbGllbnQuZmlsdGVyU3RhdHVzT2spO1xuXHRcdHlpZWxkKiBIdHRwQ2xpZW50UmVxdWVzdC5wb3N0KGAvY2FsbGJhY2stcmVzdWx0YCkucGlwZShIdHRwQ2xpZW50UmVxdWVzdC5wcmVwZW5kVXJsKHJlcXVlc3RJbnB1dC5vcmlnaW4pLCBIdHRwQ2xpZW50UmVxdWVzdC5zZXRIZWFkZXJzKHtcblx0XHRcdFwieC11cGxvYWR0aGluZy1hcGkta2V5XCI6IFJlZGFjdGVkLnZhbHVlKGFwaUtleSksXG5cdFx0XHRcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiB2ZXJzaW9uLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLWJlLWFkYXB0ZXJcIjogYmVBZGFwdGVyLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLWZlLXBhY2thZ2VcIjogZmVQYWNrYWdlXG5cdFx0fSksIEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlKc29uKHBheWxvYWQpLCBFZmZlY3QuZmxhdE1hcChodHRwQ2xpZW50LmV4ZWN1dGUpLCBFZmZlY3QudGFwRXJyb3IobG9nSHR0cENsaWVudEVycm9yKFwiRmFpbGVkIHRvIHJlZ2lzdGVyIGNhbGxiYWNrIHJlc3VsdFwiKSksIEVmZmVjdC5mbGF0TWFwKEh0dHBDbGllbnRSZXNwb25zZS5zY2hlbWFCb2R5SnNvbihDYWxsYmFja1Jlc3VsdFJlc3BvbnNlKSksIEVmZmVjdC50YXAoRWZmZWN0LmxvZyhcIlNlbnQgY2FsbGJhY2sgcmVzdWx0IHRvIFVwbG9hZFRoaW5nXCIpKSwgRWZmZWN0LnNjb3BlZCk7XG5cdH0pLnBpcGUoRWZmZWN0Lmlnbm9yZUxvZ2dlZCwgRWZmZWN0LmZvcmtEYWVtb24pO1xuXHRyZXR1cm4ge1xuXHRcdGJvZHk6IG51bGwsXG5cdFx0ZmliZXJcblx0fTtcbn0pLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiaGFuZGxlQ2FsbGJhY2tSZXF1ZXN0XCIpKTtcbmNvbnN0IHJ1blJvdXRlTWlkZGxld2FyZSA9IChvcHRzKSA9PiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdGNvbnN0IHsganNvbjogeyBmaWxlcywgaW5wdXQgfSwgdXBsb2FkYWJsZSB9ID0gb3B0cztcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlJ1bm5pbmcgbWlkZGxld2FyZVwiKTtcblx0Y29uc3QgYWRhcHRlckFyZ3MgPSB5aWVsZCogQWRhcHRlckFyZ3VtZW50cztcblx0Y29uc3QgbWV0YWRhdGEgPSB5aWVsZCogRWZmZWN0LnRyeVByb21pc2Uoe1xuXHRcdHRyeTogYXN5bmMgKCkgPT4gdXBsb2FkYWJsZS5taWRkbGV3YXJlKHtcblx0XHRcdC4uLmFkYXB0ZXJBcmdzLFxuXHRcdFx0aW5wdXQsXG5cdFx0XHRmaWxlc1xuXHRcdH0pLFxuXHRcdGNhdGNoOiAoZXJyb3IpID0+IGVycm9yIGluc3RhbmNlb2YgVXBsb2FkVGhpbmdFcnJvciA/IGVycm9yIDogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdFx0Y29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcblx0XHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJ1biBtaWRkbGV3YXJlXCIsXG5cdFx0XHRjYXVzZTogZXJyb3Jcblx0XHR9KVxuXHR9KTtcblx0aWYgKG1ldGFkYXRhW1VURmlsZXNdICYmIG1ldGFkYXRhW1VURmlsZXNdLmxlbmd0aCAhPT0gZmlsZXMubGVuZ3RoKSB7XG5cdFx0Y29uc3QgbXNnID0gYEV4cGVjdGVkIGZpbGVzIG92ZXJyaWRlIHRvIGhhdmUgdGhlIHNhbWUgbGVuZ3RoIGFzIG9yaWdpbmFsIGZpbGVzLCBnb3QgJHttZXRhZGF0YVtVVEZpbGVzXS5sZW5ndGh9IGJ1dCBleHBlY3RlZCAke2ZpbGVzLmxlbmd0aH1gO1xuXHRcdHlpZWxkKiBFZmZlY3QubG9nRXJyb3IobXNnKTtcblx0XHRyZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiRmlsZXMgb3ZlcnJpZGUgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aCBhcyBmaWxlc1wiLFxuXHRcdFx0Y2F1c2U6IG1zZ1xuXHRcdH0pO1xuXHR9XG5cdGNvbnN0IGZpbGVzV2l0aEN1c3RvbUlkcyA9IHlpZWxkKiBFZmZlY3QuZm9yRWFjaChmaWxlcywgKGZpbGUsIGlkeCkgPT4gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRcdGNvbnN0IHRoZWlycyA9IG1ldGFkYXRhW1VURmlsZXNdPy5baWR4XTtcblx0XHRpZiAodGhlaXJzICYmIHRoZWlycy5zaXplICE9PSBmaWxlLnNpemUpIHlpZWxkKiBFZmZlY3QubG9nV2FybmluZyhcIkZpbGUgc2l6ZSBtaXNtYXRjaC4gUmV2ZXJ0aW5nIHRvIG9yaWdpbmFsIHNpemVcIik7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IHRoZWlycz8ubmFtZSA/PyBmaWxlLm5hbWUsXG5cdFx0XHRzaXplOiBmaWxlLnNpemUsXG5cdFx0XHR0eXBlOiBmaWxlLnR5cGUsXG5cdFx0XHRjdXN0b21JZDogdGhlaXJzPy5jdXN0b21JZCxcblx0XHRcdGxhc3RNb2RpZmllZDogdGhlaXJzPy5sYXN0TW9kaWZpZWQgPz8gRGF0ZS5ub3coKVxuXHRcdH07XG5cdH0pKTtcblx0cmV0dXJuIHtcblx0XHRtZXRhZGF0YSxcblx0XHRmaWxlc1dpdGhDdXN0b21JZHMsXG5cdFx0cHJlZmVycmVkUmVnaW9uOiBtZXRhZGF0YVtVVFJlZ2lvbl1cblx0fTtcbn0pLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwicnVuUm91dGVNaWRkbGV3YXJlXCIpKTtcbmNvbnN0IGhhbmRsZVVwbG9hZEFjdGlvbiA9IChvcHRzKSA9PiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdGNvbnN0IGh0dHBDbGllbnQgPSAoeWllbGQqIEh0dHBDbGllbnQuSHR0cENsaWVudCkucGlwZShIdHRwQ2xpZW50LmZpbHRlclN0YXR1c09rKTtcblx0Y29uc3QgeyB1cGxvYWRhYmxlLCBmZVBhY2thZ2UsIGJlQWRhcHRlciwgc2x1ZyB9ID0gb3B0cztcblx0Y29uc3QganNvbiA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5zY2hlbWFCb2R5SnNvbihVcGxvYWRBY3Rpb25QYXlsb2FkKTtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkhhbmRsaW5nIHVwbG9hZCByZXF1ZXN0XCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImpzb25cIiwganNvbikpO1xuXHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUGFyc2luZyB1c2VyIGlucHV0XCIpO1xuXHRjb25zdCBwYXJzZWRJbnB1dCA9IHlpZWxkKiBFZmZlY3QudHJ5UHJvbWlzZSh7XG5cdFx0dHJ5OiAoKSA9PiBnZXRQYXJzZUZuKHVwbG9hZGFibGUuaW5wdXRQYXJzZXIpKGpzb24uaW5wdXQpLFxuXHRcdGNhdGNoOiAoZXJyb3IpID0+IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiSW52YWxpZCBpbnB1dFwiLFxuXHRcdFx0Y2F1c2U6IGVycm9yXG5cdFx0fSlcblx0fSk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJJbnB1dCBwYXJzZWQgc3VjY2Vzc2Z1bGx5XCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImlucHV0XCIsIHBhcnNlZElucHV0KSk7XG5cdGNvbnN0IHsgbWV0YWRhdGEsIGZpbGVzV2l0aEN1c3RvbUlkcywgcHJlZmVycmVkUmVnaW9uIH0gPSB5aWVsZCogcnVuUm91dGVNaWRkbGV3YXJlKHtcblx0XHRqc29uOiB7XG5cdFx0XHRpbnB1dDogcGFyc2VkSW5wdXQsXG5cdFx0XHRmaWxlczoganNvbi5maWxlc1xuXHRcdH0sXG5cdFx0dXBsb2FkYWJsZVxuXHR9KTtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlBhcnNpbmcgcm91dGUgY29uZmlnXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcInJvdXRlckNvbmZpZ1wiLCB1cGxvYWRhYmxlLnJvdXRlckNvbmZpZykpO1xuXHRjb25zdCBwYXJzZWRDb25maWcgPSB5aWVsZCogZmlsbElucHV0Um91dGVDb25maWcodXBsb2FkYWJsZS5yb3V0ZXJDb25maWcpLnBpcGUoRWZmZWN0LmNhdGNoVGFnKFwiSW52YWxpZFJvdXRlQ29uZmlnXCIsIChlcnIpID0+IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0bWVzc2FnZTogXCJJbnZhbGlkIHJvdXRlIGNvbmZpZ1wiLFxuXHRcdGNhdXNlOiBlcnJcblx0fSkpKTtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlJvdXRlIGNvbmZpZyBwYXJzZWQgc3VjY2Vzc2Z1bGx5XCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcInJvdXRlQ29uZmlnXCIsIHBhcnNlZENvbmZpZykpO1xuXHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiVmFsaWRhdGluZyBmaWxlcyBtZWV0IHRoZSBjb25maWcgcmVxdWlyZW1lbnRzXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImZpbGVzXCIsIGpzb24uZmlsZXMpKTtcblx0eWllbGQqIGFzc2VydEZpbGVzTWVldENvbmZpZyhqc29uLmZpbGVzLCBwYXJzZWRDb25maWcpLnBpcGUoRWZmZWN0Lm1hcEVycm9yKChlKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdG1lc3NhZ2U6IGBJbnZhbGlkIGNvbmZpZzogJHtlLl90YWd9YCxcblx0XHRjYXVzZTogXCJyZWFzb25cIiBpbiBlID8gZS5yZWFzb24gOiBlLm1lc3NhZ2Vcblx0fSkpKTtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkZpbGVzIHZhbGlkYXRlZC5cIik7XG5cdGNvbnN0IGZpbGVVcGxvYWRSZXF1ZXN0cyA9IHlpZWxkKiBFZmZlY3QuZm9yRWFjaChmaWxlc1dpdGhDdXN0b21JZHMsIChmaWxlKSA9PiBFZmZlY3QubWFwKG1hdGNoRmlsZVR5cGUoZmlsZSwgb2JqZWN0S2V5cyhwYXJzZWRDb25maWcpKSwgKHR5cGUpID0+ICh7XG5cdFx0bmFtZTogZmlsZS5uYW1lLFxuXHRcdHNpemU6IGZpbGUuc2l6ZSxcblx0XHR0eXBlOiBmaWxlLnR5cGUgfHwgdHlwZSxcblx0XHRsYXN0TW9kaWZpZWQ6IGZpbGUubGFzdE1vZGlmaWVkLFxuXHRcdGN1c3RvbUlkOiBmaWxlLmN1c3RvbUlkLFxuXHRcdGNvbnRlbnREaXNwb3NpdGlvbjogcGFyc2VkQ29uZmlnW3R5cGVdPy5jb250ZW50RGlzcG9zaXRpb24gPz8gXCJpbmxpbmVcIixcblx0XHRhY2w6IHBhcnNlZENvbmZpZ1t0eXBlXT8uYWNsXG5cdH0pKSkucGlwZShFZmZlY3QuY2F0Y2hUYWdzKHtcblx0XHRJbnZhbGlkRmlsZVR5cGU6IChlKSA9PiBFZmZlY3QuZGllKGUpLFxuXHRcdFVua25vd25GaWxlVHlwZTogKGUpID0+IEVmZmVjdC5kaWUoZSlcblx0fSkpO1xuXHRjb25zdCByb3V0ZU9wdGlvbnMgPSB1cGxvYWRhYmxlLnJvdXRlT3B0aW9ucztcblx0Y29uc3QgeyBhcGlLZXksIGFwcElkIH0gPSB5aWVsZCogVVRUb2tlbjtcblx0Y29uc3QgaW5nZXN0VXJsID0geWllbGQqIEluZ2VzdFVybChwcmVmZXJyZWRSZWdpb24pO1xuXHRjb25zdCBpc0RldiA9IHlpZWxkKiBJc0RldmVsb3BtZW50O1xuXHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiR2VuZXJhdGluZyBwcmVzaWduZWQgVVJMc1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJmaWxlVXBsb2FkUmVxdWVzdHNcIiwgZmlsZVVwbG9hZFJlcXVlc3RzKSwgRWZmZWN0LmFubm90YXRlTG9ncyhcImluZ2VzdFVybFwiLCBpbmdlc3RVcmwpKTtcblx0Y29uc3QgcHJlc2lnbmVkVXJscyA9IHlpZWxkKiBFZmZlY3QuZm9yRWFjaChmaWxlVXBsb2FkUmVxdWVzdHMsIChmaWxlKSA9PiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdFx0Y29uc3Qga2V5ID0geWllbGQqIGdlbmVyYXRlS2V5KGZpbGUsIGFwcElkLCByb3V0ZU9wdGlvbnMuZ2V0RmlsZUhhc2hQYXJ0cyk7XG5cdFx0Y29uc3QgdXJsID0geWllbGQqIGdlbmVyYXRlU2lnbmVkVVJMKGAke2luZ2VzdFVybH0vJHtrZXl9YCwgYXBpS2V5LCB7XG5cdFx0XHR0dGxJblNlY29uZHM6IHJvdXRlT3B0aW9ucy5wcmVzaWduZWRVUkxUVEwsXG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFwieC11dC1pZGVudGlmaWVyXCI6IGFwcElkLFxuXHRcdFx0XHRcIngtdXQtZmlsZS1uYW1lXCI6IGZpbGUubmFtZSxcblx0XHRcdFx0XCJ4LXV0LWZpbGUtc2l6ZVwiOiBmaWxlLnNpemUsXG5cdFx0XHRcdFwieC11dC1maWxlLXR5cGVcIjogZmlsZS50eXBlLFxuXHRcdFx0XHRcIngtdXQtc2x1Z1wiOiBzbHVnLFxuXHRcdFx0XHRcIngtdXQtY3VzdG9tLWlkXCI6IGZpbGUuY3VzdG9tSWQsXG5cdFx0XHRcdFwieC11dC1jb250ZW50LWRpc3Bvc2l0aW9uXCI6IGZpbGUuY29udGVudERpc3Bvc2l0aW9uLFxuXHRcdFx0XHRcIngtdXQtYWNsXCI6IGZpbGUuYWNsXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHVybCxcblx0XHRcdGtleVxuXHRcdH07XG5cdH0pLCB7IGNvbmN1cnJlbmN5OiBcInVuYm91bmRlZFwiIH0pO1xuXHRjb25zdCBzZXJ2ZXJSZXEgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3QuSHR0cFNlcnZlclJlcXVlc3Q7XG5cdGNvbnN0IHJlcXVlc3RVcmwgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3QudG9VUkwoc2VydmVyUmVxKTtcblx0Y29uc3QgZGV2SG9va1JlcXVlc3QgPSB5aWVsZCogQ29uZmlnLnN0cmluZyhcImNhbGxiYWNrVXJsXCIpLnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KHJlcXVlc3RVcmwub3JpZ2luICsgcmVxdWVzdFVybC5wYXRobmFtZSksIEVmZmVjdC5tYXAoKHVybCkgPT4gSHR0cENsaWVudFJlcXVlc3QucG9zdCh1cmwpLnBpcGUoSHR0cENsaWVudFJlcXVlc3QuYXBwZW5kVXJsUGFyYW0oXCJzbHVnXCIsIHNsdWcpKSkpO1xuXHRjb25zdCBtZXRhZGF0YVJlcXVlc3QgPSBIdHRwQ2xpZW50UmVxdWVzdC5wb3N0KFwiL3JvdXRlLW1ldGFkYXRhXCIpLnBpcGUoSHR0cENsaWVudFJlcXVlc3QucHJlcGVuZFVybChpbmdlc3RVcmwpLCBIdHRwQ2xpZW50UmVxdWVzdC5zZXRIZWFkZXJzKHtcblx0XHRcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiOiBSZWRhY3RlZC52YWx1ZShhcGlLZXkpLFxuXHRcdFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IHZlcnNpb24sXG5cdFx0XCJ4LXVwbG9hZHRoaW5nLWJlLWFkYXB0ZXJcIjogYmVBZGFwdGVyLFxuXHRcdFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IGZlUGFja2FnZVxuXHR9KSwgSHR0cENsaWVudFJlcXVlc3QuYm9keUpzb24oe1xuXHRcdGZpbGVLZXlzOiBwcmVzaWduZWRVcmxzLm1hcCgoeyBrZXkgfSkgPT4ga2V5KSxcblx0XHRtZXRhZGF0YSxcblx0XHRpc0Rldixcblx0XHRjYWxsYmFja1VybDogZGV2SG9va1JlcXVlc3QudXJsLFxuXHRcdGNhbGxiYWNrU2x1Zzogc2x1Zyxcblx0XHRhd2FpdFNlcnZlckRhdGE6IHJvdXRlT3B0aW9ucy5hd2FpdFNlcnZlckRhdGEgPz8gdHJ1ZVxuXHR9KSwgRWZmZWN0LmZsYXRNYXAoaHR0cENsaWVudC5leGVjdXRlKSk7XG5cdGNvbnN0IGhhbmRsZURldlN0cmVhbUVycm9yID0gRWZmZWN0LmZuKFwiaGFuZGxlRGV2U3RyZWFtRXJyb3JcIikoZnVuY3Rpb24qIChlcnIsIGNodW5rKSB7XG5cdFx0Y29uc3Qgc2NoZW1hID0gUy5wYXJzZUpzb24oUy5TdHJ1Y3QoeyBmaWxlOiBVcGxvYWRlZEZpbGVEYXRhIH0pKTtcblx0XHRjb25zdCBwYXJzZWRDaHVuayA9IHlpZWxkKiBTLmRlY29kZVVua25vd24oc2NoZW1hKShjaHVuayk7XG5cdFx0Y29uc3Qga2V5ID0gcGFyc2VkQ2h1bmsuZmlsZS5rZXk7XG5cdFx0eWllbGQqIEVmZmVjdC5sb2dFcnJvcihcIkZhaWxlZCB0byBmb3J3YXJkIGNhbGxiYWNrIHJlcXVlc3QgZnJvbSBkZXYgc3RyZWFtXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyh7XG5cdFx0XHRmaWxlS2V5OiBrZXksXG5cdFx0XHRlcnJvcjogZXJyLm1lc3NhZ2Vcblx0XHR9KSk7XG5cdFx0Y29uc3QgaHR0cFJlc3BvbnNlID0geWllbGQqIEh0dHBDbGllbnRSZXF1ZXN0LnBvc3QoXCIvY2FsbGJhY2stcmVzdWx0XCIpLnBpcGUoSHR0cENsaWVudFJlcXVlc3QucHJlcGVuZFVybChpbmdlc3RVcmwpLCBIdHRwQ2xpZW50UmVxdWVzdC5zZXRIZWFkZXJzKHtcblx0XHRcdFwieC11cGxvYWR0aGluZy1hcGkta2V5XCI6IFJlZGFjdGVkLnZhbHVlKGFwaUtleSksXG5cdFx0XHRcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiB2ZXJzaW9uLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLWJlLWFkYXB0ZXJcIjogYmVBZGFwdGVyLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLWZlLXBhY2thZ2VcIjogZmVQYWNrYWdlXG5cdFx0fSksIEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlKc29uKHtcblx0XHRcdGZpbGVLZXk6IGtleSxcblx0XHRcdGVycm9yOiBgRmFpbGVkIHRvIGZvcndhcmQgY2FsbGJhY2sgcmVxdWVzdCBmcm9tIGRldiBzdHJlYW06ICR7ZXJyLm1lc3NhZ2V9YFxuXHRcdH0pLCBFZmZlY3QuZmxhdE1hcChodHRwQ2xpZW50LmV4ZWN1dGUpKTtcblx0XHR5aWVsZCogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiUmVwb3J0ZWQgY2FsbGJhY2sgZXJyb3IgdG8gVXBsb2FkVGhpbmdcIikoaHR0cFJlc3BvbnNlKTtcblx0fSk7XG5cdGNvbnN0IGZpYmVyID0geWllbGQqIEVmZmVjdC5pZihpc0Rldiwge1xuXHRcdG9uVHJ1ZTogKCkgPT4gbWV0YWRhdGFSZXF1ZXN0LnBpcGUoRWZmZWN0LnRhcEJvdGgoe1xuXHRcdFx0b25TdWNjZXNzOiBsb2dIdHRwQ2xpZW50UmVzcG9uc2UoXCJSZWdpc3RlcmVkIG1ldGFkYXRhXCIsIHsgbWl4aW46IFwiTm9uZVwiIH0pLFxuXHRcdFx0b25GYWlsdXJlOiBsb2dIdHRwQ2xpZW50RXJyb3IoXCJGYWlsZWQgdG8gcmVnaXN0ZXIgbWV0YWRhdGFcIilcblx0XHR9KSwgSHR0cENsaWVudFJlc3BvbnNlLnN0cmVhbSwgaGFuZGxlSnNvbkxpbmVTdHJlYW0oTWV0YWRhdGFGZXRjaFN0cmVhbVBhcnQsIChjaHVuaykgPT4gZGV2SG9va1JlcXVlc3QucGlwZShIdHRwQ2xpZW50UmVxdWVzdC5zZXRIZWFkZXJzKHtcblx0XHRcdFwidXBsb2FkdGhpbmctaG9va1wiOiBjaHVuay5ob29rLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLXNpZ25hdHVyZVwiOiBjaHVuay5zaWduYXR1cmVcblx0XHR9KSwgSHR0cENsaWVudFJlcXVlc3Quc2V0Qm9keShIdHRwQm9keS50ZXh0KGNodW5rLnBheWxvYWQsIFwiYXBwbGljYXRpb24vanNvblwiKSksIGh0dHBDbGllbnQuZXhlY3V0ZSwgRWZmZWN0LnRhcChsb2dIdHRwQ2xpZW50UmVzcG9uc2UoXCJTdWNjZXNzZnVsbHkgZm9yd2FyZGVkIGNhbGxiYWNrIHJlcXVlc3QgZnJvbSBkZXYgc3RyZWFtXCIpKSwgRWZmZWN0LmNhdGNoVGFnKFwiUmVzcG9uc2VFcnJvclwiLCAoZXJyKSA9PiBoYW5kbGVEZXZTdHJlYW1FcnJvcihlcnIsIGNodW5rLnBheWxvYWQpKSwgRWZmZWN0LmFubm90YXRlTG9ncyhjaHVuayksIEVmZmVjdC5hc1ZvaWQsIEVmZmVjdC5pZ25vcmVMb2dnZWQsIEVmZmVjdC5zY29wZWQpKSksXG5cdFx0b25GYWxzZTogKCkgPT4gbWV0YWRhdGFSZXF1ZXN0LnBpcGUoRWZmZWN0LnRhcEJvdGgoe1xuXHRcdFx0b25TdWNjZXNzOiBsb2dIdHRwQ2xpZW50UmVzcG9uc2UoXCJSZWdpc3RlcmVkIG1ldGFkYXRhXCIpLFxuXHRcdFx0b25GYWlsdXJlOiBsb2dIdHRwQ2xpZW50RXJyb3IoXCJGYWlsZWQgdG8gcmVnaXN0ZXIgbWV0YWRhdGFcIilcblx0XHR9KSwgRWZmZWN0LmZsYXRNYXAoSHR0cENsaWVudFJlc3BvbnNlLnNjaGVtYUJvZHlKc29uKE1ldGFkYXRhRmV0Y2hSZXNwb25zZSkpLCBFZmZlY3Quc2NvcGVkKVxuXHR9KS5waXBlKEVmZmVjdC5mb3JrRGFlbW9uKTtcblx0Y29uc3QgcHJlc2lnbmVkcyA9IHByZXNpZ25lZFVybHMubWFwKChwLCBpKSA9PiAoe1xuXHRcdHVybDogcC51cmwsXG5cdFx0a2V5OiBwLmtleSxcblx0XHRuYW1lOiBmaWxlVXBsb2FkUmVxdWVzdHNbaV0ubmFtZSxcblx0XHRjdXN0b21JZDogZmlsZVVwbG9hZFJlcXVlc3RzW2ldLmN1c3RvbUlkID8/IG51bGxcblx0fSkpO1xuXHR5aWVsZCogRWZmZWN0LmxvZ0luZm8oXCJTZW5kaW5nIHByZXNpZ25lZCBVUkxzIHRvIGNsaWVudFwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJwcmVzaWduZWRVcmxzXCIsIHByZXNpZ25lZHMpKTtcblx0cmV0dXJuIHtcblx0XHRib2R5OiBwcmVzaWduZWRzLFxuXHRcdGZpYmVyXG5cdH07XG59KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImhhbmRsZVVwbG9hZEFjdGlvblwiKSk7XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvdXBsb2FkLWJ1aWxkZXIudHNcbmZ1bmN0aW9uIGludGVybmFsQ3JlYXRlQnVpbGRlcihpbml0RGVmID0ge30pIHtcblx0Y29uc3QgX2RlZiA9IHtcblx0XHQkdHlwZXM6IHt9LFxuXHRcdHJvdXRlckNvbmZpZzogeyBpbWFnZTogeyBtYXhGaWxlU2l6ZTogXCI0TUJcIiB9IH0sXG5cdFx0cm91dGVPcHRpb25zOiB7IGF3YWl0U2VydmVyRGF0YTogdHJ1ZSB9LFxuXHRcdGlucHV0UGFyc2VyOiB7XG5cdFx0XHRwYXJzZUFzeW5jOiAoKSA9PiBQcm9taXNlLnJlc29sdmUodm9pZCAwKSxcblx0XHRcdF9pbnB1dDogdm9pZCAwLFxuXHRcdFx0X291dHB1dDogdm9pZCAwXG5cdFx0fSxcblx0XHRtaWRkbGV3YXJlOiAoKSA9PiAoe30pLFxuXHRcdG9uVXBsb2FkRXJyb3I6ICgpID0+IHt9LFxuXHRcdG9uVXBsb2FkQ29tcGxldGU6ICgpID0+IHZvaWQgMCxcblx0XHRlcnJvckZvcm1hdHRlcjogaW5pdERlZi5lcnJvckZvcm1hdHRlciA/PyBkZWZhdWx0RXJyb3JGb3JtYXR0ZXIsXG5cdFx0Li4uaW5pdERlZlxuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdGlucHV0KHVzZXJQYXJzZXIpIHtcblx0XHRcdHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuXHRcdFx0XHQuLi5fZGVmLFxuXHRcdFx0XHRpbnB1dFBhcnNlcjogdXNlclBhcnNlclxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRtaWRkbGV3YXJlKHVzZXJNaWRkbGV3YXJlKSB7XG5cdFx0XHRyZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcblx0XHRcdFx0Li4uX2RlZixcblx0XHRcdFx0bWlkZGxld2FyZTogdXNlck1pZGRsZXdhcmVcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0b25VcGxvYWRDb21wbGV0ZSh1c2VyVXBsb2FkQ29tcGxldGUpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdC4uLl9kZWYsXG5cdFx0XHRcdG9uVXBsb2FkQ29tcGxldGU6IHVzZXJVcGxvYWRDb21wbGV0ZVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdG9uVXBsb2FkRXJyb3IodXNlck9uVXBsb2FkRXJyb3IpIHtcblx0XHRcdHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuXHRcdFx0XHQuLi5fZGVmLFxuXHRcdFx0XHRvblVwbG9hZEVycm9yOiB1c2VyT25VcGxvYWRFcnJvclxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xufVxuLyoqXG4qIENyZWF0ZSBhIGJ1aWxkZXIgZm9yIHlvdXIgYmFja2VuZCBhZGFwdGVyLlxuKiBSZWZlciB0byB0aGUgZXhpc3RpbmcgYWRhcHRlcnMgZm9yIGV4YW1wbGVzIG9uIGhvdyB0byB1c2UgdGhpcyBmdW5jdGlvbi5cbiogQHB1YmxpY1xuKlxuKiBAcGFyYW0gb3B0cyAtIE9wdGlvbnMgZm9yIHRoZSBidWlsZGVyXG4qIEByZXR1cm5zIEEgZmlsZSByb3V0ZSBidWlsZGVyIGZvciBtYWtpbmcgVXBsb2FkVGhpbmcgZmlsZSByb3V0ZXNcbiovXG5mdW5jdGlvbiBjcmVhdGVCdWlsZGVyKG9wdHMpIHtcblx0cmV0dXJuIChpbnB1dCwgY29uZmlnKSA9PiB7XG5cdFx0cmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG5cdFx0XHRyb3V0ZXJDb25maWc6IGlucHV0LFxuXHRcdFx0cm91dGVPcHRpb25zOiBjb25maWcgPz8ge30sXG5cdFx0XHQuLi5vcHRzXG5cdFx0fSk7XG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQWRhcHRlckFyZ3VtZW50cywgQXBpVXJsLCBJbmdlc3RVcmwsIFVURmlsZXMsIFVUUmVnaW9uLCBVVFRva2VuLCBVZnNBcHBJZExvY2F0aW9uLCBVZnNIb3N0LCBjb25maWdQcm92aWRlciwgY3JlYXRlQnVpbGRlciwgY3JlYXRlUmVxdWVzdEhhbmRsZXIsIGV4dHJhY3RSb3V0ZXJDb25maWcsIGxvZ0h0dHBDbGllbnRFcnJvciwgbG9nSHR0cENsaWVudFJlc3BvbnNlLCBtYWtlQWRhcHRlckhhbmRsZXIsIG1ha2VSdW50aW1lIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGxvYWQtYnVpbGRlci1CbEZPQW5zdi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/upload-builder-BlFOAnsv.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/next/index.js":
/*!************************************************!*\
  !*** ./node_modules/uploadthing/next/index.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTFiles: () => (/* reexport safe */ _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_0__.UTFiles),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing),\n/* harmony export */   experimental_UTRegion: () => (/* reexport safe */ _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_0__.UTRegion)\n/* harmony export */ });\n/* harmony import */ var _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/upload-builder-BlFOAnsv.js */ \"(rsc)/./node_modules/uploadthing/dist/upload-builder-BlFOAnsv.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n\n\n\n\n\n\n//#region src/next.ts\nconst createUploadthing = (opts) => (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_0__.createBuilder)(opts);\nconst createRouteHandler = (opts) => {\n\tconst handler = (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_0__.makeAdapterHandler)((req) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed({ req }), (req) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed(req), opts, \"nextjs-app\");\n\treturn {\n\t\tPOST: handler,\n\t\tGET: handler\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvbmV4dC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBcUM7QUFDSztBQUNFO0FBQzhEO0FBQ2xFOztBQUV4QztBQUNBLG9DQUFvQywrRUFBYTtBQUNqRDtBQUNBLGlCQUFpQixvRkFBa0IsVUFBVSxrREFBYyxHQUFHLEtBQUssWUFBWSxrREFBYztBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzZGO0FBQzdGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmlkd2lubmVyYWkvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvbmV4dC9pbmRleC5qcz80MGQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIi4uL2Rpc3QvcGFja2FnZS1EcFNjcHZUQS5qc1wiO1xuaW1wb3J0IFwiLi4vZGlzdC9kZXByZWNhdGlvbnMtcExtdzZZdGQuanNcIjtcbmltcG9ydCBcIi4uL2Rpc3Qvc2hhcmVkLXNjaGVtYXMtQm1HNUFSb1guanNcIjtcbmltcG9ydCB7IFVURmlsZXMsIFVUUmVnaW9uLCBjcmVhdGVCdWlsZGVyLCBtYWtlQWRhcHRlckhhbmRsZXIgfSBmcm9tIFwiLi4vZGlzdC91cGxvYWQtYnVpbGRlci1CbEZPQW5zdi5qc1wiO1xuaW1wb3J0ICogYXMgRWZmZWN0IGZyb20gXCJlZmZlY3QvRWZmZWN0XCI7XG5cbi8vI3JlZ2lvbiBzcmMvbmV4dC50c1xuY29uc3QgY3JlYXRlVXBsb2FkdGhpbmcgPSAob3B0cykgPT4gY3JlYXRlQnVpbGRlcihvcHRzKTtcbmNvbnN0IGNyZWF0ZVJvdXRlSGFuZGxlciA9IChvcHRzKSA9PiB7XG5cdGNvbnN0IGhhbmRsZXIgPSBtYWtlQWRhcHRlckhhbmRsZXIoKHJlcSkgPT4gRWZmZWN0LnN1Y2NlZWQoeyByZXEgfSksIChyZXEpID0+IEVmZmVjdC5zdWNjZWVkKHJlcSksIG9wdHMsIFwibmV4dGpzLWFwcFwiKTtcblx0cmV0dXJuIHtcblx0XHRQT1NUOiBoYW5kbGVyLFxuXHRcdEdFVDogaGFuZGxlclxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBVVEZpbGVzLCBjcmVhdGVSb3V0ZUhhbmRsZXIsIGNyZWF0ZVVwbG9hZHRoaW5nLCBVVFJlZ2lvbiBhcyBleHBlcmltZW50YWxfVVRSZWdpb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/next/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/server/index.js":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/server/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTApi: () => (/* binding */ UTApi),\n/* harmony export */   UTFile: () => (/* binding */ UTFile),\n/* harmony export */   UTFiles: () => (/* reexport safe */ _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UTFiles),\n/* harmony export */   UploadThingError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError),\n/* harmony export */   createBuilder: () => (/* reexport safe */ _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.createBuilder),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing),\n/* harmony export */   experimental_UTRegion: () => (/* reexport safe */ _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UTRegion),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig$1),\n/* harmony export */   makeAdapterHandler: () => (/* reexport safe */ _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.makeAdapterHandler)\n/* harmony export */ });\n/* harmony import */ var _dist_package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dist/package-DpScpvTA.js */ \"(rsc)/./node_modules/uploadthing/dist/package-DpScpvTA.js\");\n/* harmony import */ var _dist_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dist/deprecations-pLmw6Ytd.js */ \"(rsc)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js\");\n/* harmony import */ var _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dist/upload-builder-BlFOAnsv.js */ \"(rsc)/./node_modules/uploadthing/dist/upload-builder-BlFOAnsv.js\");\n/* harmony import */ var effect_Array__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! effect/Array */ \"(rsc)/./node_modules/effect/dist/esm/Array.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var effect_Function__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! effect/Function */ \"(rsc)/./node_modules/effect/dist/esm/Function.js\");\n/* harmony import */ var effect_Predicate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! effect/Predicate */ \"(rsc)/./node_modules/effect/dist/esm/Predicate.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @effect/platform/HttpClient */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @effect/platform/HttpClientRequest */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var _effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @effect/platform/HttpClientResponse */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpIncomingMessage.js\");\n/* harmony import */ var effect_Redacted__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! effect/Redacted */ \"(rsc)/./node_modules/effect/dist/esm/Redacted.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! effect/Cause */ \"(rsc)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var _uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/mime-types */ \"(rsc)/./node_modules/@uploadthing/mime-types/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/sdk/ut-file.ts\n/**\n* Extension of the Blob class that simplifies setting the `name` and `customId` properties,\n* similar to the built-in File class from Node > 20.\n*/\nvar UTFile = class extends Blob {\n\tname;\n\tlastModified;\n\tcustomId;\n\tconstructor(parts, name, options) {\n\t\tconst optionsWithDefaults = {\n\t\t\t...options,\n\t\t\ttype: options?.type ?? ((0,_uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_0__.lookup)(name) || \"application/octet-stream\"),\n\t\t\tlastModified: options?.lastModified ?? Date.now()\n\t\t};\n\t\tsuper(parts, optionsWithDefaults);\n\t\tthis.name = name;\n\t\tthis.customId = optionsWithDefaults.customId;\n\t\tthis.lastModified = optionsWithDefaults.lastModified;\n\t}\n};\n\n//#endregion\n//#region src/_internal/upload-server.ts\nconst uploadWithoutProgress = (file, presigned) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\tconst formData = new FormData();\n\tformData.append(\"file\", file);\n\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.filterStatusOk);\n\tconst json = yield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.put(presigned.url).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.bodyFormData(formData), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.setHeader(\"Range\", \"bytes=0-\"), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.setHeader(\"x-uploadthing-version\", _dist_package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_4__.version), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tapError((0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.logHttpClientError)(\"Failed to upload file\")), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.mapError((e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\tcode: \"UPLOAD_FAILED\",\n\t\tmessage: \"Failed to upload file\",\n\t\tcause: e\n\t})), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.andThen((_) => _.json), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.andThen(effect_Function__WEBPACK_IMPORTED_MODULE_7__.unsafeCoerce), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.scoped);\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_1__.logDebug(`File ${file.name} uploaded successfully`).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"json\", json));\n\treturn {\n\t\t...json,\n\t\tget url() {\n\t\t\t(0,_dist_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_8__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\t\treturn json.url;\n\t\t},\n\t\tget appUrl() {\n\t\t\t(0,_dist_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_8__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\t\treturn json.appUrl;\n\t\t}\n\t};\n});\n\n//#endregion\n//#region src/sdk/utils.ts\nfunction guardServerOnly() {\n\tif (typeof window !== \"undefined\") throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\tmessage: \"The `utapi` can only be used on the server.\"\n\t});\n}\nconst downloadFile = (_url) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\tlet url = effect_Predicate__WEBPACK_IMPORTED_MODULE_9__.isRecord(_url) ? _url.url : _url;\n\tif (typeof url === \"string\") {\n\t\tif (url.startsWith(\"data:\")) return yield* effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Please use uploadFiles() for data URLs. uploadFilesFromUrl() is intended for use with remote URLs only.\",\n\t\t\tdata: void 0\n\t\t});\n\t}\n\turl = new URL(url);\n\tconst { name = url.pathname.split(\"/\").pop() ?? \"unknown-filename\", customId = void 0 } = effect_Predicate__WEBPACK_IMPORTED_MODULE_9__.isRecord(_url) ? _url : {};\n\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.filterStatusOk);\n\tconst arrayBuffer = yield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.get(url).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.modify({ headers: {} }), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_1__.flatMap((_) => _.arrayBuffer), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.mapError((cause) => {\n\t\treturn {\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: `Failed to download requested file: ${cause.message}`,\n\t\t\tdata: cause.toJSON()\n\t\t};\n\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.scoped);\n\treturn new UTFile([arrayBuffer], name, {\n\t\tcustomId,\n\t\tlastModified: Date.now()\n\t});\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"downloadFile\"));\nconst generatePresignedUrl = (file, cd, acl) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\tconst { apiKey, appId } = yield* _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UTToken;\n\tconst baseUrl = yield* (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.IngestUrl)(void 0);\n\tconst key = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateKey)(file, appId);\n\tconst url = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateSignedURL)(`${baseUrl}/${key}`, apiKey, { data: {\n\t\t\"x-ut-identifier\": appId,\n\t\t\"x-ut-file-name\": file.name,\n\t\t\"x-ut-file-size\": file.size,\n\t\t\"x-ut-file-type\": file.type,\n\t\t\"x-ut-custom-id\": file.customId,\n\t\t\"x-ut-content-disposition\": cd,\n\t\t\"x-ut-acl\": acl\n\t} });\n\treturn {\n\t\turl,\n\t\tkey\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"generatePresignedUrl\"));\nconst uploadFile = (file, opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\tconst presigned = yield* generatePresignedUrl(file, opts.contentDisposition ?? \"inline\", opts.acl).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"UploadThingError\", (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError.toObject(e))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ConfigError\", () => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail({\n\t\tcode: \"INVALID_SERVER_CONFIG\",\n\t\tmessage: \"Failed to generate presigned URL\"\n\t})));\n\tconst response = yield* uploadWithoutProgress(file, presigned).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"UploadThingError\", (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError.toObject(e))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ResponseError\", (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail({\n\t\tcode: \"UPLOAD_FAILED\",\n\t\tmessage: \"Failed to upload file\",\n\t\tdata: e.toJSON()\n\t})));\n\treturn {\n\t\tkey: presigned.key,\n\t\turl: response.url,\n\t\tappUrl: response.appUrl,\n\t\tufsUrl: response.ufsUrl,\n\t\tlastModified: file.lastModified ?? Date.now(),\n\t\tname: file.name,\n\t\tsize: file.size,\n\t\ttype: file.type,\n\t\tcustomId: file.customId ?? null,\n\t\tfileHash: response.fileHash\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"uploadFile\"));\n\n//#endregion\n//#region src/sdk/index.ts\nvar UTApi = class {\n\tfetch;\n\tdefaultKeyType;\n\truntime;\n\topts;\n\tconstructor(options) {\n\t\tguardServerOnly();\n\t\tthis.opts = options ?? {};\n\t\tthis.fetch = this.opts.fetch ?? globalThis.fetch;\n\t\tthis.defaultKeyType = this.opts.defaultKeyType ?? \"fileKey\";\n\t\tthis.runtime = (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.makeRuntime)(this.fetch, this.opts);\n\t}\n\trequestUploadThing = (pathname, body, responseSchema) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(this, function* () {\n\t\tconst { apiKey } = yield* _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UTToken;\n\t\tconst baseUrl = yield* _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.ApiUrl;\n\t\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.filterStatusOk);\n\t\treturn yield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.post(pathname).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.prependUrl(baseUrl), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.bodyUnsafeJson(body), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.setHeaders({\n\t\t\t\"x-uploadthing-version\": _dist_package_DpScpvTA_js__WEBPACK_IMPORTED_MODULE_4__.version,\n\t\t\t\"x-uploadthing-be-adapter\": \"server-sdk\",\n\t\t\t\"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_10__.value(apiKey)\n\t\t}), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tapBoth({\n\t\t\tonSuccess: (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.logHttpClientResponse)(\"UploadThing API Response\"),\n\t\t\tonFailure: (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.logHttpClientError)(\"Failed to request UploadThing API\")\n\t\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.flatMap(_effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_11__.schemaBodyJson(responseSchema)), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.scoped);\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ConfigError\", (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\tcode: \"INVALID_SERVER_CONFIG\",\n\t\tmessage: \"There was an error with the server configuration. More info can be found on this error's `cause` property\",\n\t\tcause: e\n\t})), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"utapi.#requestUploadThing\"));\n\texecuteAsync = async (program, signal) => {\n\t\tconst exit = await program.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"utapi.#executeAsync\"), (e) => this.runtime.runPromiseExit(e, signal ? { signal } : void 0));\n\t\tif (exit._tag === \"Failure\") throw effect_Cause__WEBPACK_IMPORTED_MODULE_12__.squash(exit.cause);\n\t\treturn exit.value;\n\t};\n\tuploadFiles(files, opts) {\n\t\tguardServerOnly();\n\t\tconst concurrency = opts?.concurrency ?? 1;\n\t\tif (concurrency < 1 || concurrency > 25) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"concurrency must be a positive integer between 1 and 25\"\n\t\t});\n\t\tconst program = effect_Effect__WEBPACK_IMPORTED_MODULE_1__.forEach(effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(files), (file) => uploadFile(file, opts ?? {}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.match({\n\t\t\tonSuccess: (data) => ({\n\t\t\t\tdata,\n\t\t\t\terror: null\n\t\t\t}),\n\t\t\tonFailure: (error) => ({\n\t\t\t\tdata: null,\n\t\t\t\terror\n\t\t\t})\n\t\t})), { concurrency }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.map((ups) => Array.isArray(files) ? ups : ups[0]), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tap((res) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.logDebug(\"Finished uploading\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"uploadResult\", res))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"uploadFiles\"));\n\t\treturn this.executeAsync(program, opts?.signal);\n\t}\n\tuploadFilesFromUrl(urls, opts) {\n\t\tguardServerOnly();\n\t\tconst concurrency = opts?.concurrency ?? 1;\n\t\tif (concurrency < 1 || concurrency > 25) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"concurrency must be a positive integer between 1 and 25\"\n\t\t});\n\t\tconst program = effect_Effect__WEBPACK_IMPORTED_MODULE_1__.forEach(effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(urls), (url) => downloadFile(url).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.flatMap((file) => uploadFile(file, opts ?? {})), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.match({\n\t\t\tonSuccess: (data) => ({\n\t\t\t\tdata,\n\t\t\t\terror: null\n\t\t\t}),\n\t\t\tonFailure: (error) => ({\n\t\t\t\tdata: null,\n\t\t\t\terror\n\t\t\t})\n\t\t})), { concurrency }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.map((ups) => Array.isArray(urls) ? ups : ups[0]), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tap((res) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.logDebug(\"Finished uploading\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"uploadResult\", res))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"uploadFiles\")).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"uploadFilesFromUrl\"));\n\t\treturn this.executeAsync(program, opts?.signal);\n\t}\n\t/**\n\t* Request to delete files from UploadThing storage.\n\t* @param {string | string[]} fileKeys\n\t*\n\t* @example\n\t* await deleteFiles(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n\t*\n\t* @example\n\t* await deleteFiles([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n\t*\n\t* @example\n\t* await deleteFiles(\"myCustomIdentifier\", { keyType: \"customId\" })\n\t*/\n\tdeleteFiles = async (keys, opts) => {\n\t\tguardServerOnly();\n\t\tconst { keyType = this.defaultKeyType } = opts ?? {};\n\t\tclass DeleteFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"DeleteFileResponse\")({\n\t\t\tsuccess: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Boolean,\n\t\t\tdeletedCount: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number\n\t\t}) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/deleteFiles\", keyType === \"fileKey\" ? { fileKeys: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys) } : { customIds: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys) }, DeleteFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"deleteFiles\")));\n\t};\n\t/**\n\t* Request file URLs from UploadThing storage.\n\t* @param {string | string[]} fileKeys\n\t*\n\t* @example\n\t* const data = await getFileUrls(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n\t* console.log(data); // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\"}]\n\t*\n\t* @example\n\t* const data = await getFileUrls([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n\t* console.log(data) // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\" },{key: \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\", url: \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"}]\n\t*\n\t* @deprecated - See https://docs.uploadthing.com/working-with-files#accessing-files for info how to access files\n\t*/\n\tgetFileUrls = async (keys, opts) => {\n\t\tguardServerOnly();\n\t\tconst { keyType = this.defaultKeyType } = opts ?? {};\n\t\tclass GetFileUrlResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"GetFileUrlResponse\")({ data: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Struct({\n\t\t\tkey: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\turl: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String\n\t\t})) }) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/getFileUrl\", keyType === \"fileKey\" ? { fileKeys: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys) } : { customIds: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys) }, GetFileUrlResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"getFileUrls\")));\n\t};\n\t/**\n\t* Request file list from UploadThing storage.\n\t* @param {object} opts\n\t* @param {number} opts.limit The maximum number of files to return\n\t* @param {number} opts.offset The number of files to skip\n\t*\n\t* @example\n\t* const data = await listFiles({ limit: 1 });\n\t* console.log(data); // { key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", id: \"2e0fdb64-9957-4262-8e45-f372ba903ac8\" }\n\t*/\n\tlistFiles = async (opts) => {\n\t\tguardServerOnly();\n\t\tclass ListFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"ListFileResponse\")({\n\t\t\thasMore: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Boolean,\n\t\t\tfiles: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Struct({\n\t\t\t\tid: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\t\tcustomId: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String),\n\t\t\t\tkey: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\t\tname: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\t\tsize: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number,\n\t\t\t\tstatus: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Literal(\"Deletion Pending\", \"Failed\", \"Uploaded\", \"Uploading\"),\n\t\t\t\tuploadedAt: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number\n\t\t\t}))\n\t\t}) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/listFiles\", { ...opts }, ListFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"listFiles\")));\n\t};\n\trenameFiles = async (updates) => {\n\t\tguardServerOnly();\n\t\tclass RenameFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"RenameFileResponse\")({ success: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Boolean }) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/renameFiles\", { updates: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(updates) }, RenameFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"renameFiles\")));\n\t};\n\tgetUsageInfo = async () => {\n\t\tguardServerOnly();\n\t\tclass GetUsageInfoResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"GetUsageInfoResponse\")({\n\t\t\ttotalBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number,\n\t\t\tappTotalBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number,\n\t\t\tfilesUploaded: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number,\n\t\t\tlimitBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number\n\t\t}) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/getUsageInfo\", {}, GetUsageInfoResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"getUsageInfo\")));\n\t};\n\t/**\n\t* Generate a presigned url for a private file\n\t* Unlike {@link getSignedURL}, this method does not make a fetch request to the UploadThing API\n\t* and is the recommended way to generate a presigned url for a private file.\n\t**/\n\tgenerateSignedURL = async (key, opts) => {\n\t\tguardServerOnly();\n\t\tconst expiresIn = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.parseTimeToSeconds)(opts?.expiresIn ?? \"5 minutes\");\n\t\tif (opts?.expiresIn && isNaN(expiresIn)) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n\t\t});\n\t\tif (expiresIn > 86400 * 7) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"expiresIn must be less than 7 days (604800 seconds).\"\n\t\t});\n\t\tconst program = effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\t\t\tconst { apiKey, appId } = yield* _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UTToken;\n\t\t\tconst appIdLocation = yield* _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UfsAppIdLocation;\n\t\t\tconst ufsHost = yield* _dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.UfsHost;\n\t\t\tconst proto = ufsHost.includes(\"local\") ? \"http\" : \"https\";\n\t\t\tconst urlBase = appIdLocation === \"subdomain\" ? `${proto}://${appId}.${ufsHost}/f/${key}` : `${proto}://${ufsHost}/a/${appId}/${key}`;\n\t\t\tconst ufsUrl = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateSignedURL)(urlBase, apiKey, { ttlInSeconds: expiresIn });\n\t\t\treturn { ufsUrl };\n\t\t});\n\t\treturn await this.executeAsync(program.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ConfigError\", (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"INVALID_SERVER_CONFIG\",\n\t\t\tmessage: \"There was an error with the server configuration. More info can be found on this error's `cause` property\",\n\t\t\tcause: e\n\t\t})), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"generateSignedURL\")));\n\t};\n\t/**\n\t* Request a presigned url for a private file(s)\n\t* @remarks This method is no longer recommended as it makes a fetch\n\t* request to the UploadThing API which incurs redundant latency. It\n\t* will be deprecated in UploadThing v8 and removed in UploadThing v9.\n\t*\n\t* @see {@link generateSignedURL} for a more efficient way to generate a presigned url\n\t**/\n\tgetSignedURL = async (key, opts) => {\n\t\tguardServerOnly();\n\t\tconst expiresIn = opts?.expiresIn ? (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.parseTimeToSeconds)(opts.expiresIn) : void 0;\n\t\tconst { keyType = this.defaultKeyType } = opts ?? {};\n\t\tif (opts?.expiresIn && isNaN(expiresIn)) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n\t\t});\n\t\tif (expiresIn && expiresIn > 86400 * 7) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"expiresIn must be less than 7 days (604800 seconds).\"\n\t\t});\n\t\tclass GetSignedUrlResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"GetSignedUrlResponse\")({\n\t\t\turl: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\tufsUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String\n\t\t}) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/requestFileAccess\", keyType === \"fileKey\" ? {\n\t\t\tfileKey: key,\n\t\t\texpiresIn\n\t\t} : {\n\t\t\tcustomId: key,\n\t\t\texpiresIn\n\t\t}, GetSignedUrlResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"getSignedURL\")));\n\t};\n\t/**\n\t* Update the ACL of a file or set of files.\n\t*\n\t* @example\n\t* // Make a single file public\n\t* await utapi.updateACL(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", \"public-read\");\n\t*\n\t* // Make multiple files private\n\t* await utapi.updateACL(\n\t*   [\n\t*     \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\n\t*     \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\",\n\t*   ],\n\t*   \"private\",\n\t* );\n\t*/\n\tupdateACL = async (keys, acl, opts) => {\n\t\tguardServerOnly();\n\t\tconst { keyType = this.defaultKeyType } = opts ?? {};\n\t\tconst updates = effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys).map((key) => {\n\t\t\treturn keyType === \"fileKey\" ? {\n\t\t\t\tfileKey: key,\n\t\t\t\tacl\n\t\t\t} : {\n\t\t\t\tcustomId: key,\n\t\t\t\tacl\n\t\t\t};\n\t\t});\n\t\tconst responseSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Struct({ success: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Boolean });\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/updateACL\", { updates }, responseSchema).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"updateACL\")));\n\t};\n};\n\n//#endregion\n//#region src/server.ts\nconst createUploadthing = (opts) => (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.createBuilder)(opts);\nconst createRouteHandler = (opts) => {\n\treturn (0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.makeAdapterHandler)((ev) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed({ req: \"request\" in ev ? ev.request : ev }), (ev) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed(\"request\" in ev ? ev.request : ev), opts, \"server\");\n};\nconst extractRouterConfig$1 = (router) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.runSync((0,_dist_upload_builder_BlFOAnsv_js__WEBPACK_IMPORTED_MODULE_5__.extractRouterConfig)(router));\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvc2VydmVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0Q7QUFDbUI7QUFDN0I7QUFDa007QUFDMU07QUFDK0c7QUFDcEc7QUFDRDtBQUNOO0FBQ2tCO0FBQ2M7QUFDRTtBQUM5QjtBQUNUO0FBQ0c7QUFDVzs7QUFFakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLCtEQUFNO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1EQUFtRCw4Q0FBVTtBQUM3RDtBQUNBO0FBQ0EsNEJBQTRCLG1FQUFxQixPQUFPLHVFQUF5QjtBQUNqRixxQkFBcUIsbUVBQXFCLHFCQUFxQiw0RUFBOEIsWUFBWSx5RUFBMkIsdUJBQXVCLHlFQUEyQiwwQkFBMEIsOERBQU8sdUJBQXVCLG1EQUFlLENBQUMsb0ZBQWtCLDRCQUE0QixtREFBZSxZQUFZLGlFQUFrQjtBQUN6VjtBQUNBO0FBQ0E7QUFDQSxFQUFFLElBQUksa0RBQWMsaUJBQWlCLGtEQUFjLENBQUMseURBQVksR0FBRyxpREFBYTtBQUNoRixRQUFRLG1EQUFlLFNBQVMsV0FBVyw2QkFBNkIsdURBQW1CO0FBQzNGO0FBQ0E7QUFDQTtBQUNBLEdBQUcscUZBQXFCO0FBQ3hCO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRyxxRkFBcUI7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsaUVBQWtCO0FBQ2hFO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSwrQkFBK0IsOENBQVU7QUFDekMsV0FBVyxzREFBa0I7QUFDN0I7QUFDQSw2Q0FBNkMsK0NBQVc7QUFDeEQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxTQUFTLGdGQUFnRixF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QUFDQSxHQUFHO0FBQ0gscUNBQXFDLGlEQUFPO0FBQzVDLFFBQVEsa0RBQVE7QUFDaEIsV0FBVyxrREFBUTtBQUNuQixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHLDZCQUE2QixzREFBa0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdDQUFnQztBQUMxQyxrQkFBa0IsaURBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCx5QkFBeUIsa0RBQVEsR0FBRyxTQUFTLG1EQUFTLEVBQUU7QUFDeEQsNEVBQTRFLFNBQVMsdUJBQXVCLHNEQUFrQjtBQUM5SDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQ0FBb0MsK0VBQWE7QUFDakQ7QUFDQSxRQUFRLG9GQUFrQixTQUFTLGtEQUFjLEdBQUcsd0NBQXdDLFdBQVcsa0RBQWM7QUFDckg7QUFDQSwwQ0FBMEMsa0RBQWMsQ0FBQyxxRkFBbUI7O0FBRTVFO0FBQytNO0FBQy9NIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmlkd2lubmVyYWkvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvc2VydmVyL2luZGV4LmpzP2JkMWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuLi9kaXN0L3BhY2thZ2UtRHBTY3B2VEEuanNcIjtcbmltcG9ydCB7IGxvZ0RlcHJlY2F0aW9uV2FybmluZyB9IGZyb20gXCIuLi9kaXN0L2RlcHJlY2F0aW9ucy1wTG13Nll0ZC5qc1wiO1xuaW1wb3J0IFwiLi4vZGlzdC9zaGFyZWQtc2NoZW1hcy1CbUc1QVJvWC5qc1wiO1xuaW1wb3J0IHsgQXBpVXJsLCBJbmdlc3RVcmwsIFVURmlsZXMsIFVUUmVnaW9uLCBVVFRva2VuLCBVZnNBcHBJZExvY2F0aW9uLCBVZnNIb3N0LCBjcmVhdGVCdWlsZGVyLCBleHRyYWN0Um91dGVyQ29uZmlnLCBsb2dIdHRwQ2xpZW50RXJyb3IsIGxvZ0h0dHBDbGllbnRSZXNwb25zZSwgbWFrZUFkYXB0ZXJIYW5kbGVyLCBtYWtlUnVudGltZSB9IGZyb20gXCIuLi9kaXN0L3VwbG9hZC1idWlsZGVyLUJsRk9BbnN2LmpzXCI7XG5pbXBvcnQgKiBhcyBBcnIgZnJvbSBcImVmZmVjdC9BcnJheVwiO1xuaW1wb3J0IHsgVXBsb2FkVGhpbmdFcnJvciwgVXBsb2FkVGhpbmdFcnJvciBhcyBVcGxvYWRUaGluZ0Vycm9yJDEsIGdlbmVyYXRlS2V5LCBnZW5lcmF0ZVNpZ25lZFVSTCwgcGFyc2VUaW1lVG9TZWNvbmRzIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcbmltcG9ydCB7IHVuc2FmZUNvZXJjZSB9IGZyb20gXCJlZmZlY3QvRnVuY3Rpb25cIjtcbmltcG9ydCAqIGFzIFByZWRpY2F0ZSBmcm9tIFwiZWZmZWN0L1ByZWRpY2F0ZVwiO1xuaW1wb3J0ICogYXMgRWZmZWN0IGZyb20gXCJlZmZlY3QvRWZmZWN0XCI7XG5pbXBvcnQgKiBhcyBIdHRwQ2xpZW50IGZyb20gXCJAZWZmZWN0L3BsYXRmb3JtL0h0dHBDbGllbnRcIjtcbmltcG9ydCAqIGFzIEh0dHBDbGllbnRSZXF1ZXN0IGZyb20gXCJAZWZmZWN0L3BsYXRmb3JtL0h0dHBDbGllbnRSZXF1ZXN0XCI7XG5pbXBvcnQgKiBhcyBIdHRwQ2xpZW50UmVzcG9uc2UgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSHR0cENsaWVudFJlc3BvbnNlXCI7XG5pbXBvcnQgKiBhcyBSZWRhY3RlZCBmcm9tIFwiZWZmZWN0L1JlZGFjdGVkXCI7XG5pbXBvcnQgKiBhcyBTIGZyb20gXCJlZmZlY3QvU2NoZW1hXCI7XG5pbXBvcnQgKiBhcyBDYXVzZSBmcm9tIFwiZWZmZWN0L0NhdXNlXCI7XG5pbXBvcnQgeyBsb29rdXAgfSBmcm9tIFwiQHVwbG9hZHRoaW5nL21pbWUtdHlwZXNcIjtcblxuLy8jcmVnaW9uIHNyYy9zZGsvdXQtZmlsZS50c1xuLyoqXG4qIEV4dGVuc2lvbiBvZiB0aGUgQmxvYiBjbGFzcyB0aGF0IHNpbXBsaWZpZXMgc2V0dGluZyB0aGUgYG5hbWVgIGFuZCBgY3VzdG9tSWRgIHByb3BlcnRpZXMsXG4qIHNpbWlsYXIgdG8gdGhlIGJ1aWx0LWluIEZpbGUgY2xhc3MgZnJvbSBOb2RlID4gMjAuXG4qL1xudmFyIFVURmlsZSA9IGNsYXNzIGV4dGVuZHMgQmxvYiB7XG5cdG5hbWU7XG5cdGxhc3RNb2RpZmllZDtcblx0Y3VzdG9tSWQ7XG5cdGNvbnN0cnVjdG9yKHBhcnRzLCBuYW1lLCBvcHRpb25zKSB7XG5cdFx0Y29uc3Qgb3B0aW9uc1dpdGhEZWZhdWx0cyA9IHtcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHR0eXBlOiBvcHRpb25zPy50eXBlID8/IChsb29rdXAobmFtZSkgfHwgXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIiksXG5cdFx0XHRsYXN0TW9kaWZpZWQ6IG9wdGlvbnM/Lmxhc3RNb2RpZmllZCA/PyBEYXRlLm5vdygpXG5cdFx0fTtcblx0XHRzdXBlcihwYXJ0cywgb3B0aW9uc1dpdGhEZWZhdWx0cyk7XG5cdFx0dGhpcy5uYW1lID0gbmFtZTtcblx0XHR0aGlzLmN1c3RvbUlkID0gb3B0aW9uc1dpdGhEZWZhdWx0cy5jdXN0b21JZDtcblx0XHR0aGlzLmxhc3RNb2RpZmllZCA9IG9wdGlvbnNXaXRoRGVmYXVsdHMubGFzdE1vZGlmaWVkO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL3VwbG9hZC1zZXJ2ZXIudHNcbmNvbnN0IHVwbG9hZFdpdGhvdXRQcm9ncmVzcyA9IChmaWxlLCBwcmVzaWduZWQpID0+IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcblx0Y29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblx0Zm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcblx0Y29uc3QgaHR0cENsaWVudCA9ICh5aWVsZCogSHR0cENsaWVudC5IdHRwQ2xpZW50KS5waXBlKEh0dHBDbGllbnQuZmlsdGVyU3RhdHVzT2spO1xuXHRjb25zdCBqc29uID0geWllbGQqIEh0dHBDbGllbnRSZXF1ZXN0LnB1dChwcmVzaWduZWQudXJsKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlGb3JtRGF0YShmb3JtRGF0YSksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEhlYWRlcihcIlJhbmdlXCIsIFwiYnl0ZXM9MC1cIiksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEhlYWRlcihcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiLCB2ZXJzaW9uKSwgaHR0cENsaWVudC5leGVjdXRlLCBFZmZlY3QudGFwRXJyb3IobG9nSHR0cENsaWVudEVycm9yKFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlXCIpKSwgRWZmZWN0Lm1hcEVycm9yKChlKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvciQxKHtcblx0XHRjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcblx0XHRtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGxvYWQgZmlsZVwiLFxuXHRcdGNhdXNlOiBlXG5cdH0pKSwgRWZmZWN0LmFuZFRoZW4oKF8pID0+IF8uanNvbiksIEVmZmVjdC5hbmRUaGVuKHVuc2FmZUNvZXJjZSksIEVmZmVjdC5zY29wZWQpO1xuXHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKGBGaWxlICR7ZmlsZS5uYW1lfSB1cGxvYWRlZCBzdWNjZXNzZnVsbHlgKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJqc29uXCIsIGpzb24pKTtcblx0cmV0dXJuIHtcblx0XHQuLi5qc29uLFxuXHRcdGdldCB1cmwoKSB7XG5cdFx0XHRsb2dEZXByZWNhdGlvbldhcm5pbmcoXCJgZmlsZS51cmxgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGxvYWR0aGluZyB2OS4gVXNlIGBmaWxlLnVmc1VybGAgaW5zdGVhZC5cIik7XG5cdFx0XHRyZXR1cm4ganNvbi51cmw7XG5cdFx0fSxcblx0XHRnZXQgYXBwVXJsKCkge1xuXHRcdFx0bG9nRGVwcmVjYXRpb25XYXJuaW5nKFwiYGZpbGUuYXBwVXJsYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgZmlsZS51ZnNVcmxgIGluc3RlYWQuXCIpO1xuXHRcdFx0cmV0dXJuIGpzb24uYXBwVXJsO1xuXHRcdH1cblx0fTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvc2RrL3V0aWxzLnRzXG5mdW5jdGlvbiBndWFyZFNlcnZlck9ubHkoKSB7XG5cdGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvciQxKHtcblx0XHRjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuXHRcdG1lc3NhZ2U6IFwiVGhlIGB1dGFwaWAgY2FuIG9ubHkgYmUgdXNlZCBvbiB0aGUgc2VydmVyLlwiXG5cdH0pO1xufVxuY29uc3QgZG93bmxvYWRGaWxlID0gKF91cmwpID0+IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcblx0bGV0IHVybCA9IFByZWRpY2F0ZS5pc1JlY29yZChfdXJsKSA/IF91cmwudXJsIDogX3VybDtcblx0aWYgKHR5cGVvZiB1cmwgPT09IFwic3RyaW5nXCIpIHtcblx0XHRpZiAodXJsLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSkgcmV0dXJuIHlpZWxkKiBFZmZlY3QuZmFpbCh7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcIlBsZWFzZSB1c2UgdXBsb2FkRmlsZXMoKSBmb3IgZGF0YSBVUkxzLiB1cGxvYWRGaWxlc0Zyb21VcmwoKSBpcyBpbnRlbmRlZCBmb3IgdXNlIHdpdGggcmVtb3RlIFVSTHMgb25seS5cIixcblx0XHRcdGRhdGE6IHZvaWQgMFxuXHRcdH0pO1xuXHR9XG5cdHVybCA9IG5ldyBVUkwodXJsKTtcblx0Y29uc3QgeyBuYW1lID0gdXJsLnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5wb3AoKSA/PyBcInVua25vd24tZmlsZW5hbWVcIiwgY3VzdG9tSWQgPSB2b2lkIDAgfSA9IFByZWRpY2F0ZS5pc1JlY29yZChfdXJsKSA/IF91cmwgOiB7fTtcblx0Y29uc3QgaHR0cENsaWVudCA9ICh5aWVsZCogSHR0cENsaWVudC5IdHRwQ2xpZW50KS5waXBlKEh0dHBDbGllbnQuZmlsdGVyU3RhdHVzT2spO1xuXHRjb25zdCBhcnJheUJ1ZmZlciA9IHlpZWxkKiBIdHRwQ2xpZW50UmVxdWVzdC5nZXQodXJsKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0Lm1vZGlmeSh7IGhlYWRlcnM6IHt9IH0pLCBodHRwQ2xpZW50LmV4ZWN1dGUsIEVmZmVjdC5mbGF0TWFwKChfKSA9PiBfLmFycmF5QnVmZmVyKSwgRWZmZWN0Lm1hcEVycm9yKChjYXVzZSkgPT4ge1xuXHRcdHJldHVybiB7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBgRmFpbGVkIHRvIGRvd25sb2FkIHJlcXVlc3RlZCBmaWxlOiAke2NhdXNlLm1lc3NhZ2V9YCxcblx0XHRcdGRhdGE6IGNhdXNlLnRvSlNPTigpXG5cdFx0fTtcblx0fSksIEVmZmVjdC5zY29wZWQpO1xuXHRyZXR1cm4gbmV3IFVURmlsZShbYXJyYXlCdWZmZXJdLCBuYW1lLCB7XG5cdFx0Y3VzdG9tSWQsXG5cdFx0bGFzdE1vZGlmaWVkOiBEYXRlLm5vdygpXG5cdH0pO1xufSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJkb3dubG9hZEZpbGVcIikpO1xuY29uc3QgZ2VuZXJhdGVQcmVzaWduZWRVcmwgPSAoZmlsZSwgY2QsIGFjbCkgPT4gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRjb25zdCB7IGFwaUtleSwgYXBwSWQgfSA9IHlpZWxkKiBVVFRva2VuO1xuXHRjb25zdCBiYXNlVXJsID0geWllbGQqIEluZ2VzdFVybCh2b2lkIDApO1xuXHRjb25zdCBrZXkgPSB5aWVsZCogZ2VuZXJhdGVLZXkoZmlsZSwgYXBwSWQpO1xuXHRjb25zdCB1cmwgPSB5aWVsZCogZ2VuZXJhdGVTaWduZWRVUkwoYCR7YmFzZVVybH0vJHtrZXl9YCwgYXBpS2V5LCB7IGRhdGE6IHtcblx0XHRcIngtdXQtaWRlbnRpZmllclwiOiBhcHBJZCxcblx0XHRcIngtdXQtZmlsZS1uYW1lXCI6IGZpbGUubmFtZSxcblx0XHRcIngtdXQtZmlsZS1zaXplXCI6IGZpbGUuc2l6ZSxcblx0XHRcIngtdXQtZmlsZS10eXBlXCI6IGZpbGUudHlwZSxcblx0XHRcIngtdXQtY3VzdG9tLWlkXCI6IGZpbGUuY3VzdG9tSWQsXG5cdFx0XCJ4LXV0LWNvbnRlbnQtZGlzcG9zaXRpb25cIjogY2QsXG5cdFx0XCJ4LXV0LWFjbFwiOiBhY2xcblx0fSB9KTtcblx0cmV0dXJuIHtcblx0XHR1cmwsXG5cdFx0a2V5XG5cdH07XG59KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImdlbmVyYXRlUHJlc2lnbmVkVXJsXCIpKTtcbmNvbnN0IHVwbG9hZEZpbGUgPSAoZmlsZSwgb3B0cykgPT4gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRjb25zdCBwcmVzaWduZWQgPSB5aWVsZCogZ2VuZXJhdGVQcmVzaWduZWRVcmwoZmlsZSwgb3B0cy5jb250ZW50RGlzcG9zaXRpb24gPz8gXCJpbmxpbmVcIiwgb3B0cy5hY2wpLnBpcGUoRWZmZWN0LmNhdGNoVGFnKFwiVXBsb2FkVGhpbmdFcnJvclwiLCAoZSkgPT4gRWZmZWN0LmZhaWwoVXBsb2FkVGhpbmdFcnJvciQxLnRvT2JqZWN0KGUpKSksIEVmZmVjdC5jYXRjaFRhZyhcIkNvbmZpZ0Vycm9yXCIsICgpID0+IEVmZmVjdC5mYWlsKHtcblx0XHRjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuXHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGdlbmVyYXRlIHByZXNpZ25lZCBVUkxcIlxuXHR9KSkpO1xuXHRjb25zdCByZXNwb25zZSA9IHlpZWxkKiB1cGxvYWRXaXRob3V0UHJvZ3Jlc3MoZmlsZSwgcHJlc2lnbmVkKS5waXBlKEVmZmVjdC5jYXRjaFRhZyhcIlVwbG9hZFRoaW5nRXJyb3JcIiwgKGUpID0+IEVmZmVjdC5mYWlsKFVwbG9hZFRoaW5nRXJyb3IkMS50b09iamVjdChlKSkpLCBFZmZlY3QuY2F0Y2hUYWcoXCJSZXNwb25zZUVycm9yXCIsIChlKSA9PiBFZmZlY3QuZmFpbCh7XG5cdFx0Y29kZTogXCJVUExPQURfRkFJTEVEXCIsXG5cdFx0bWVzc2FnZTogXCJGYWlsZWQgdG8gdXBsb2FkIGZpbGVcIixcblx0XHRkYXRhOiBlLnRvSlNPTigpXG5cdH0pKSk7XG5cdHJldHVybiB7XG5cdFx0a2V5OiBwcmVzaWduZWQua2V5LFxuXHRcdHVybDogcmVzcG9uc2UudXJsLFxuXHRcdGFwcFVybDogcmVzcG9uc2UuYXBwVXJsLFxuXHRcdHVmc1VybDogcmVzcG9uc2UudWZzVXJsLFxuXHRcdGxhc3RNb2RpZmllZDogZmlsZS5sYXN0TW9kaWZpZWQgPz8gRGF0ZS5ub3coKSxcblx0XHRuYW1lOiBmaWxlLm5hbWUsXG5cdFx0c2l6ZTogZmlsZS5zaXplLFxuXHRcdHR5cGU6IGZpbGUudHlwZSxcblx0XHRjdXN0b21JZDogZmlsZS5jdXN0b21JZCA/PyBudWxsLFxuXHRcdGZpbGVIYXNoOiByZXNwb25zZS5maWxlSGFzaFxuXHR9O1xufSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJ1cGxvYWRGaWxlXCIpKTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3Nkay9pbmRleC50c1xudmFyIFVUQXBpID0gY2xhc3Mge1xuXHRmZXRjaDtcblx0ZGVmYXVsdEtleVR5cGU7XG5cdHJ1bnRpbWU7XG5cdG9wdHM7XG5cdGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHR0aGlzLm9wdHMgPSBvcHRpb25zID8/IHt9O1xuXHRcdHRoaXMuZmV0Y2ggPSB0aGlzLm9wdHMuZmV0Y2ggPz8gZ2xvYmFsVGhpcy5mZXRjaDtcblx0XHR0aGlzLmRlZmF1bHRLZXlUeXBlID0gdGhpcy5vcHRzLmRlZmF1bHRLZXlUeXBlID8/IFwiZmlsZUtleVwiO1xuXHRcdHRoaXMucnVudGltZSA9IG1ha2VSdW50aW1lKHRoaXMuZmV0Y2gsIHRoaXMub3B0cyk7XG5cdH1cblx0cmVxdWVzdFVwbG9hZFRoaW5nID0gKHBhdGhuYW1lLCBib2R5LCByZXNwb25zZVNjaGVtYSkgPT4gRWZmZWN0Lmdlbih0aGlzLCBmdW5jdGlvbiogKCkge1xuXHRcdGNvbnN0IHsgYXBpS2V5IH0gPSB5aWVsZCogVVRUb2tlbjtcblx0XHRjb25zdCBiYXNlVXJsID0geWllbGQqIEFwaVVybDtcblx0XHRjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG5cdFx0cmV0dXJuIHlpZWxkKiBIdHRwQ2xpZW50UmVxdWVzdC5wb3N0KHBhdGhuYW1lKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LnByZXBlbmRVcmwoYmFzZVVybCksIEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlVbnNhZmVKc29uKGJvZHkpLCBIdHRwQ2xpZW50UmVxdWVzdC5zZXRIZWFkZXJzKHtcblx0XHRcdFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IHZlcnNpb24sXG5cdFx0XHRcIngtdXBsb2FkdGhpbmctYmUtYWRhcHRlclwiOiBcInNlcnZlci1zZGtcIixcblx0XHRcdFwieC11cGxvYWR0aGluZy1hcGkta2V5XCI6IFJlZGFjdGVkLnZhbHVlKGFwaUtleSlcblx0XHR9KSwgaHR0cENsaWVudC5leGVjdXRlLCBFZmZlY3QudGFwQm90aCh7XG5cdFx0XHRvblN1Y2Nlc3M6IGxvZ0h0dHBDbGllbnRSZXNwb25zZShcIlVwbG9hZFRoaW5nIEFQSSBSZXNwb25zZVwiKSxcblx0XHRcdG9uRmFpbHVyZTogbG9nSHR0cENsaWVudEVycm9yKFwiRmFpbGVkIHRvIHJlcXVlc3QgVXBsb2FkVGhpbmcgQVBJXCIpXG5cdFx0fSksIEVmZmVjdC5mbGF0TWFwKEh0dHBDbGllbnRSZXNwb25zZS5zY2hlbWFCb2R5SnNvbihyZXNwb25zZVNjaGVtYSkpLCBFZmZlY3Quc2NvcGVkKTtcblx0fSkucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJDb25maWdFcnJvclwiLCAoZSkgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3IkMSh7XG5cdFx0Y29kZTogXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIixcblx0XHRtZXNzYWdlOiBcIlRoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHRoZSBzZXJ2ZXIgY29uZmlndXJhdGlvbi4gTW9yZSBpbmZvIGNhbiBiZSBmb3VuZCBvbiB0aGlzIGVycm9yJ3MgYGNhdXNlYCBwcm9wZXJ0eVwiLFxuXHRcdGNhdXNlOiBlXG5cdH0pKSwgRWZmZWN0LndpdGhMb2dTcGFuKFwidXRhcGkuI3JlcXVlc3RVcGxvYWRUaGluZ1wiKSk7XG5cdGV4ZWN1dGVBc3luYyA9IGFzeW5jIChwcm9ncmFtLCBzaWduYWwpID0+IHtcblx0XHRjb25zdCBleGl0ID0gYXdhaXQgcHJvZ3JhbS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInV0YXBpLiNleGVjdXRlQXN5bmNcIiksIChlKSA9PiB0aGlzLnJ1bnRpbWUucnVuUHJvbWlzZUV4aXQoZSwgc2lnbmFsID8geyBzaWduYWwgfSA6IHZvaWQgMCkpO1xuXHRcdGlmIChleGl0Ll90YWcgPT09IFwiRmFpbHVyZVwiKSB0aHJvdyBDYXVzZS5zcXVhc2goZXhpdC5jYXVzZSk7XG5cdFx0cmV0dXJuIGV4aXQudmFsdWU7XG5cdH07XG5cdHVwbG9hZEZpbGVzKGZpbGVzLCBvcHRzKSB7XG5cdFx0Z3VhcmRTZXJ2ZXJPbmx5KCk7XG5cdFx0Y29uc3QgY29uY3VycmVuY3kgPSBvcHRzPy5jb25jdXJyZW5jeSA/PyAxO1xuXHRcdGlmIChjb25jdXJyZW5jeSA8IDEgfHwgY29uY3VycmVuY3kgPiAyNSkgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IkMSh7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcImNvbmN1cnJlbmN5IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyIGJldHdlZW4gMSBhbmQgMjVcIlxuXHRcdH0pO1xuXHRcdGNvbnN0IHByb2dyYW0gPSBFZmZlY3QuZm9yRWFjaChBcnIuZW5zdXJlKGZpbGVzKSwgKGZpbGUpID0+IHVwbG9hZEZpbGUoZmlsZSwgb3B0cyA/PyB7fSkucGlwZShFZmZlY3QubWF0Y2goe1xuXHRcdFx0b25TdWNjZXNzOiAoZGF0YSkgPT4gKHtcblx0XHRcdFx0ZGF0YSxcblx0XHRcdFx0ZXJyb3I6IG51bGxcblx0XHRcdH0pLFxuXHRcdFx0b25GYWlsdXJlOiAoZXJyb3IpID0+ICh7XG5cdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdGVycm9yXG5cdFx0XHR9KVxuXHRcdH0pKSwgeyBjb25jdXJyZW5jeSB9KS5waXBlKEVmZmVjdC5tYXAoKHVwcykgPT4gQXJyYXkuaXNBcnJheShmaWxlcykgPyB1cHMgOiB1cHNbMF0pLCBFZmZlY3QudGFwKChyZXMpID0+IEVmZmVjdC5sb2dEZWJ1ZyhcIkZpbmlzaGVkIHVwbG9hZGluZ1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJ1cGxvYWRSZXN1bHRcIiwgcmVzKSkpLCBFZmZlY3Qud2l0aExvZ1NwYW4oXCJ1cGxvYWRGaWxlc1wiKSk7XG5cdFx0cmV0dXJuIHRoaXMuZXhlY3V0ZUFzeW5jKHByb2dyYW0sIG9wdHM/LnNpZ25hbCk7XG5cdH1cblx0dXBsb2FkRmlsZXNGcm9tVXJsKHVybHMsIG9wdHMpIHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjb25zdCBjb25jdXJyZW5jeSA9IG9wdHM/LmNvbmN1cnJlbmN5ID8/IDE7XG5cdFx0aWYgKGNvbmN1cnJlbmN5IDwgMSB8fCBjb25jdXJyZW5jeSA+IDI1KSB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvciQxKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiY29uY3VycmVuY3kgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIgYmV0d2VlbiAxIGFuZCAyNVwiXG5cdFx0fSk7XG5cdFx0Y29uc3QgcHJvZ3JhbSA9IEVmZmVjdC5mb3JFYWNoKEFyci5lbnN1cmUodXJscyksICh1cmwpID0+IGRvd25sb2FkRmlsZSh1cmwpLnBpcGUoRWZmZWN0LmZsYXRNYXAoKGZpbGUpID0+IHVwbG9hZEZpbGUoZmlsZSwgb3B0cyA/PyB7fSkpLCBFZmZlY3QubWF0Y2goe1xuXHRcdFx0b25TdWNjZXNzOiAoZGF0YSkgPT4gKHtcblx0XHRcdFx0ZGF0YSxcblx0XHRcdFx0ZXJyb3I6IG51bGxcblx0XHRcdH0pLFxuXHRcdFx0b25GYWlsdXJlOiAoZXJyb3IpID0+ICh7XG5cdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdGVycm9yXG5cdFx0XHR9KVxuXHRcdH0pKSwgeyBjb25jdXJyZW5jeSB9KS5waXBlKEVmZmVjdC5tYXAoKHVwcykgPT4gQXJyYXkuaXNBcnJheSh1cmxzKSA/IHVwcyA6IHVwc1swXSksIEVmZmVjdC50YXAoKHJlcykgPT4gRWZmZWN0LmxvZ0RlYnVnKFwiRmluaXNoZWQgdXBsb2FkaW5nXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcInVwbG9hZFJlc3VsdFwiLCByZXMpKSksIEVmZmVjdC53aXRoTG9nU3BhbihcInVwbG9hZEZpbGVzXCIpKS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInVwbG9hZEZpbGVzRnJvbVVybFwiKSk7XG5cdFx0cmV0dXJuIHRoaXMuZXhlY3V0ZUFzeW5jKHByb2dyYW0sIG9wdHM/LnNpZ25hbCk7XG5cdH1cblx0LyoqXG5cdCogUmVxdWVzdCB0byBkZWxldGUgZmlsZXMgZnJvbSBVcGxvYWRUaGluZyBzdG9yYWdlLlxuXHQqIEBwYXJhbSB7c3RyaW5nIHwgc3RyaW5nW119IGZpbGVLZXlzXG5cdCpcblx0KiBAZXhhbXBsZVxuXHQqIGF3YWl0IGRlbGV0ZUZpbGVzKFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiKTtcblx0KlxuXHQqIEBleGFtcGxlXG5cdCogYXdhaXQgZGVsZXRlRmlsZXMoW1wiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLFwiMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIl0pXG5cdCpcblx0KiBAZXhhbXBsZVxuXHQqIGF3YWl0IGRlbGV0ZUZpbGVzKFwibXlDdXN0b21JZGVudGlmaWVyXCIsIHsga2V5VHlwZTogXCJjdXN0b21JZFwiIH0pXG5cdCovXG5cdGRlbGV0ZUZpbGVzID0gYXN5bmMgKGtleXMsIG9wdHMpID0+IHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjb25zdCB7IGtleVR5cGUgPSB0aGlzLmRlZmF1bHRLZXlUeXBlIH0gPSBvcHRzID8/IHt9O1xuXHRcdGNsYXNzIERlbGV0ZUZpbGVSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJEZWxldGVGaWxlUmVzcG9uc2VcIikoe1xuXHRcdFx0c3VjY2VzczogUy5Cb29sZWFuLFxuXHRcdFx0ZGVsZXRlZENvdW50OiBTLk51bWJlclxuXHRcdH0pIHt9XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL3Y2L2RlbGV0ZUZpbGVzXCIsIGtleVR5cGUgPT09IFwiZmlsZUtleVwiID8geyBmaWxlS2V5czogQXJyLmVuc3VyZShrZXlzKSB9IDogeyBjdXN0b21JZHM6IEFyci5lbnN1cmUoa2V5cykgfSwgRGVsZXRlRmlsZVJlc3BvbnNlKS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImRlbGV0ZUZpbGVzXCIpKSk7XG5cdH07XG5cdC8qKlxuXHQqIFJlcXVlc3QgZmlsZSBVUkxzIGZyb20gVXBsb2FkVGhpbmcgc3RvcmFnZS5cblx0KiBAcGFyYW0ge3N0cmluZyB8IHN0cmluZ1tdfSBmaWxlS2V5c1xuXHQqXG5cdCogQGV4YW1wbGVcblx0KiBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RmlsZVVybHMoXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIpO1xuXHQqIGNvbnNvbGUubG9nKGRhdGEpOyAvLyBbe2tleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIHVybDogXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIn1dXG5cdCpcblx0KiBAZXhhbXBsZVxuXHQqIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRGaWxlVXJscyhbXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiXSlcblx0KiBjb25zb2xlLmxvZyhkYXRhKSAvLyBbe2tleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIHVybDogXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiB9LHtrZXk6IFwiMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIiwgdXJsOiBcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIn1dXG5cdCpcblx0KiBAZGVwcmVjYXRlZCAtIFNlZSBodHRwczovL2RvY3MudXBsb2FkdGhpbmcuY29tL3dvcmtpbmctd2l0aC1maWxlcyNhY2Nlc3NpbmctZmlsZXMgZm9yIGluZm8gaG93IHRvIGFjY2VzcyBmaWxlc1xuXHQqL1xuXHRnZXRGaWxlVXJscyA9IGFzeW5jIChrZXlzLCBvcHRzKSA9PiB7XG5cdFx0Z3VhcmRTZXJ2ZXJPbmx5KCk7XG5cdFx0Y29uc3QgeyBrZXlUeXBlID0gdGhpcy5kZWZhdWx0S2V5VHlwZSB9ID0gb3B0cyA/PyB7fTtcblx0XHRjbGFzcyBHZXRGaWxlVXJsUmVzcG9uc2UgZXh0ZW5kcyBTLkNsYXNzKFwiR2V0RmlsZVVybFJlc3BvbnNlXCIpKHsgZGF0YTogUy5BcnJheShTLlN0cnVjdCh7XG5cdFx0XHRrZXk6IFMuU3RyaW5nLFxuXHRcdFx0dXJsOiBTLlN0cmluZ1xuXHRcdH0pKSB9KSB7fVxuXHRcdHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9nZXRGaWxlVXJsXCIsIGtleVR5cGUgPT09IFwiZmlsZUtleVwiID8geyBmaWxlS2V5czogQXJyLmVuc3VyZShrZXlzKSB9IDogeyBjdXN0b21JZHM6IEFyci5lbnN1cmUoa2V5cykgfSwgR2V0RmlsZVVybFJlc3BvbnNlKS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImdldEZpbGVVcmxzXCIpKSk7XG5cdH07XG5cdC8qKlxuXHQqIFJlcXVlc3QgZmlsZSBsaXN0IGZyb20gVXBsb2FkVGhpbmcgc3RvcmFnZS5cblx0KiBAcGFyYW0ge29iamVjdH0gb3B0c1xuXHQqIEBwYXJhbSB7bnVtYmVyfSBvcHRzLmxpbWl0IFRoZSBtYXhpbXVtIG51bWJlciBvZiBmaWxlcyB0byByZXR1cm5cblx0KiBAcGFyYW0ge251bWJlcn0gb3B0cy5vZmZzZXQgVGhlIG51bWJlciBvZiBmaWxlcyB0byBza2lwXG5cdCpcblx0KiBAZXhhbXBsZVxuXHQqIGNvbnN0IGRhdGEgPSBhd2FpdCBsaXN0RmlsZXMoeyBsaW1pdDogMSB9KTtcblx0KiBjb25zb2xlLmxvZyhkYXRhKTsgLy8geyBrZXk6IFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLCBpZDogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhcIiB9XG5cdCovXG5cdGxpc3RGaWxlcyA9IGFzeW5jIChvcHRzKSA9PiB7XG5cdFx0Z3VhcmRTZXJ2ZXJPbmx5KCk7XG5cdFx0Y2xhc3MgTGlzdEZpbGVSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJMaXN0RmlsZVJlc3BvbnNlXCIpKHtcblx0XHRcdGhhc01vcmU6IFMuQm9vbGVhbixcblx0XHRcdGZpbGVzOiBTLkFycmF5KFMuU3RydWN0KHtcblx0XHRcdFx0aWQ6IFMuU3RyaW5nLFxuXHRcdFx0XHRjdXN0b21JZDogUy5OdWxsT3IoUy5TdHJpbmcpLFxuXHRcdFx0XHRrZXk6IFMuU3RyaW5nLFxuXHRcdFx0XHRuYW1lOiBTLlN0cmluZyxcblx0XHRcdFx0c2l6ZTogUy5OdW1iZXIsXG5cdFx0XHRcdHN0YXR1czogUy5MaXRlcmFsKFwiRGVsZXRpb24gUGVuZGluZ1wiLCBcIkZhaWxlZFwiLCBcIlVwbG9hZGVkXCIsIFwiVXBsb2FkaW5nXCIpLFxuXHRcdFx0XHR1cGxvYWRlZEF0OiBTLk51bWJlclxuXHRcdFx0fSkpXG5cdFx0fSkge31cblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvbGlzdEZpbGVzXCIsIHsgLi4ub3B0cyB9LCBMaXN0RmlsZVJlc3BvbnNlKS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImxpc3RGaWxlc1wiKSkpO1xuXHR9O1xuXHRyZW5hbWVGaWxlcyA9IGFzeW5jICh1cGRhdGVzKSA9PiB7XG5cdFx0Z3VhcmRTZXJ2ZXJPbmx5KCk7XG5cdFx0Y2xhc3MgUmVuYW1lRmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIlJlbmFtZUZpbGVSZXNwb25zZVwiKSh7IHN1Y2Nlc3M6IFMuQm9vbGVhbiB9KSB7fVxuXHRcdHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9yZW5hbWVGaWxlc1wiLCB7IHVwZGF0ZXM6IEFyci5lbnN1cmUodXBkYXRlcykgfSwgUmVuYW1lRmlsZVJlc3BvbnNlKS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInJlbmFtZUZpbGVzXCIpKSk7XG5cdH07XG5cdGdldFVzYWdlSW5mbyA9IGFzeW5jICgpID0+IHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjbGFzcyBHZXRVc2FnZUluZm9SZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJHZXRVc2FnZUluZm9SZXNwb25zZVwiKSh7XG5cdFx0XHR0b3RhbEJ5dGVzOiBTLk51bWJlcixcblx0XHRcdGFwcFRvdGFsQnl0ZXM6IFMuTnVtYmVyLFxuXHRcdFx0ZmlsZXNVcGxvYWRlZDogUy5OdW1iZXIsXG5cdFx0XHRsaW1pdEJ5dGVzOiBTLk51bWJlclxuXHRcdH0pIHt9XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL3Y2L2dldFVzYWdlSW5mb1wiLCB7fSwgR2V0VXNhZ2VJbmZvUmVzcG9uc2UpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiZ2V0VXNhZ2VJbmZvXCIpKSk7XG5cdH07XG5cdC8qKlxuXHQqIEdlbmVyYXRlIGEgcHJlc2lnbmVkIHVybCBmb3IgYSBwcml2YXRlIGZpbGVcblx0KiBVbmxpa2Uge0BsaW5rIGdldFNpZ25lZFVSTH0sIHRoaXMgbWV0aG9kIGRvZXMgbm90IG1ha2UgYSBmZXRjaCByZXF1ZXN0IHRvIHRoZSBVcGxvYWRUaGluZyBBUElcblx0KiBhbmQgaXMgdGhlIHJlY29tbWVuZGVkIHdheSB0byBnZW5lcmF0ZSBhIHByZXNpZ25lZCB1cmwgZm9yIGEgcHJpdmF0ZSBmaWxlLlxuXHQqKi9cblx0Z2VuZXJhdGVTaWduZWRVUkwgPSBhc3luYyAoa2V5LCBvcHRzKSA9PiB7XG5cdFx0Z3VhcmRTZXJ2ZXJPbmx5KCk7XG5cdFx0Y29uc3QgZXhwaXJlc0luID0gcGFyc2VUaW1lVG9TZWNvbmRzKG9wdHM/LmV4cGlyZXNJbiA/PyBcIjUgbWludXRlc1wiKTtcblx0XHRpZiAob3B0cz8uZXhwaXJlc0luICYmIGlzTmFOKGV4cGlyZXNJbikpIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yJDEoe1xuXHRcdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdFx0bWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBhIHZhbGlkIHRpbWUgc3RyaW5nLCBmb3IgZXhhbXBsZSAnMWQnLCAnMiBkYXlzJywgb3IgYSBudW1iZXIgb2Ygc2Vjb25kcy5cIlxuXHRcdH0pO1xuXHRcdGlmIChleHBpcmVzSW4gPiA4NjQwMCAqIDcpIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yJDEoe1xuXHRcdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdFx0bWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBsZXNzIHRoYW4gNyBkYXlzICg2MDQ4MDAgc2Vjb25kcykuXCJcblx0XHR9KTtcblx0XHRjb25zdCBwcm9ncmFtID0gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRcdFx0Y29uc3QgeyBhcGlLZXksIGFwcElkIH0gPSB5aWVsZCogVVRUb2tlbjtcblx0XHRcdGNvbnN0IGFwcElkTG9jYXRpb24gPSB5aWVsZCogVWZzQXBwSWRMb2NhdGlvbjtcblx0XHRcdGNvbnN0IHVmc0hvc3QgPSB5aWVsZCogVWZzSG9zdDtcblx0XHRcdGNvbnN0IHByb3RvID0gdWZzSG9zdC5pbmNsdWRlcyhcImxvY2FsXCIpID8gXCJodHRwXCIgOiBcImh0dHBzXCI7XG5cdFx0XHRjb25zdCB1cmxCYXNlID0gYXBwSWRMb2NhdGlvbiA9PT0gXCJzdWJkb21haW5cIiA/IGAke3Byb3RvfTovLyR7YXBwSWR9LiR7dWZzSG9zdH0vZi8ke2tleX1gIDogYCR7cHJvdG99Oi8vJHt1ZnNIb3N0fS9hLyR7YXBwSWR9LyR7a2V5fWA7XG5cdFx0XHRjb25zdCB1ZnNVcmwgPSB5aWVsZCogZ2VuZXJhdGVTaWduZWRVUkwodXJsQmFzZSwgYXBpS2V5LCB7IHR0bEluU2Vjb25kczogZXhwaXJlc0luIH0pO1xuXHRcdFx0cmV0dXJuIHsgdWZzVXJsIH07XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHByb2dyYW0ucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJDb25maWdFcnJvclwiLCAoZSkgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3IkMSh7XG5cdFx0XHRjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuXHRcdFx0bWVzc2FnZTogXCJUaGVyZSB3YXMgYW4gZXJyb3Igd2l0aCB0aGUgc2VydmVyIGNvbmZpZ3VyYXRpb24uIE1vcmUgaW5mbyBjYW4gYmUgZm91bmQgb24gdGhpcyBlcnJvcidzIGBjYXVzZWAgcHJvcGVydHlcIixcblx0XHRcdGNhdXNlOiBlXG5cdFx0fSkpLCBFZmZlY3Qud2l0aExvZ1NwYW4oXCJnZW5lcmF0ZVNpZ25lZFVSTFwiKSkpO1xuXHR9O1xuXHQvKipcblx0KiBSZXF1ZXN0IGEgcHJlc2lnbmVkIHVybCBmb3IgYSBwcml2YXRlIGZpbGUocylcblx0KiBAcmVtYXJrcyBUaGlzIG1ldGhvZCBpcyBubyBsb25nZXIgcmVjb21tZW5kZWQgYXMgaXQgbWFrZXMgYSBmZXRjaFxuXHQqIHJlcXVlc3QgdG8gdGhlIFVwbG9hZFRoaW5nIEFQSSB3aGljaCBpbmN1cnMgcmVkdW5kYW50IGxhdGVuY3kuIEl0XG5cdCogd2lsbCBiZSBkZXByZWNhdGVkIGluIFVwbG9hZFRoaW5nIHY4IGFuZCByZW1vdmVkIGluIFVwbG9hZFRoaW5nIHY5LlxuXHQqXG5cdCogQHNlZSB7QGxpbmsgZ2VuZXJhdGVTaWduZWRVUkx9IGZvciBhIG1vcmUgZWZmaWNpZW50IHdheSB0byBnZW5lcmF0ZSBhIHByZXNpZ25lZCB1cmxcblx0KiovXG5cdGdldFNpZ25lZFVSTCA9IGFzeW5jIChrZXksIG9wdHMpID0+IHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjb25zdCBleHBpcmVzSW4gPSBvcHRzPy5leHBpcmVzSW4gPyBwYXJzZVRpbWVUb1NlY29uZHMob3B0cy5leHBpcmVzSW4pIDogdm9pZCAwO1xuXHRcdGNvbnN0IHsga2V5VHlwZSA9IHRoaXMuZGVmYXVsdEtleVR5cGUgfSA9IG9wdHMgPz8ge307XG5cdFx0aWYgKG9wdHM/LmV4cGlyZXNJbiAmJiBpc05hTihleHBpcmVzSW4pKSB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvciQxKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiZXhwaXJlc0luIG11c3QgYmUgYSB2YWxpZCB0aW1lIHN0cmluZywgZm9yIGV4YW1wbGUgJzFkJywgJzIgZGF5cycsIG9yIGEgbnVtYmVyIG9mIHNlY29uZHMuXCJcblx0XHR9KTtcblx0XHRpZiAoZXhwaXJlc0luICYmIGV4cGlyZXNJbiA+IDg2NDAwICogNykgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IkMSh7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcImV4cGlyZXNJbiBtdXN0IGJlIGxlc3MgdGhhbiA3IGRheXMgKDYwNDgwMCBzZWNvbmRzKS5cIlxuXHRcdH0pO1xuXHRcdGNsYXNzIEdldFNpZ25lZFVybFJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkdldFNpZ25lZFVybFJlc3BvbnNlXCIpKHtcblx0XHRcdHVybDogUy5TdHJpbmcsXG5cdFx0XHR1ZnNVcmw6IFMuU3RyaW5nXG5cdFx0fSkge31cblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvcmVxdWVzdEZpbGVBY2Nlc3NcIiwga2V5VHlwZSA9PT0gXCJmaWxlS2V5XCIgPyB7XG5cdFx0XHRmaWxlS2V5OiBrZXksXG5cdFx0XHRleHBpcmVzSW5cblx0XHR9IDoge1xuXHRcdFx0Y3VzdG9tSWQ6IGtleSxcblx0XHRcdGV4cGlyZXNJblxuXHRcdH0sIEdldFNpZ25lZFVybFJlc3BvbnNlKS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImdldFNpZ25lZFVSTFwiKSkpO1xuXHR9O1xuXHQvKipcblx0KiBVcGRhdGUgdGhlIEFDTCBvZiBhIGZpbGUgb3Igc2V0IG9mIGZpbGVzLlxuXHQqXG5cdCogQGV4YW1wbGVcblx0KiAvLyBNYWtlIGEgc2luZ2xlIGZpbGUgcHVibGljXG5cdCogYXdhaXQgdXRhcGkudXBkYXRlQUNMKFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLCBcInB1YmxpYy1yZWFkXCIpO1xuXHQqXG5cdCogLy8gTWFrZSBtdWx0aXBsZSBmaWxlcyBwcml2YXRlXG5cdCogYXdhaXQgdXRhcGkudXBkYXRlQUNMKFxuXHQqICAgW1xuXHQqICAgICBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIixcblx0KiAgICAgXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiLFxuXHQqICAgXSxcblx0KiAgIFwicHJpdmF0ZVwiLFxuXHQqICk7XG5cdCovXG5cdHVwZGF0ZUFDTCA9IGFzeW5jIChrZXlzLCBhY2wsIG9wdHMpID0+IHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjb25zdCB7IGtleVR5cGUgPSB0aGlzLmRlZmF1bHRLZXlUeXBlIH0gPSBvcHRzID8/IHt9O1xuXHRcdGNvbnN0IHVwZGF0ZXMgPSBBcnIuZW5zdXJlKGtleXMpLm1hcCgoa2V5KSA9PiB7XG5cdFx0XHRyZXR1cm4ga2V5VHlwZSA9PT0gXCJmaWxlS2V5XCIgPyB7XG5cdFx0XHRcdGZpbGVLZXk6IGtleSxcblx0XHRcdFx0YWNsXG5cdFx0XHR9IDoge1xuXHRcdFx0XHRjdXN0b21JZDoga2V5LFxuXHRcdFx0XHRhY2xcblx0XHRcdH07XG5cdFx0fSk7XG5cdFx0Y29uc3QgcmVzcG9uc2VTY2hlbWEgPSBTLlN0cnVjdCh7IHN1Y2Nlc3M6IFMuQm9vbGVhbiB9KTtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvdXBkYXRlQUNMXCIsIHsgdXBkYXRlcyB9LCByZXNwb25zZVNjaGVtYSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJ1cGRhdGVBQ0xcIikpKTtcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zZXJ2ZXIudHNcbmNvbnN0IGNyZWF0ZVVwbG9hZHRoaW5nID0gKG9wdHMpID0+IGNyZWF0ZUJ1aWxkZXIob3B0cyk7XG5jb25zdCBjcmVhdGVSb3V0ZUhhbmRsZXIgPSAob3B0cykgPT4ge1xuXHRyZXR1cm4gbWFrZUFkYXB0ZXJIYW5kbGVyKChldikgPT4gRWZmZWN0LnN1Y2NlZWQoeyByZXE6IFwicmVxdWVzdFwiIGluIGV2ID8gZXYucmVxdWVzdCA6IGV2IH0pLCAoZXYpID0+IEVmZmVjdC5zdWNjZWVkKFwicmVxdWVzdFwiIGluIGV2ID8gZXYucmVxdWVzdCA6IGV2KSwgb3B0cywgXCJzZXJ2ZXJcIik7XG59O1xuY29uc3QgZXh0cmFjdFJvdXRlckNvbmZpZyQxID0gKHJvdXRlcikgPT4gRWZmZWN0LnJ1blN5bmMoZXh0cmFjdFJvdXRlckNvbmZpZyhyb3V0ZXIpKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBVVEFwaSwgVVRGaWxlLCBVVEZpbGVzLCBVcGxvYWRUaGluZ0Vycm9yLCBjcmVhdGVCdWlsZGVyLCBjcmVhdGVSb3V0ZUhhbmRsZXIsIGNyZWF0ZVVwbG9hZHRoaW5nLCBVVFJlZ2lvbiBhcyBleHBlcmltZW50YWxfVVRSZWdpb24sIGV4dHJhY3RSb3V0ZXJDb25maWckMSBhcyBleHRyYWN0Um91dGVyQ29uZmlnLCBtYWtlQWRhcHRlckhhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/server/index.js\n");

/***/ })

};
;